<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>구두테스트 퀴즈 - 확률과 통계</title>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#f97316">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="OX퀴즈">
  <link rel="apple-touch-icon" href="/icon-192.png">
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
  <style>
    * { 
      font-family: 'Noto Sans KR', sans-serif;
    }
    .icon { width: 24px; height: 24px; stroke: currentColor; fill: none; stroke-width: 2; }
    
    /* 수식 렌더링이 완료될 때까지 숨김 (SSR처럼 보이도록) */
    #app {
      opacity: 0;
      transition: opacity 0.15s ease-in;
    }

    #app.ready {
      opacity: 1;
    }
    
    @media (hover: none) and (pointer: coarse) {
      * {
        -webkit-tap-highlight-color: transparent;
        transition: none !important;
      }
      *:active, *:focus, *:hover {
        outline: none !important;
        border-color: inherit !important;
        box-shadow: inherit !important;
        transform: none !important;
      }
    }
  </style>
</head>
<body class="bg-black">
  <div id="app"></div>

  <script>
    // Firebase 설정 - 대수와 동일한 프로젝트 사용 (컬렉션명: probability-students)
    const firebaseConfig = {
      apiKey: "AIzaSyCtS_FVlL18WC_ikOWw0Hgl8MSjdH-jSGc",
      authDomain: "ox-quiz-math.firebaseapp.com",
      projectId: "ox-quiz-math",
      storageBucket: "ox-quiz-math.firebasestorage.app",
      messagingSenderId: "1065273366803",
      appId: "1:1065273366803:web:49d4f836f185af67d1e2e6"
    };

    if (!firebase.apps.length) {
      firebase.initializeApp(firebaseConfig);
    }
    const db = firebase.firestore();
    const storage = firebase.storage();

    let offlineDB;

    // 관리자 보안 키 (실제 사용시 환경변수나 안전한 곳에 보관)
    const ADMIN_SECRET_KEY = "MATH2025ADMIN";
    const ADMIN_PASSWORD = "teacher2025"; // 관리자 공통 비밀번호

    // 학생 상태: 'active' (재원생), 'withdrawn' (퇴원생)
    
    // 아이콘 SVG
    const icons = {
      user: '<path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/>',
      bookOpen: '<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2zM22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>',
      chevronLeft: '<path d="m15 18-6-6 6-6"/>',
      chevronRight: '<path d="m9 18 6-6-6-6"/>',
      home: '<path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zM9 22V12h6v10"/>',
      barChart: '<path d="M3 3v18h18M18 17V9M13 17V5M8 17v-3"/>',
      award: '<path d="M8.21 13.89 7 23l5-3 5 3-1.21-9.12M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>',
      lock: '<path d="M7 11V7a5 5 0 0 1 10 0v4M5 11h14a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2Z"/>',
      checkCircle: '<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14M22 4 12 14.01l-3-3"/>',
      xCircle: '<circle cx="12" cy="12" r="10"/><path d="M15 9l-6 6M9 9l6 6"/>',
      clock: '<path d="M12 6v6l4 2M22 12A10 10 0 1 1 2 12a10 10 0 0 1 20 0Z"/>',
      users: '<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75M13 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/>',
      settings: '<circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m6.36 6.36 4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m6.36-6.36 4.24-4.24"/>',
      refreshCw: '<path d="M23 4v6h-6M1 20v-6h6"/><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>',
      info: '<circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><circle cx="12" cy="8" r=".5"/>'
    };

    function icon(type, className = '', size = 24) {
      return `<svg class="${className}" style="width:${size}px;height:${size}px;flex-shrink:0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">${icons[type]}</svg>`;
    }

    // IndexedDB 초기화
    function initIndexedDB() {
      return new Promise((resolve, reject) => {
        const request = indexedDB.open('OXQuizDB', 1);
        
        request.onerror = () => reject(request.error);
        request.onsuccess = () => {
          offlineDB = request.result;
          resolve(offlineDB);
        };
        
        request.onupgradeneeded = (event) => {
          const db = event.target.result;
          if (!db.objectStoreNames.contains('pendingData')) {
            db.createObjectStore('pendingData', { keyPath: 'id', autoIncrement: true });
          }
        };
      });
    }

    async function saveToIndexedDB(data) {
      return new Promise((resolve, reject) => {
        const transaction = offlineDB.transaction(['pendingData'], 'readwrite');
        const store = transaction.objectStore('pendingData');
        const request = store.add({
          uid: state.uid,
          data: data,
          timestamp: Date.now()
        });
        
        request.onsuccess = () => resolve();
        request.onerror = () => reject(request.error);
      });
    }

    async function deleteFromIndexedDB(id) {
      return new Promise((resolve, reject) => {
        const transaction = offlineDB.transaction(['pendingData'], 'readwrite');
        const store = transaction.objectStore('pendingData');
        const request = store.delete(id);
        
        request.onsuccess = () => resolve();
        request.onerror = () => reject(request.error);
      });
    }

    async function syncPendingData() {
      try {
        const transaction = offlineDB.transaction(['pendingData'], 'readonly');
        const store = transaction.objectStore('pendingData');
        const request = store.getAll();
        
        request.onsuccess = async () => {
          const pendingItems = request.result;
          
          for (const item of pendingItems) {
            try {
              await db.collection('probability-students').doc(item.uid).set(item.data);
              await deleteFromIndexedDB(item.id);
              console.log('동기화 완료:', item.id);
            } catch (error) {
              console.error('동기화 실패:', error);
            }
          }
          
          if (pendingItems.length > 0) {
            alert(`${pendingItems.length}개의 데이터가 동기화되었습니다!`);
            await loadData(state.uid);
            render();
          }
        };
      } catch (error) {
        console.error('동기화 오류:', error);
      }
    }

    // 카테고리 데이터
    // 카테고리 데이터
    const categories = [
      {
        id: 1,
        name: "Chapter 1. 경우의 수",
        chapterInfo: [
          { partName: "Part1", description: "덧셈 법칙 vs 곱셈 법칙", range: "Q1~Q9" },
          { partName: "Part2", description: "순열", range: "Q1~Q8" },
          { partName: "Part3", description: "조합", range: "Q1~Q12" }
        ],
        chapters: [
          { id: 1, name: "Part1. 덧셈 법칙 vs 곱셈 법칙", questions: [
            { question: "다음 문제에 대하여 설명하여라.<br>[Q1] 다음 5가지 상황 중 덧셈 법칙을 사용하는 것 2가지를 고르고, 그 이유를 설명하시오.<br><br>A) 주사위를 던져 짝수 또는 3의 배수가 나오는 경우<br>B) 셔츠 3종류와 바지 4종류를 하나씩 골라 입는 경우<br>C) 서울에서 부산까지 KTX 또는 비행기를 이용하는 경우<br>D) 동전과 주사위를 동시에 던지는 경우<br>E) 빨간 공 2개, 파란 공 3개 중 1개를 꺼내는 경우", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-1] 다음 5가지 상황 중 덧셈 법칙을 사용하는 것 2가지를 고르고, 그 이유를 설명하시오.<br><br>A) 점심으로 한식 3가지 또는 중식 4가지 중 하나를 고르는 경우<br>B) 상의 5종류와 하의 3종류 중 각각 하나를 고르는 경우<br>C) 1부터 10까지 중 홀수 또는 10의 약수를 고르는 경우<br>D) 비밀번호의 첫 자리와 둘째 자리를 정하는 경우<br>E) 편의점에서 음료 4종류 또는 과자 5종류 중 하나를 고르는 경우", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-2] 다음 5가지 상황 중 덧셈 법칙을 사용하는 것 2가지를 고르고, 그 이유를 설명하시오.<br><br>A) 수학책 2권, 영어책 3권 중 한 과목의 책 1권을 고르는 경우<br>B) 앞면과 뒷면이 있는 동전 2개를 던지는 경우<br>C) 볼펜 4자루와 연필 2자루 중 필기구 1개를 고르는 경우<br>D) 3개의 문 중 하나로 들어가고 2개의 문 중 하나로 나오는 경우<br>E) 주사위 2개를 동시에 던지는 경우", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-3] 다음 5가지 상황 중 덧셈 법칙을 사용하는 것 2가지를 고르고, 그 이유를 설명하시오.<br><br>A) 지하철 4개 노선 또는 버스 6개 노선 중 하나를 이용하는 경우<br>B) 4명 중 반장과 부반장을 뽑는 경우<br>C) 카페에서 아메리카노 또는 라떼 중 하나를 주문하는 경우<br>D) 오전에 영어, 오후에 수학 과목을 수강하는 경우<br>E) A팀 5명 중 1명을 뽑거나 B팀 3명 중 1명을 뽑는 경우", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q2] 다음 5가지 상황 중 곱셈 법칙을 사용하는 것 2가지를 고르고, 그 이유를 설명하시오.<br><br>A) 모자 3종류와 신발 4종류를 동시에 고르는 경우<br>B) 사탕 5개 또는 초콜릿 3개 중 하나를 고르는 경우<br>C) 집에서 학교까지 버스 3개 노선, 학교에서 도서관까지 지하철 2개 노선으로 가는 경우<br>D) 빨간 카드 4장 또는 파란 카드 6장 중 1장을 뽑는 경우<br>E) 1학년 5개 반 또는 2학년 4개 반 중 하나를 선택하는 경우", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-1] 다음 5가지 상황 중 곱셈 법칙을 사용하는 것 2가지를 고르고, 그 이유를 설명하시오.<br><br>A) 피자 4종류와 음료 3종류를 각각 하나씩 고르는 경우<br>B) 수학 문제 5개 또는 영어 문제 3개 중 하나를 푸는 경우<br>C) 동전을 던진 후 주사위를 던지는 경우<br>D) 남학생 4명 또는 여학생 5명 중 반장 1명을 뽑는 경우<br>E) 빨간 공 3개 또는 흰 공 2개 중 하나를 꺼내는 경우", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-2] 다음 5가지 상황 중 곱셈 법칙을 사용하는 것 2가지를 고르고, 그 이유를 설명하시오.<br><br>A) 아이스크림 6종류 또는 케이크 4종류 중 하나를 고르는 경우<br>B) 비밀번호 첫째 자리(1~9)와 둘째 자리(0~9)를 정하는 경우<br>C) 버스 3종류와 택시 2종류 중 하나를 이용하는 경우<br>D) 셔츠 5벌과 넥타이 3개를 각각 하나씩 고르는 경우<br>E) 1반 또는 2반에서 대표 1명을 뽑는 경우", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-3] 다음 5가지 상황 중 곱셈 법칙을 사용하는 것 2가지를 고르고, 그 이유를 설명하시오.<br><br>A) 과일 3종류 또는 채소 4종류 중 하나를 고르는 경우<br>B) 서울에서 대전까지 KTX 4편, 대전에서 부산까지 SRT 3편으로 가는 경우<br>C) 수학 동아리 또는 과학 동아리 중 하나를 선택하는 경우<br>D) 가위바위보에서 두 사람이 각각 하나를 내는 경우<br>E) 공원 3곳 또는 카페 5곳 중 한 곳을 가는 경우", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q3] 1부터 30까지의 자연수 중에서 3의 배수 또는 5의 배수의 개수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-1] 1부터 20까지의 자연수 중에서 2의 배수 또는 3의 배수인 수의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-2] 1부터 40까지의 자연수 중에서 4의 배수 또는 6의 배수인 수의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-3] 1부터 50까지의 자연수 중에서 5의 배수 또는 7의 배수인 수의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q4] 서로 다른 두 개의 주사위를 동시에 던질 때, 눈의 수의 합이 5 또는 7이 되는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-1] 서로 다른 두 개의 주사위를 동시에 던질 때, 눈의 수의 합이 4 또는 10이 되는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-2] 두 개의 주사위를 던질 때, 눈의 수의 곱이 6 또는 12가 되는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-3] 서로 다른 두 개의 주사위를 동시에 던질 때, 눈의 수의 합이 3 또는 11이 되는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q5] 방정식 \\(x+2y=8\\)을 만족시키는 음이 아닌 정수 \\(x\\), \\(y\\)의 순서쌍 \\((x, y)\\)의 개수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-1] 방정식 \\(x+y=6\\)을 만족시키는 음이 아닌 정수 \\(x\\), \\(y\\)의 순서쌍 \\((x, y)\\)의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-2] 방정식 \\(2x+y=10\\)을 만족시키는 음이 아닌 정수 순서쌍의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-3] 방정식 \\(3x+y=12\\)를 만족시키는 음이 아닌 정수 \\(x\\), \\(y\\)의 순서쌍 \\((x, y)\\)의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q6] \\(A\\)에서 \\(B\\)로 가는 길이 3가지, \\(B\\)에서 \\(C\\)로 가는 길이 4가지일 때, \\(A\\)에서 \\(C\\)까지 가는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-1] 집에서 학교까지 버스 노선이 5개, 학교에서 도서관까지 지하철 노선이 3개 있을 때 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-2] \\(A\\)에서 \\(B\\)로 가는 방법 4가지, \\(B\\)에서 \\(C\\)로 가는 방법 2가지일 때의 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-3] 서울에서 대전까지 KTX 5편, 대전에서 부산까지 KTX 3편이 있을 때 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q7] 100원짜리 동전 4개, 50원짜리 동전 3개가 있을 때, 지불할 수 있는 서로 다른 금액의 가짓수를 구하시오. (단, 0원을 지불하는 것은 제외한다.)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-1] 500원 3개, 100원 5개로 지불할 수 있는 서로 다른 금액의 가짓수를 구하시오. (0원 제외)", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-2] 1000원권 2장, 5000원권 3장으로 만들 수 있는 금액의 종류를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-3] 10원 4개, 50원 2개로 지불 가능한 금액의 가짓수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q8] 집합 \\(A = \\{1, 2, 3\\}\\), \\(B = \\{a, b, c, d\\}\\)에 대하여 \\(A\\)에서 \\(B\\)로의 함수의 개수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-1] 원소가 2개인 집합에서 원소가 5개인 집합으로의 함수의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-2] \\(\\{1, 2, 3, 4\\}\\)에서 \\(\\{x, y, z\\}\\)로의 함수의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-3] 집합 \\(X\\)의 원소가 3개, 집합 \\(Y\\)의 원소가 4개일 때, \\(X\\)에서 \\(Y\\)로의 함수의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q9] 주어진 수의 약수의 개수와 약수의 총합을 구하시오.<br>① 48<br>② 72", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-1] 주어진 수의 약수의 개수와 약수의 총합을 구하시오.<br>① 60<br>② 84", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-2] 주어진 수의 약수의 개수와 약수의 총합을 구하시오.<br>① 54<br>② 100", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-3] 주어진 수의 약수의 개수와 약수의 총합을 구하시오.<br>① 80<br>② 96", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 2, name: "Part2. 순열", questions: [
            { question: "다음 문제에 대하여 설명하여라.<br>[Q1] \\(_nP_r\\)의 의미는 무엇이고 어떻게 계산할까? (예를 들어 설명해도 좋음)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-1] 순열의 정의를 쓰고, \\(7\\)개에서 \\(3\\)개를 택하는 순열을 기호로 나타내시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-2] \\(_nP_r\\)의 정의를 쓰고, \\(n\\)과 \\(r\\)이 의미하는 바를 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-3] \\(_5P_3\\)의 의미를 말하고, 그 값을 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "순열에 대하여 다음을 구하시오.<br>[Q2] \\(_nP_r = \\) (\\(n!\\)을 이용하여 나타내시오.)<br>\\(_nP_n = \\)<br>\\(0! = \\)<br>\\(_nP_0 = \\)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-1] \\(_nP_r\\)을 팩토리얼을 이용하여 나타내시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-2] \\(_nP_r = \\frac{n!}{(n-r)!}\\) 공식을 유도하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-3] \\(0! = 1\\)인 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q3] 5명 중에서 회장, 부회장을 뽑는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-1] 6명 중에서 1등, 2등, 3등을 뽑는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-2] 8개 중 4개를 뽑아 일렬로 배열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-3] 10명의 선수 중에서 금메달, 은메달, 동메달 수상자를 정하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q4] 4개의 숫자 0, 1, 2, 3에서 서로 다른 3개의 숫자를 이용하여 만들 수 있는 세 자리 자연수의 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-1] 0, 1, 2, 3, 4에서 3개를 택해 세 자리 자연수를 만드는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-2] 1, 2, 3, 4, 5 중 3개로 세 자리 수를 만들 때, 짝수의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-3] 0, 1, 2, 3, 4로 만들 수 있는 네 자리 자연수의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q5] A, B, C 세 명이 가위바위보를 한 번 할 때, 가능한 모든 경우를 수형도로 나타내시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-1] 동전 3개를 동시에 던질 때 나올 수 있는 모든 경우를 수형도로 나타내시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-2] 1, 2, 3 중에서 중복을 허용하여 두 자리 수를 만들 때, 가능한 모든 경우를 수형도로 나타내시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-3] 빨강, 파랑, 노랑 중 2가지 색을 순서대로 뽑을 때, 가능한 모든 경우를 수형도로 나타내시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q6] 다음 그림의 3개의 공간 A, B, C를 서로 다른 4가지의 색을 이용하여 칠하려고 한다. 같은 색은 중복하여 사용해도 좋으나 이웃한 영역은 서로 다른 색으로 칠할 수 있는 경우의 수를 구하시오.<br><br><img src='image_38.png' alt='3개의 공간' style='max-width: 400px; margin: 10px 0;'>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-1] 다음 그림의 3개의 공간 A, B, C를 서로 다른 5가지의 색을 이용하여 칠하려고 한다. 같은 색은 중복하여 사용해도 좋으나 이웃한 영역은 서로 다른 색으로 칠할 수 있는 경우의 수를 구하시오.<br><br><img src='image_38.png' alt='3개의 공간' style='max-width: 400px; margin: 10px 0;'>", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-2] 다음 그림의 3개의 공간 A, B, C를 서로 다른 3가지의 색을 이용하여 칠하려고 한다. 이웃한 영역은 서로 다른 색으로 칠할 때, 경우의 수를 구하시오.<br><br><img src='image_38.png' alt='3개의 공간' style='max-width: 400px; margin: 10px 0;'>", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-3] 다음 그림의 3개의 공간 A, B, C를 서로 다른 6가지의 색을 이용하여 칠하려고 한다. 같은 색은 중복하여 사용해도 좋으나 이웃한 영역은 서로 다른 색으로 칠할 수 있는 경우의 수를 구하시오.<br><br><img src='image_38.png' alt='3개의 공간' style='max-width: 400px; margin: 10px 0;'>", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q7] 남학생 3명과 여학생 2명을 일렬로 세울 때, 여자끼리 이웃하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-1] 남학생 4명, 여학생 3명이 일렬로 설 때, 남학생끼리 이웃하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-2] A, B, C, D, E 5명이 일렬로 설 때, A와 B가 이웃하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-3] A, B를 포함한 6명을 일렬로 세울 때, A와 B가 이웃하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q8] 남학생 3명과 여학생 2명을 일렬로 세울 때, 여자끼리 이웃하지 않는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-1] A, B를 포함한 5명을 일렬로 세울 때, A와 B가 이웃하지 않는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-2] 남학생 4명, 여학생 3명을 일렬로 세울 때, 여학생끼리 이웃하지 않는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-3] A, B를 포함한 6명이 일렬로 설 때, A와 B가 떨어져 있는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 3, name: "Part3. 조합", questions: [
            { question: "다음 문제에 대하여 설명하시오.<br>[Q1] \\(_nC_r\\)의 의미는 무엇이고 어떻게 계산할까? (예를 들어 설명해도 좋음)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-1] 조합의 정의를 쓰고, 8개 중 3개를 선택하는 것을 기호로 나타내시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-2] \\(_nC_r\\)의 의미를 쓰고, 순열과의 차이점을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-3] 조합에서 순서를 고려하지 않는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "조합에 대하여 다음을 구하시오.<br>[Q2] \\(_nC_r = \\) (\\(n!\\)을 이용하여 나타내시오.)<br>\\(_nC_n = \\)<br>\\(_nC_0 = \\)<br>\\(_nC_1 = \\)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-1] \\(_nC_r\\)을 팩토리얼로 나타내시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-2] \\(_nC_r = \\frac{n!}{r!(n-r)!}\\) 공식을 유도하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-3] \\(_nC_r = _nC_{n-r}\\)이 성립하는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q3] 5명 중에서 대표 2명을 뽑는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-1] 8명 중 3명의 대표를 뽑는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-2] 10명 중 5명을 선택하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-3] 12명의 학생 중에서 청소 당번 4명을 뽑는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q4] 남학생 4명, 여학생 3명 중에서 남학생 2명, 여학생 1명을 뽑는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-1] 남학생 5명, 여학생 4명 중 남학생 3명, 여학생 2명을 뽑는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-2] 빨강 공 4개, 파랑 공 3개에서 빨강 2개, 파랑 1개를 선택하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-3] A조 6명, B조 5명에서 A조 2명, B조 3명을 뽑는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q5] 남학생 5명, 여학생 4명 중에서 4명을 뽑을 때, 남학생이 적어도 2명 포함되도록 하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-1] 10명 중 5명을 뽑을 때, 특정인 A가 반드시 포함되는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-2] 남학생 6명, 여학생 5명 중 5명을 뽑을 때, 여학생이 적어도 2명인 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-3] '적어도' 조건이 있는 조합 문제를 푸는 두 가지 방법(직접 구하기, 여사건 이용)을 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q6] 서로 다른 10권의 책을 3명에게 각각 2권, 3권, 5권씩 나누어 주는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-1] 서로 다른 12권의 책을 3명에게 각각 2권, 4권, 6권씩 나누어 주는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-2] 서로 다른 9개의 공을 3명에게 각각 1개, 3개, 5개씩 나누어 주는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-3] 서로 다른 15자루의 연필을 3명에게 각각 3자루, 5자루, 7자루씩 나누어 주는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q7] 8개의 서로 다른 점 중에서 3개를 선택하여 만들 수 있는 삼각형의 개수를 구하시오. (단, 어떤 세 점도 한 직선 위에 있지 않다.)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-1] 10개의 점 중 4개를 선택하여 만드는 사각형의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-2] 평면 위의 6개 점에서 2개를 선택하여 만드는 직선의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-3] 12개의 서로 다른 점 중에서 3개를 선택하여 만들 수 있는 삼각형의 개수를 구하시오. (단, 어떤 세 점도 한 직선 위에 있지 않다.)", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q8] 1, 2, 3, 4, 5, 6을 한 번만 사용하여 만들 수 있는 세 자리 자연수의 개수를 구하시오. (조합을 이용하여 풀기)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-1] 1부터 5까지 숫자 중 3개를 선택하여 세 자리 수를 만들 때 조합을 이용하여 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-2] 서로 다른 숫자 5개 중 3개를 선택하는 방법과 배열하는 방법을 나누어 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-3] 1, 2, 3, 4, 5 중 3개를 한 번만 사용하여 만들 수 있는 세 자리 자연수의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q9] 다음 그림과 같은 6개의 점 중에서 임의로 2개의 점을 택하여 만들 수 있는 서로 다른 직선의 개수를 구하시오.<br><br><img src='image_34.png' alt='6개의 점' style='max-width: 400px; margin: 10px 0;'>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q9-1] 8개의 점에서 2개를 선택하여 만들 수 있는 직선의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q9-2] 평면 위의 10개 점에서 만들 수 있는 직선의 최대 개수를 구하시오. (일직선상에 있지 않음)", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q9-3] 일직선상에 3개, 따로 떨어진 4개 총 7개 점에서 만들 수 있는 직선의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q10] 다음 그림에서 점 6개 중에서 세 점을 이어 만들 수 있는 삼각형의 수를 구하시오.<br><br><img src='image_35.png' alt='반원 위의 6개 점' style='max-width: 400px; margin: 10px 0;'>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-1] 원 위의 8개 점 중 3개를 선택하여 만들 수 있는 삼각형의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-2] 일직선상에 있지 않은 점들로 삼각형을 만들 때 주의할 점을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-3] 반원 위의 점들로 삼각형을 만들 때 모든 삼각형이 가능한 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q11] 정육각형 대각선의 개수는?", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q11-1] 정오각형의 대각선의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q11-2] 정\\(n\\)각형의 대각선의 개수를 구하는 공식을 유도하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q11-3] 정팔각형의 대각선의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q12] 다음 그림과 같이 5개의 평행한 가로선과 3개의 평행한 세로선이 서로 만날 때, 이 평행선으로 만들어지는 평행사변형의 개수를 구하시오.<br><br><img src='image_36.png' alt='평행선 격자' style='max-width: 400px; margin: 10px 0;'>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q12-1] 4개의 평행한 가로선과 4개의 평행한 세로선으로 만들어지는 평행사변형의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q12-2] \\(m\\)개의 평행선과 \\(n\\)개의 평행선이 만날 때 평행사변형의 개수를 구하는 공식을 유도하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q12-3] 6개의 평행선과 5개의 평행선으로 만들 수 있는 평행사변형의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]}
        ]
      },
      {
        id: 2,
        name: "Chapter 2. 여러가지 순열",
        chapterInfo: [
          { partName: "Part1", description: "중복순열", range: "Q1~Q3" },
          { partName: "Part2", description: "같은 것이 있는 순열", range: "Q1~Q13" }
        ],
        chapters: [
          { id: 1, name: "Part1. 중복순열", questions: [
            { question: "다음 문제에 대하여 설명하여라.<br>[Q1] 다음 4가지 상황 중 중복순열에 해당하는 것 2가지를 고르고, 각각 왜 중복순열인지 설명하시오.<br><br>A) 1, 2, 3으로 세 자리 수 만들기 (같은 숫자 중복 사용 가능)<br>B) 5명 중 3명을 뽑아 일렬로 세우기<br>C) 1, 2, 3으로 세 자리 수 만들기 (같은 숫자 중복 불가)<br>D) 주사위를 2번 던지기", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-1] 중복순열의 정의를 쓰고, 일반 순열과의 차이점을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-2] 숫자 1, 2, 3으로 두 자리 수를 만드는 경우를 예시로 중복순열을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-3] 중복을 허용하여 나열한다는 의미를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q2] 중복순열에서 빈 곳이 가능하다는 말이 필요한 이유는 무엇인가? (예: 편지를 우체통에 넣는 경우)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-1] 3통의 편지를 4개의 우체통에 넣는 경우의 수를 구하고, 빈 우체통이 생길 수 있는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-2] 빈 것이 가능하다는 조건이 있을 때와 없을 때의 차이를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-3] 편지를 우체통에 넣는 문제에서 중복순열이 사용되는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q3] 1, 2, 3, 4를 이용하여 세 자리 수를 만들 때, 다음 각 경우의 수를 구하시오.<br>(1) 서로 다른 숫자를 택하는 경우<br>(2) 중복을 허용하여 택하는 경우", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-1] 5가지 색 중 3가지를 골라 신호등을 만들 때, 다음 각 경우의 수를 구하시오.<br>(1) 서로 다른 색을 택하는 경우<br>(2) 중복을 허용하여 택하는 경우", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-2] A, B, C, D 4명 중 2명의 대표를 순서대로 뽑을 때, 다음 각 경우의 수를 구하시오.<br>(1) 같은 사람을 중복 선출할 수 없는 경우<br>(2) 같은 사람을 중복 선출할 수 있는 경우", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-3] 주사위 1개를 2번 던져 나온 눈의 수로 두 자리 수를 만들 때, 다음 각 경우의 수를 구하시오.<br>(1) 두 눈의 수가 서로 다른 경우<br>(2) 두 눈의 수가 같아도 되는 경우", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 2, name: "Part2. 같은 것이 있는 순열", questions: [
            { question: "다음 문제에 대하여 설명하여라.<br>[Q1] 같은 것이 있는 순열에서, 왜 일반 순열보다 경우의 수가 적은지 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-1] 같은 것이 있는 순열에서 나누어 주는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-2] 같은 문자가 포함되었을 때 경우의 수가 줄어드는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-3] AABB를 나열하는 경우의 수를 구하고, \\(4!\\)과 다른 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q2] A, A, A, B, C를 나열하는 경우의 수를 구하는 두 가지 방법을 각각 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-1] X, X, Y, Y, Z, Z를 일렬로 나열하는 경우의 수를 두 가지 방법으로 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-2] 1, 1, 1, 2, 2, 3, 3을 일렬로 나열하는 경우의 수를 두 가지 방법으로 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-3] 빨간 구슬 4개, 파란 구슬 2개를 일렬로 배열하는 경우의 수를 두 가지 방법으로 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q3] 1, 2, 3, 4, 5를 일렬로 나열할 때, 1, 3, 5는 반드시 크기 순서대로(증가 순서) 나타나야 한다. 이런 조건이 있을 때 경우의 수를 구하는 방법을 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-1] A, B, C, D, E를 일렬로 나열할 때, A, C, E는 알파벳 순서를 유지해야 한다. 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-2] 1, 2, 3, 4, 5, 6을 일렬로 나열할 때, 짝수 2, 4, 6은 반드시 크기 순서대로 나타나야 한다. 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-3] 7명의 학생을 일렬로 세울 때, 특정 3명은 키 순서대로 서야 한다. 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q4] 1, 2, 3, 4, 5, 6을 나열할 때 홀수는 크기 순서대로 나열하고, 2는 4 왼쪽에 오도록 나열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-1] 1~5를 나열할 때 홀수는 증가 순서, 2는 4 왼쪽에 오는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-2] 1, 2, 3, 4, 5, 6, 7을 나열할 때 홀수는 크기 순서대로 나열하고, 2는 4 왼쪽에 오도록 나열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-3] A, B, C, D를 나열할 때 A는 B 왼쪽, C는 D 왼쪽인 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q5] 격자에서 오른쪽으로 3칸, 위로 2칸 가는 최단 거리의 경우의 수를 다음 각 방법으로 구하시오.<br>(1) 같은 것이 있는 순열을 이용하여 구하시오.<br>(2) 조합을 이용하여 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-1] 오른쪽(R) 4번, 위(U) 3번 이동하는 경우의 수를 (1) 같은 것이 있는 순열로 (2) 조합으로 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-2] (0,0)에서 (4,3)으로 가는 최단 경로의 수를 (1) 같은 것이 있는 순열로 (2) 조합으로 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-3] 조합 방법과 같은 것이 있는 순열 방법이 같은 답이 나오는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q6] (0,0)에서 (3,2)로 가는데 중간에 (1,1) 지점에 장애물이 있어 지나갈 수 없다. 이때 최단 경로의 수를 구하는 방법 2가지를 설명하시오.<br>(방법1: 전체에서 빼기, 방법2: 경로를 나누어 계산)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-1] 중간에 지나갈 수 없는 점이 있을 때 경로의 수를 구하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-2] 장애물이 있을 때 전체 경로에서 빼는 방법을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-3] 특정 점을 반드시 지나가는 경로의 수를 구하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q7] 오른쪽 그림과 같은 도로망에서 A 지점에서 B 지점까지 최단 거리로 가는 경우의 수를 구하시오.<br><br><img src='image_37.png' alt='도로망 격자' style='max-width: 400px; margin: 10px 0;'>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-1] 격자 도로에서 오른쪽 4칸, 위 3칸 이동하는 최단 경로의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-2] (0,0)에서 (5,3)까지 최단 경로로 가는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-3] 가로 3칸, 세로 2칸 격자에서 A에서 B까지 최단 경로를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q8] BALLOON의 7개 문자를 일렬로 나열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-1] ARRANGE의 문자를 나열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-2] BANANA를 나열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-3] LEVEL의 5개 문자를 일렬로 나열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q9] 빨강 공 3개, 파랑 공 2개, 노랑 공 1개를 일렬로 나열하는 경우의 수를 구하시오. (단, 서로 같은 색의 공은 구분하지 않는다.)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q9-1] 빨강 4개, 파랑 2개를 일렬로 배열하는 경우의 수를 구하시오. (단, 서로 같은 색의 공은 구분하지 않는다.)", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q9-2] 서로 다른 3종류의 공을 배열할 때 공식을 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q9-3] 1, 1, 1, 2, 2, 3을 나열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q10] 0, 0, 1, 1, 2, 3의 6개 숫자를 모두 사용하여 만들 수 있는 여섯 자리 자연수의 개수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-1] 0, 1, 1, 2, 2, 3으로 여섯 자리 자연수를 만드는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-2] 1, 2, 2, 3, 3의 5개 숫자를 모두 사용하여 만들 수 있는 다섯 자리 자연수의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-3] 1, 1, 2, 2, 3, 3으로 여섯 자리 수를 만드는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q11] SUCCESS를 나열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q11-1] APPLE을 나열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q11-2] COFFEE를 나열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q11-3] 단어를 나열할 때 같은 문자가 몇 개인지 세는 방법을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q12] 1, 1, 2, 2, 3, 3을 일렬로 나열할 때, 같은 숫자끼리 이웃하도록 배열하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q12-1] A, A, B, B, C, C를 나열할 때 같은 문자끼리 붙어있는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q12-2] 3쌍의 숫자를 쌍끼리 이웃하게 배열하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q12-3] 같은 것끼리 묶어서 배열하는 문제의 풀이 방법을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q13] 5명이 원탁에 둘러앉는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q13-1] 원순열의 공식을 쓰고, \\(n\\)명이 원탁에 앉는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q13-2] 6명이 원탁에 둘러앉는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q13-3] 원순열과 일반 순열의 차이를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]}
        ]
      },
      {
        id: 3,
        name: "Chapter 3. 중복조합",
        chapterInfo: [
          { partName: "Part1", description: "중복조합", range: "Q1~Q6" },
          { partName: "Part2", description: "경우의 수 구별해보기", range: "Q1~Q5" }
        ],
        chapters: [
          { id: 1, name: "Part1. 중복조합", questions: [
            { question: "다음 문제에 대하여 설명하여라.<br>[Q1] 중복조합이란 무엇이고, 언제 사용하는가? 중복조합과 조합의 차이를 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-1] 중복조합의 정의를 쓰고, \\(_nH_r\\)의 의미를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-2] 중복조합과 일반 조합의 차이점을 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-3] 중복을 허용하여 선택하는 상황을 2가지 예시로 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q2] 방정식 \\(x+y+z=8\\)을 만족시키는 정수 \\(x\\), \\(y\\), \\(z\\)에 대한 조건이 다음과 같을 때 순서쌍 \\((x, y, z)\\)의 개수를 구하시오.<br>① 음이 아닌 정수 \\(x\\), \\(y\\), \\(z\\)<br>② \\(x \\geq 2\\), \\(y \\geq 1\\), \\(z \\geq 1\\)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-1] 방정식 \\(x+y+z=6\\)의 음이 아닌 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-2] 방정식 \\(x+y+z=10\\)에서 \\(x \\geq 1\\), \\(y \\geq 1\\), \\(z \\geq 2\\)인 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-3] 방정식 \\(x+y+z=12\\)의 음이 아닌 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q3] 방정식 \\(x+y+2z=6\\)을 만족시키는 양의 정수 \\(x\\), \\(y\\), \\(z\\)에 대하여 순서쌍 \\((x, y, z)\\)의 개수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-1] 방정식 \\(x+2y+z=10\\)의 양의 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-2] 방정식 \\(2x+y+z=8\\)의 양의 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-3] 방정식 \\(x+3y+z=12\\)의 양의 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q4] 방정식 \\(x+y+z=6\\)을 만족하는 정수 \\(x\\), \\(y\\), \\(z\\)의 순서쌍 \\((x, y, z)\\)의 개수를 구하시오. (단, \\(x \\leq 1\\), \\(y \\geq 1\\), \\(z \\geq 1\\))", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-1] 방정식 \\(x+y+z=5\\)에서 \\(x \\leq 2\\), \\(y \\geq 0\\), \\(z \\geq 1\\)인 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-2] 방정식 \\(x+y+z=7\\)에서 \\(x \\leq 3\\), \\(y \\geq 1\\), \\(z \\geq 1\\)인 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-3] 방정식 \\(x+y+z=8\\)에서 \\(x \\leq 4\\), \\(y \\geq 2\\), \\(z \\geq 1\\)인 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q5] 부등식 \\(x+y+z \\leq 5\\)를 만족하는 음이 아닌 정수 \\(x\\), \\(y\\), \\(z\\)의 순서쌍 \\((x, y, z)\\)의 개수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-1] 부등식 \\(x+y+z \\leq 6\\)의 음이 아닌 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-2] 부등식 \\(x+y+z \\leq 4\\)의 음이 아닌 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-3] 부등식 \\(x+y+z \\leq 7\\)의 음이 아닌 정수해의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q6] 사과, 배, 귤 중 중복을 허용하여 4개를 선택하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-1] 사과, 배, 귤 중 중복을 허용하여 5개를 선택하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-2] 사과, 배, 귤 중 중복을 허용하여 6개를 선택하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-3] 사과, 배, 귤 중 중복을 허용하여 3개를 선택하는 경우의 수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 2, name: "Part2. 경우의 수 구별해보기", questions: [
            { question: "다음 문제에 대하여 설명하여라.<br>[Q1] 다음 부등식을 만족하는 정수 \\(a\\), \\(b\\), \\(c\\)의 순서쌍 \\((a, b, c)\\)의 개수를 구하시오.<br>\\(1 \\leq |a| \\leq |b| \\leq |c| \\leq 5\\)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-1] \\(1 \\leq |x| \\leq |y| \\leq 3\\)을 만족하는 정수 순서쌍의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-2] \\(1 \\leq |a| \\leq |b| \\leq 4\\)를 만족하는 정수 순서쌍의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-3] \\(1 \\leq |x| \\leq |y| \\leq |z| \\leq 4\\)를 만족하는 정수 순서쌍의 개수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q2] 두 집합 \\(X = \\{1, 2, 3\\}\\), \\(Y = \\{4, 5, 6, 7, 8\\}\\)에 대하여 주어진 조건을 만족하는 \\(X\\)에서 \\(Y\\)로의 함수의 개수를 구하시오.<br>① \\(X\\)에서 \\(Y\\)로의 함수<br>② \\(x_i \\neq x_j\\)이면 \\(f(x_i) \\neq f(x_j)\\)<br>③ \\(x_i < x_j\\)이면 \\(f(x_i) < f(x_j)\\)<br>④ \\(x_i < x_j\\)이면 \\(f(x_i) \\leq f(x_j)\\)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-1] 두 집합 \\(X = \\{1, 2, 3\\}\\), \\(Y = \\{4, 5, 6, 7\\}\\)에 대하여 다음 조건을 만족하는 함수의 개수를 각각 구하시오.<br>① \\(X\\)에서 \\(Y\\)로의 함수<br>② \\(x_i \\neq x_j\\)이면 \\(f(x_i) \\neq f(x_j)\\)<br>③ \\(x_i < x_j\\)이면 \\(f(x_i) < f(x_j)\\)<br>④ \\(x_i < x_j\\)이면 \\(f(x_i) \\leq f(x_j)\\)", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-2] 두 집합 \\(X = \\{1, 2, 3\\}\\), \\(Y = \\{4, 5, 6, 7, 8, 9\\}\\)에 대하여 다음 조건을 만족하는 함수의 개수를 각각 구하시오.<br>① \\(X\\)에서 \\(Y\\)로의 함수<br>② \\(x_i \\neq x_j\\)이면 \\(f(x_i) \\neq f(x_j)\\)<br>③ \\(x_i < x_j\\)이면 \\(f(x_i) < f(x_j)\\)<br>④ \\(x_i < x_j\\)이면 \\(f(x_i) \\leq f(x_j)\\)", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-3] 두 집합 \\(X = \\{1, 2, 3\\}\\), \\(Y = \\{4, 5, 6\\}\\)에 대하여 다음 조건을 만족하는 함수의 개수를 각각 구하시오.<br>① \\(X\\)에서 \\(Y\\)로의 함수<br>② \\(x_i \\neq x_j\\)이면 \\(f(x_i) \\neq f(x_j)\\)<br>③ \\(x_i < x_j\\)이면 \\(f(x_i) < f(x_j)\\)<br>④ \\(x_i < x_j\\)이면 \\(f(x_i) \\leq f(x_j)\\)", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q3] 다음 4가지 상황을 중복순열, 순열, 중복조합, 조합 중 어느 것으로 풀어야 하는지 각각 판단하고 그 이유를 설명하시오.<br><br>A) 5명 중 3명을 뽑아 일렬로 세우기<br>B) 3종류 과일에서 중복을 허용하여 5개 선택<br>C) 1,2,3 숫자로 비밀번호 4자리 만들기 (중복 가능)<br>D) 10명 중 3명의 대표 선출", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-1] 다음 4가지 상황을 중복순열, 순열, 중복조합, 조합 중 어느 것으로 풀어야 하는지 각각 판단하고 그 이유를 설명하시오.<br><br>a) 4명 중 2명을 뽑아 반장과 부반장 정하기<br>b) 5종류의 빵에서 중복을 허용하여 3개 구매하기<br>c) 0,1,2,3 숫자로 4자리 PIN 번호 만들기 (중복 가능)<br>d) 10명 중 4명의 위원 선발", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-2] 다음 4가지 상황을 중복순열, 순열, 중복조합, 조합 중 어느 것으로 풀어야 하는지 각각 판단하고 그 이유를 설명하시오.<br><br>a) 9명 중 3명을 뽑아 1등, 2등, 3등 시상<br>b) 4종류의 꽃에서 중복을 허용하여 5송이 선택<br>c) 1,2,3,4,5,6 숫자로 3자리 번호 만들기 (중복 가능)<br>d) 15명 중 6명의 대표 뽑기", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-3] 다음 4가지 상황을 중복순열, 순열, 중복조합, 조합 중 어느 것으로 풀어야 하는지 각각 판단하고 그 이유를 설명하시오.<br><br>a) 8명 중 2명을 뽑아 조장과 부조장 선정<br>b) 6종류의 음료에서 중복을 허용하여 4개 선택<br>c) A,B,C,D 알파벳으로 5자리 코드 생성 (중복 가능)<br>d) 20명 중 5명의 팀원 구성", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q4] 방정식 \\(x+y+z=6\\)과 부등식 \\(x+y+z \\leq 6\\)의 음이 아닌 정수해 개수를 각각 구하고, 두 문제의 풀이 방법 차이를 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-1] 방정식 \\(x+y+z=5\\)과 부등식 \\(x+y+z \\leq 5\\)의 음이 아닌 정수해 개수를 각각 구하고, 풀이 방법의 차이를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-2] 방정식 \\(x+y+z=8\\)과 부등식 \\(x+y+z \\leq 8\\)의 음이 아닌 정수해 개수를 각각 구하고, 풀이 방법의 차이를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-3] 방정식 \\(x+y+z=7\\)과 부등식 \\(x+y+z \\leq 7\\)의 음이 아닌 정수해 개수를 각각 구하고, 풀이 방법의 차이를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q5] 서로 다른 4개의 초콜릿을 3명에게 나누어 주는 경우의 수를 구하시오. (단, 하나도 못 받는 사람이 있을 수 있다)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-1] 서로 다른 3개의 공을 2명에게 나누어 주는 경우의 수를 구하시오. (단, 하나도 못 받는 사람이 있을 수 있다)", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-2] 서로 다른 5개의 사탕을 3명에게 나누어 주는 경우의 수를 구하시오. (단, 하나도 못 받는 사람이 있을 수 있다)", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-3] 서로 다른 6개의 책을 4명에게 나누어 주는 경우의 수를 구하시오. (단, 하나도 못 받는 사람이 있을 수 있다)", answer: "", hint: "", explanation: "" }
              ]
            }
          ]}
        ]
      },
      {
        id: 4,
        name: "Chapter 4. 이항정리",
        chapterInfo: [
          { partName: "Part1", description: "이항정리의 정리", range: "Q1~Q4" },
          { partName: "Part2", description: "이항정리의 성질", range: "Q1~Q10" }
        ],
        chapters: [
          { id: 1, name: "Part1. 이항정리의 정리", questions: [
            { question: "다음 문제에 대하여 설명하여라.<br>[Q1] 이항정리와 이항계수의 정의를 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-1] 이항정리의 일반항을 쓰고 그 의미를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-2] 이항계수 \\(_nC_r\\)이 이항정리에서 어떤 역할을 하는지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-3] \\((a+b)^n\\)을 전개했을 때 항의 개수와 각 항의 구조를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q2] \\((a+b)^5\\)에서 \\(a^2b^3\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-1] \\((a+b)^6\\)에서 \\(a^3b^3\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-2] \\((a+b)^4\\)에서 \\(ab^3\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-3] \\((x+y)^7\\)에서 \\(x^4y^3\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q3] \\(5x^2(1+2x)^4\\)에서 \\(x^4\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-1] \\(3x(1+x)^5\\)에서 \\(x^3\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-2] \\(2x^3(1+3x)^4\\)에서 \\(x^5\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-3] \\(4x^2(2+x)^3\\)에서 \\(x^4\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q4] \\((1+2x)^3(2-x^2)^3\\)에서 \\(x^5\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-1] \\((1+x)^4(1-x)^4\\)에서 \\(x^4\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-2] \\((1+x)^3(2+x)^3\\)에서 \\(x^3\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-3] \\((2+x)^4(1-x)^4\\)에서 \\(x^4\\)의 계수를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 2, name: "Part2. 이항정리의 성질", questions: [
            { question: "다음 문제에 대하여 설명하여라.<br>[Q1] \\((a+b)^n\\)의 전개식에서 항의 개수를 말하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-1] \\((a+b)^{10}\\)을 전개했을 때 항의 개수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-2] 이항정리로 전개한 식에서 항의 개수가 \\(n+1\\)개인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q1-3] \\((a+b)^n\\)과 \\((a+b+c)^n\\)의 항의 개수 차이를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q2] \\(_nC_0 + _nC_1 + _nC_2 + \\cdots + _nC_n\\)의 값을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-1] \\(_5C_0 + _5C_1 + _5C_2 + _5C_3 + _5C_4 + _5C_5\\)의 값을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-2] 이항계수의 합이 \\(2^n\\)이 되는 이유를 이항정리를 이용하여 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q2-3] \\((1+1)^n\\)을 전개하여 이항계수의 합을 구하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q3] \\(_nC_0 - _nC_1 + _nC_2 - _nC_3 + \\cdots + (-1)^n_nC_n\\)의 값을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-1] \\(_4C_0 - _4C_1 + _4C_2 - _4C_3 + _4C_4\\)의 값을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-2] 교대로 부호가 바뀌는 이항계수의 합이 0이 되는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q3-3] \\((1-1)^n\\)을 이용하여 교대 이항계수의 합을 구하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q4] \\((a+b)^n\\) 전개식에서 짝수 번째 항의 합과 홀수 번째 항의 합을 각각 어떻게 구하는지 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-1] \\((a+b)^6\\) 전개식에서 홀수 번째 항의 합을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-2] \\((a+b)^n\\)과 \\((a-b)^n\\)을 더하고 빼서 짝수/홀수 번째 항의 합을 구하는 원리를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q4-3] \\(a=b\\)일 때, \\((a+b)^n\\)에서 짝수 번째 항의 합과 홀수 번째 항의 합이 같은 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q5] \\((a+b)^n\\) 전개식과 \\((a-b)^n\\) 전개식의 차이점을 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-1] \\((x+y)^4\\)와 \\((x-y)^4\\)를 각각 전개하고 차이를 비교하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-2] \\((a-b)^n\\)에서 부호가 바뀌는 규칙을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q5-3] n이 짝수일 때와 홀수일 때 \\((a-b)^n\\)의 마지막 항 부호를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q6] 파스칼의 삼각형의 성질에 대하여 다음 빈칸을 채우시오.<br>① 각 행의 양 끝은 항상 _____이다.<br>② \\(n\\)번째 행의 왼쪽에서 두 번째 수와 오른쪽에서 두 번째 수는 모두 _____이다.<br>③ 각 단계의 수는 그 위 단계의 _____의 합과 같다.<br>④ 각 단계의 수 배열이 _____ 대칭이다.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-1] 파스칼의 삼각형에서 대칭 성질이 나타나는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-2] 파스칼의 삼각형에서 \\(_nC_r = _{n-1}C_{r-1} + _{n-1}C_r\\) 관계식을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q6-3] 파스칼의 삼각형의 각 행의 합이 어떤 규칙을 따르는지 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q7] \\(_nC_0 + 2 \\cdot _nC_1 + 2^2 \\cdot _nC_2 + \\cdots + 2^n \\cdot _nC_n = 3^6\\)일 때 \\(n\\)의 값을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-1] \\(_nC_0 + 3 \\cdot _nC_1 + 3^2 \\cdot _nC_2 + \\cdots + 3^n \\cdot _nC_n = 4^5\\)일 때 \\(n\\)을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-2] \\((1+x)^n\\)에 \\(x=k\\)를 대입하여 가중 이항계수의 합을 구하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q7-3] \\(_nC_0 + r \\cdot _nC_1 + r^2 \\cdot _nC_2 + \\cdots + r^n \\cdot _nC_n\\)을 간단히 나타내시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q8] \\(_5C_0 + _5C_1 + \\cdots + _5C_4\\)의 값을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-1] \\(_6C_0 + _6C_1 + \\cdots + _6C_5\\)의 값을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-2] \\(_nC_0 + _nC_1 + \\cdots + _nC_{n-1}\\)을 간단히 나타내시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q8-3] \\(_5C_0 + _5C_1 + \\cdots + _5C_4\\)와 \\(_5C_5\\)의 관계를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q9] \\(_3C_0 + _4C_1 + _5C_2 + _6C_3\\)의 값을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q9-1] \\(_4C_0 + _5C_1 + _6C_2 + _7C_3\\)의 값을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q9-2] \\(_2C_0 + _3C_1 + _4C_2\\)의 값을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q9-3] \\(_5C_0 + _6C_1 + _7C_2 + _8C_3\\)의 값을 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하여라.<br>[Q10] \\(_3C_3 + _4C_3 + _5C_3 + _6C_3\\)의 값을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-1] \\(_2C_2 + _3C_2 + _4C_2 + _5C_2\\)의 값을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-2] \\(_4C_4 + _5C_4 + _6C_4\\)의 값을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하여라.<br>[Q10-3] \\(_5C_5 + _6C_5 + _7C_5 + _8C_5\\)의 값을 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]}
        ]
      },
      {
        id: 5,
        name: "Chapter 5. 확률",
        chapterInfo: [
          { partName: "Part1", description: "확률의 정의", range: "Q1~Q5" },
          { partName: "Part2", description: "확률의 계산", range: "Q1~Q8" }
        ],
        chapters: [
          { id: 1, name: "Part1. 확률의 정의", questions: [
            { question: "다음 문제에 대하여 설명하시오.<br>[Q1] 주사위를 던져 나온 수가 짝수인 사건을 \\(A\\)라 했을 때 \\(A\\)를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 주사위를 던져 나온 수가 3 이하인 사건을 \\(B\\)라 했을 때 \\(B\\)를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 주사위를 던져 나온 수가 소수인 사건을 \\(C\\)라 했을 때 \\(C\\)를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 주사위를 던져 나온 수가 홀수인 사건을 \\(E\\)라 했을 때, \\(E\\)의 여사건 \\(E^c\\)를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 설명하시오.<br>[Q2] 표본공간(전사건), 근원사건이 무엇인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 동전 1개를 던지는 상황<br>ㄴ. 주사위 1개를 던지는 상황<br>ㄷ. 동전 2개를 던지는 상황</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 표본공간의 정의를 쓰고, 동전 2개를 던지는 시행에서 표본공간을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] 근원사건의 정의를 쓰고, 주사위 1개를 던지는 시행에서 근원사건을 모두 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] '이하', '이상' 같은 단어가 나오면 왜 여사건 사용을 고려해야 하는지 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 공사건을 설명하시오.<br>[Q3] 공사건이 무엇인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 주사위를 던져 7이 나오는 사건<br>ㄴ. 동전을 던져 앞면과 뒷면이 동시에 나오는 사건<br>ㄷ. 1부터 6까지 적힌 카드에서 0이 적힌 카드를 뽑는 사건</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 동전을 던져 숫자가 나오는 사건이 공사건인지 판단하고 그 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] 주사위를 던져 8이 나오는 사건이 공사건인지 판단하고 그 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 1부터 10까지 카드에서 15를 뽑는 사건이 공사건인지 판단하고 그 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q4] A를 포함한 4명을 줄 세울 때, A가 첫 번째로 설 확률을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] 주사위를 던져 2의 배수가 나오는 사건과 3의 배수가 나오는 사건이 배반사건인지 판단하고 그 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 주사위를 던져 짝수가 나오는 사건과 홀수가 나오는 사건이 배반사건인지 판단하고 그 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] 주사위를 던져 3 이하가 나오는 사건과 5 이상이 나오는 사건이 배반사건인지 판단하고 그 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q5] 확률에 대한 다음 물음에 답하시오.<br>① 확률값의 최솟값과 최댓값을 구하시오.<br>② 빈칸을 채우시오: P(____) = 1, P(____) = 0<br>③ 주사위에서 각 근원사건이 일어날 확률을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] 확률의 범위가 \\(0 \\leq P(A) \\leq 1\\)인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] 수학적 확률의 정의를 쓰고, 조건을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] 동전 1개를 던질 때 각 근원사건의 확률을 구하고, 그 합이 1인 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 2, name: "Part2. 확률의 계산", questions: [
            { question: "다음 중 하나를 골라 여사건을 설명하시오.<br>[Q1] 사건 \\(A\\)의 여사건이 무엇인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 주사위에서 짝수가 나오는 사건의 여사건<br>ㄴ. 동전에서 앞면이 나오는 사건의 여사건<br>ㄷ. 1~10 카드에서 소수를 뽑는 사건의 여사건</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 여사건의 정의를 쓰고, \\(P(A) + P(A^c) = 1\\)임을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 주사위를 던져 3의 배수가 나오는 사건의 여사건을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 여사건을 활용하면 유리한 경우를 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q2] 문제에 어떤 단어가 주어졌을 때 여사건 사용을 의심해야 하는지 적으시오. (2개 이상)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] '적어도 하나'라는 표현이 나왔을 때 여사건을 사용하는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] '~가 아닌'이라는 표현과 여사건의 관계를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 여사건을 사용하면 계산이 간단해지는 예를 하나 들어 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q3] 검은 공 4개, 흰 공 3개가 들어 있는 주머니에서 임의로 3개의 공을 동시에 꺼낼 때, 적어도 한 개가 검은 공일 확률을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 빨간 공 3개, 파란 공 4개에서 2개를 꺼낼 때, 적어도 1개가 빨간 공일 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] 흰 공 2개, 검은 공 3개에서 2개를 꺼낼 때, 검은 공만 2개 뽑을 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 남학생 4명, 여학생 3명에서 3명을 뽑을 때, 적어도 1명이 여학생일 확률을 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 배반사건을 설명하시오.<br>[Q4] 사건 \\(A\\)와 사건 \\(B\\)가 배반사건이란 무엇인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 주사위에서 짝수/홀수가 나오는 사건<br>ㄴ. 주사위에서 3 이하/4 이상이 나오는 사건<br>ㄷ. 동전 2개에서 앞면 2개/뒷면 2개가 나오는 사건</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] 배반사건의 정의를 쓰고, \\(A \\cap B = \\emptyset\\)의 의미를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 두 사건이 배반사건일 때 \\(P(A \\cup B) = P(A) + P(B)\\)가 성립하는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] 배반사건이 아닌 예를 들고, 그 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q5] 배반사건과 여사건의 차이점을 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[예시 상황]</b><br>주사위를 던질 때, 1이 나오는 사건을 \\(A\\), 2가 나오는 사건을 \\(B\\)라 하자.<br><br>① \\(A\\)와 \\(B\\)가 배반사건인지 판단하고 이유를 쓰시오.<br>② \\(A\\)와 \\(B\\)가 여사건인지 판단하고 이유를 쓰시오.<br>③ 위 결과를 바탕으로 배반사건과 여사건의 차이를 설명하시오.</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] 배반사건이면서 여사건인 경우가 있는지 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] 배반사건이지만 여사건이 아닌 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] \\(P(A) + P(B) = 1\\)이면 \\(A\\)와 \\(B\\)가 여사건인지 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q6] 주사위를 한 번 던지는 시행에서 나오는 눈의 수가 3의 약수인 사건을 \\(A\\)라 할 때, 다음 [보기] 중 \\(A\\)와 서로 배반인 사건을 모두 고르시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 나오는 눈의 수가 4의 약수인 사건<br>ㄴ. 나오는 눈의 수가 소수인 사건<br>ㄷ. 나오는 눈의 수가 짝수인 사건<br>ㄹ. 나오는 눈의 수가 홀수인 사건<br>ㅁ. 나오는 눈의 수가 3의 배수인 사건</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-1] 주사위에서 짝수가 나오는 사건과 배반인 사건을 모두 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-2] 주사위에서 5 이상이 나오는 사건과 배반인 사건의 예를 2가지 드시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-3] 주사위에서 3의 배수가 나오는 사건과 배반인 사건의 예를 2가지 드시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q7] 1부터 10까지 숫자가 적힌 카드 10장 중 한 장을 뽑을 때 다음 확률을 구하시오.<br>① 2의 배수 또는 5의 배수인 숫자를 뽑을 확률<br>② 3의 배수 또는 4의 배수인 숫자를 뽑을 확률", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-1] 1부터 12까지 카드에서 2의 배수 또는 3의 배수를 뽑을 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-2] 1부터 15까지 카드에서 3의 배수 또는 5의 배수를 뽑을 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-3] 1부터 20까지에서 4의 배수 또는 6의 배수를 뽑을 확률을 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q8] 사건이 3개일 때도 확률의 덧셈정리가 성립하는지 설명하시오.<br>① 성립한다면 세 사건 \\(A\\), \\(B\\), \\(C\\)에 대하여 \\(P(A \\cup B \\cup C)\\)를 구하시오.<br>② 세 사건이 각각 서로 배반사건일 때 \\(P(A \\cup B \\cup C)\\)를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-1] 1부터 20까지 카드에서 2의 배수, 3의 배수, 5의 배수 중 적어도 하나를 뽑을 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-2] 주사위에서 1, 2, 3 중 적어도 하나가 나올 확률을 합사건으로 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-3] 주사위에서 1 나오는 사건, 2 나오는 사건, 3 나오는 사건의 합사건 확률을 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]}
        ]
      },
      {
        id: 6,
        name: "Chapter 6. 조건부확률",
        chapterInfo: [
          { partName: "Part1", description: "조건부확률", range: "Q1~Q4" },
          { partName: "Part2", description: "곱셈정리", range: "Q1~Q5" },
          { partName: "Part3", description: "독립과 종속", range: "Q1~Q10" },
          { partName: "Part4", description: "독립시행의 확률", range: "Q1~Q5" }
        ],
        chapters: [
          { id: 1, name: "Part1. 조건부확률", questions: [
            { question: "다음 중 하나를 골라 조건부확률을 설명하시오.<br>[Q1] 조건부확률 \\(P(B|A)\\)는 어떤 의미이고 어떻게 계산하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 주사위를 던져 짝수가 나왔을 때, 그 수가 4 이상일 확률<br>ㄴ. 동전 2개를 던져 앞면이 1개 이상 나왔을 때, 2개 모두 앞면일 확률<br>ㄷ. 카드 1~10에서 뽑은 수가 5 이상일 때, 그 수가 짝수일 확률</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 조건부확률의 정의를 쓰고, \\(P(B|A) = \\frac{P(A \\cap B)}{P(A)}\\) 공식을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 조건부확률에서 '조건'이 의미하는 바를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] \\(P(A|B)\\)와 \\(P(B|A)\\)가 다른 이유를 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q2] 조건부확률 \\(P(B|A)\\)와 일반 확률 \\(P(B)\\)는 어떤 점이 다른지 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 조건부확률에서 표본공간이 어떻게 변하는지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] \\(P(B|A)\\)와 \\(P(B)\\)가 같아지는 조건을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 일반 확률을 조건부확률로 나타내면 어떻게 되는지 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q3] 어느 주말에 캠핑장을 찾은 전체 이용객 40명 중 남자는 24명, 남자 어른은 16명이다. 남자 이용객 중에서 임의로 한 명을 뽑을 때, 뽑힌 이용객이 어린이일 확률을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 어느 동아리 회원 50명 중 남학생은 30명, 남학생 중 1학년은 12명이다. 남학생 중 임의로 한 명을 뽑을 때, 1학년일 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] 학급 학생 36명 중 안경을 쓴 학생은 18명, 안경을 쓴 여학생은 10명이다. 안경을 쓴 학생 중 임의로 한 명을 뽑을 때, 남학생일 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 버스 승객 60명 중 학생은 24명, 학생 중 여학생은 16명이다. 학생 중 임의로 한 명을 뽑을 때, 남학생일 확률을 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q4] 조건부확률의 성질에 대한 다음 빈칸을 채우시오.<br>① \\(P(B^c|A) = 1 - \\)____<br>② 두 사건 \\(A\\)와 \\(B\\)가 서로 배반사건이면 \\(P(B|A) =\\) ____ \\(=\\) ____", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] \\(P(B|A) + P(B^c|A) = 1\\)인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 두 사건이 배반일 때 \\(P(B|A) = 0\\)인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] \\(P(A|A) = 1\\)인 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 2, name: "Part2. 곱셈정리", questions: [
            { question: "다음 문제에 대하여 설명하시오.<br>[Q1] 확률의 곱셈정리에 대한 다음 빈칸을 채우시오.<br>두 사건 \\(A\\)와 \\(B\\)에 대하여 \\(P(A) \\neq 0\\), \\(P(B) \\neq 0\\)일 때,<br>① \\(P(A \\cap B) = P(A) \\times\\) ____<br>② \\(P(A \\cap B) = P(B) \\times\\) ____", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 곱셈정리 \\(P(A \\cap B) = P(A) \\cdot P(B|A)\\)를 조건부확률 정의로부터 유도하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 곱셈정리를 이용하여 조건부확률 공식을 유도하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] \\(P(A \\cap B) = P(A) \\cdot P(B|A) = P(B) \\cdot P(A|B)\\)가 성립하는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q2] 다음은 어느 학교 2학년 전체 학생 120명을 대상으로 MBTI를 조사하여 만든 표이다. 학생 중에서 임의로 뽑은 1명이 여학생일 때, 그 학생이 F형일 확률을 구하시오.<br><table style='margin-top:10px; border-collapse:collapse; width:100%; text-align:center; color:#fff;'><tr style='background:#333;'><td style='border:1px solid #555; padding:8px;'></td><td style='border:1px solid #555; padding:8px;'>T형</td><td style='border:1px solid #555; padding:8px;'>F형</td><td style='border:1px solid #555; padding:8px;'>합계</td></tr><tr><td style='border:1px solid #555; padding:8px;'>남학생 수</td><td style='border:1px solid #555; padding:8px;'>10</td><td style='border:1px solid #555; padding:8px;'>20</td><td style='border:1px solid #555; padding:8px;'>30</td></tr><tr><td style='border:1px solid #555; padding:8px;'>여학생 수</td><td style='border:1px solid #555; padding:8px;'>40</td><td style='border:1px solid #555; padding:8px;'>50</td><td style='border:1px solid #555; padding:8px;'>90</td></tr><tr style='background:#333;'><td style='border:1px solid #555; padding:8px;'>합계</td><td style='border:1px solid #555; padding:8px;'>50</td><td style='border:1px solid #555; padding:8px;'>70</td><td style='border:1px solid #555; padding:8px;'>120</td></tr></table>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 위 표에서 임의로 뽑은 1명이 F형일 때, 남학생일 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] 위 표에서 임의로 뽑은 1명이 T형일 때, 여학생일 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 위 표에서 남학생일 사건과 F형일 사건이 독립인지 판단하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q3] 어느 학교의 전체 학생은 200명이고, 각 학생은 체험학습 A, B 중 하나를 선택하였다. 체험학습 A를 선택한 학생은 남학생 60명과 여학생 40명이다. 임의로 뽑은 1명이 체험학습 B를 선택한 학생일 때, 이 학생이 남학생일 확률이 \\(\\frac{2}{5}\\)이다. 이 학교의 여학생 수를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 전체 학생 150명 중 동아리 A에 남학생 40명, 여학생 30명이 있다. 동아리 B 학생 중 뽑았을 때 여학생일 확률이 \\(\\frac{1}{2}\\)이면 전체 남학생 수를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] 조건부확률을 이용하여 미지수를 포함한 문제를 푸는 방법을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 표를 이용하여 조건부확률 문제를 푸는 전략을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q4] 주머니에 흰 공 2개, 검은 공 4개가 있다. 갑이 공을 뽑은 후 을이 공을 뽑을 때, 갑이 흰 공을 뽑았다는 전제하에 을이 검은 공을 뽑을 확률을 구하시오. (단, 뽑은 공은 다시 넣지 않는다.)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] 빨간 공 3개, 파란 공 2개에서 A가 먼저 뽑고 B가 뽑을 때, A가 빨간 공을 뽑은 조건에서 B도 빨간 공을 뽑을 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 비복원추출에서 조건부확률이 사용되는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] 복원추출과 비복원추출에서 확률 계산의 차이를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q5] 주머니에 흰 공 3개와 검은 공 4개가 들어있다. 임의로 1개의 공을 꺼내어 확인한 후 다시 넣지 않는다. 이 시행을 두 번 반복하여 두 번째 꺼낸 공이 흰 공이었을 때, 첫 번째 꺼낸 공도 흰 공이었을 확률을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] 위 문제에서 두 번째가 검은 공일 때, 첫 번째도 검은 공일 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] 결과를 알고 원인을 추론하는 조건부확률 문제의 풀이 전략을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] 베이즈 정리의 기본 개념을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 3, name: "Part3. 독립과 종속", questions: [
            { question: "다음 중 하나를 골라 독립과 종속을 설명하시오.<br>[Q1] 두 사건 \\(A\\)와 \\(B\\)가 독립이라는 것은 무엇을 의미하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 동전을 두 번 던질 때, 첫 번째 앞면 / 두 번째 앞면<br>ㄴ. 주사위를 두 번 던질 때, 첫 번째 짝수 / 두 번째 3의 배수<br>ㄷ. 서로 다른 주머니에서 각각 공을 뽑는 경우</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 독립의 정의 \\(P(A \\cap B) = P(A) \\cdot P(B)\\)를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 독립일 때 \\(P(B|A) = P(B)\\)가 성립하는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 독립과 배반의 차이를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 종속을 설명하시오.<br>[Q2] 두 사건이 종속인 예를 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 한 주머니에서 공을 비복원추출하는 경우<br>ㄴ. 제비뽑기에서 먼저 뽑은 사람이 당첨된 후 다음 사람이 뽑는 경우<br>ㄷ. 카드를 한 장 뽑아 확인 후 다시 넣지 않고 또 뽑는 경우</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 종속일 때 \\(P(B|A) \\neq P(B)\\)인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] 비복원추출이 종속인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 복원추출이 독립인 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q3] 두 사건 \\(A\\), \\(B\\)가 독립일 때, 다음 중 독립인 것을 모두 고르시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. \\(A\\)와 \\(B^c\\)<br>ㄴ. \\(A^c\\)와 \\(B\\)<br>ㄷ. \\(A^c\\)와 \\(B^c\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] \\(A\\)와 \\(B\\)가 독립이면 \\(A\\)와 \\(B^c\\)도 독립임을 증명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] \\(A\\)와 \\(B\\)가 독립이면 \\(A^c\\)와 \\(B^c\\)도 독립임을 증명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 독립의 성질을 이용하여 문제를 푸는 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q4] 검은 공 3개, 흰 공 4개가 들어있을 때 검은 공을 먼저 뽑고 흰 공을 뽑을 확률을 구하시오. (단, 꺼낸 공은 다시 넣지 않는다.)", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] 빨간 공 2개, 파란 공 3개에서 빨간 공, 파란 공 순서로 뽑을 확률을 구하시오. (비복원)", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 위 문제를 복원추출로 바꾸면 확률이 어떻게 달라지는지 비교하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] 곱셈정리를 이용하여 연속 사건의 확률을 구하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q5] 독립사건과 배반사건은 어떤 점에서 다른지 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] 독립이면서 배반인 경우가 있는지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] 배반사건이면 반드시 종속인지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] 독립과 배반을 혼동하기 쉬운 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q6] 두 사건 \\(A\\), \\(B\\)가 독립일 필요충분조건을 모두 쓰시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-1] \\(P(A \\cap B) = P(A) \\cdot P(B)\\)가 독립의 정의인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-2] \\(P(B|A) = P(B)\\)가 독립의 필요충분조건임을 증명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-3] \\(P(A|B) = P(A)\\)가 독립의 필요충분조건임을 증명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 복원추출과 비복원추출의 차이를 설명하시오.<br>[Q7] 복원추출과 비복원추출은 어떤 차이가 있는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 주머니에서 공을 뽑고 다시 넣은 후 또 뽑는 경우<br>ㄴ. 주머니에서 공을 뽑고 넣지 않고 또 뽑는 경우<br>ㄷ. 카드를 뽑아 확인 후 다시 섞어서 또 뽑는 경우</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-1] 복원추출에서 각 시행이 독립인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-2] 비복원추출에서 각 시행이 종속인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-3] 복원추출과 비복원추출의 확률 계산 방법 차이를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q8] 한 개의 주사위를 던져 짝수의 눈이 나오는 사건을 \\(A\\), 4의 약수의 눈이 나오는 사건을 \\(B\\), 3의 배수의 눈이 나오는 사건을 \\(C\\)라 할 때, [보기]에서 옳은 것을 모두 고르시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 두 사건 \\(A\\), \\(B\\)는 서로 독립이다.<br>ㄴ. 두 사건 \\(B\\), \\(C\\)는 서로 종속이다.<br>ㄷ. 두 사건 \\(C\\), \\(A\\)는 서로 독립이다.</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-1] 위 문제에서 \\(A = \\{2, 4, 6\\}\\), \\(B = \\{1, 2, 4\\}\\), \\(C = \\{3, 6\\}\\)임을 확인하고 각 보기를 판단하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-2] 두 사건이 독립인지 확인하는 방법 3가지를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-3] \\(P(A \\cap B) = P(A) \\cdot P(B)\\)를 계산하여 \\(A\\), \\(B\\)의 독립 여부를 판단하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q9] 남학생 10명과 여학생 20명으로 이루어진 학급에서 헌혈을 한 남학생은 6명, 여학생은 12명이다. 임의로 한 명을 뽑을 때, 여학생인 사건을 \\(A\\), 헌혈을 한 학생인 사건을 \\(B\\)라 하자. 두 사건 \\(A\\)와 \\(B\\)가 독립인지 종속인지 판단하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[힌트]</b> 독립 확인 방법 3가지 중 하나를 사용하시오.<br>① \\(P(A \\cap B) = P(A) \\cdot P(B)\\)<br>② \\(P(B|A) = P(B)\\)<br>③ \\(P(A|B) = P(A)\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-1] 위 문제를 \\(P(A \\cap B) = P(A) \\cdot P(B)\\)로 확인하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-2] 위 문제를 \\(P(B|A) = P(B)\\)로 확인하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-3] 위 문제를 \\(P(A|B) = P(A)\\)로 확인하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q10] 두 사건 \\(A\\)와 \\(B\\)가 서로 독립이고 \\(P(A) = \\frac{1}{4}\\), \\(P(B) = \\frac{1}{5}\\)일 때, \\(P(A \\cup B)\\)를 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q10-1] 독립일 때 \\(P(A \\cup B) = P(A) + P(B) - P(A)P(B)\\)임을 유도하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q10-2] \\(P(A) = \\frac{1}{3}\\), \\(P(B) = \\frac{1}{2}\\)이고 독립일 때 \\(P(A \\cup B)\\)를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q10-3] 독립일 때 \\(P(A^c \\cap B^c)\\)를 \\(P(A)\\), \\(P(B)\\)로 나타내시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 4, name: "Part4. 독립시행의 확률", questions: [
            { question: "다음 문제에 대하여 설명하시오.<br>[Q1] 독립시행의 확률 공식을 쓰고 각 부분이 의미하는 바를 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'>\\(P = {}_nC_r \\cdot p^r \\cdot (1-p)^{n-r}\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 독립시행에서 \\({}_nC_r\\)이 필요한 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 독립시행의 확률과 이항분포의 관계를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 독립시행에서 '독립'이 의미하는 바를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q2] 「~때」가 나오면 무조건 조건부확률이라고 생각해야 하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[예시]</b><br>ㄱ. 주사위를 던져 짝수가 나왔을 때, 4 이상일 확률 (조건부확률)<br>ㄴ. 동전을 3번 던질 때, 앞면이 2번 나올 확률 (독립시행)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 조건부확률과 독립시행의 확률을 구별하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] '~할 때'가 조건을 나타내는 경우와 시행 횟수를 나타내는 경우를 구별하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 문제에서 조건부확률인지 독립시행인지 판단하는 기준을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q3] 매스타트 야구팀은 비가 내릴 때 경기에서 이길 확률이 0.6이고, 비가 내리지 않을 때 이길 확률은 0.4이다. 경기가 예정된 날에 비가 내릴 확률이 0.5일 때, 그 날 경기에서 매스타트 야구팀이 이길 확률을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 위 문제를 전확률 공식으로 풀이하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] A공장 생산품 불량률 0.1, B공장 불량률 0.2이고, A공장 제품일 확률이 0.7일 때 불량품일 확률을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 전확률 공식 \\(P(B) = P(A)P(B|A) + P(A^c)P(B|A^c)\\)를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 독립시행을 설명하시오.<br>[Q4] 독립시행이란 무엇인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 동전을 여러 번 던지는 시행<br>ㄴ. 주사위를 여러 번 던지는 시행<br>ㄷ. 복원추출로 공을 여러 번 뽑는 시행</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] 독립시행의 조건을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 독립시행과 종속시행의 차이를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] 독립시행에서 각 시행의 확률이 동일한 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q5] 수직선 위의 원점에 점 A가 있다. 한 개의 주사위를 던져서 6의 약수의 눈이 나오면 점 A를 +1만큼, 그 이외의 눈이 나오면 점 A를 -1만큼 움직인다. 주사위를 4번 던질 때, 점 A가 원점에 있을 확률을 구하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] 위 문제에서 6의 약수는 1, 2, 3, 6이므로 +1로 이동할 확률이 \\(\\frac{4}{6} = \\frac{2}{3}\\)임을 확인하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] 4번 던져서 원점에 있으려면 +1이 2번, -1이 2번 나와야 함을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] 주사위를 5번 던질 때, 점 A가 +1의 위치에 있을 확률을 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]}
        ]
      },
      {
        id: 7,
        name: "Chapter 7. 이산확률변수와 이항분포",
        chapterInfo: [
          { partName: "Part1", description: "확률변수", range: "Q1~Q5" },
          { partName: "Part2", description: "이산확률변수", range: "Q1~Q6" },
          { partName: "Part3", description: "확률분포", range: "Q1~Q10" }
        ],
        chapters: [
          { id: 1, name: "Part1. 확률변수", questions: [
            { question: "다음 중 하나를 골라 자료와 변수의 차이를 설명하시오.<br>[Q1] 통계에서 「자료」와 「변수」는 어떻게 다른지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 학생들의 키 측정값 vs 키라는 항목<br>ㄴ. 주사위를 던져 나온 눈의 수 vs 눈의 수라는 항목<br>ㄷ. 시험 점수 85, 90, 75 vs 시험 점수라는 항목</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 변수의 정의를 쓰고, 변수가 가질 수 있는 값의 예를 드시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 자료의 정의를 쓰고, 자료 수집 방법의 예를 드시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 변수와 자료의 관계를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 확률변수를 설명하시오.<br>[Q2] 확률변수는 왜 함수처럼 생각할 수 있는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 동전 2개를 던질 때 앞면의 개수 X (HH→2, HT→1, TH→1, TT→0)<br>ㄴ. 주사위를 던질 때 나오는 눈의 수 X (각 결과→숫자)<br>ㄷ. 복권 당첨 금액 X (당첨→금액, 꽝→0)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 확률변수의 정의를 쓰고, 표본공간과의 관계를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] 확률변수를 대문자 \\(X\\)로 나타내는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 확률변수의 값과 그 확률의 관계를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q3] 확률변수의 각 값에 대응하는 확률은 몇 개인지 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 확률변수 \\(X\\)가 특정 값을 가질 확률 \\(P(X=x)\\)의 의미를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] 확률변수의 모든 값에 대한 확률의 합이 1인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 하나의 확률변수 값에 여러 확률이 대응될 수 없는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q4] 확률변수의 성질은 어떤 조건을 만족해야 하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[조건]</b><br>① 각 확률 \\(P(X=x_i)\\)는 ____ 이상이다.<br>② 모든 확률의 합 \\(\\sum P(X=x_i)\\)는 ____이다.</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] 확률이 음수가 될 수 없는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 확률의 합이 1인 이유를 전사건의 관점에서 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] 확률변수의 성질을 만족하지 않는 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 확률변수의 종류를 설명하시오.<br>[Q5] 확률변수는 어떻게 두 종류로 나뉘는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 주사위 눈의 수(이산) vs 사람의 키(연속)<br>ㄴ. 동전 앞면 개수(이산) vs 버스 대기 시간(연속)<br>ㄷ. 불량품 개수(이산) vs 전구의 수명(연속)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] 이산확률변수의 정의를 쓰고 예를 3가지 드시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] 연속확률변수의 정의를 쓰고 예를 3가지 드시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] 이산과 연속을 구분하는 기준을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 2, name: "Part2. 이산확률변수", questions: [
            { question: "다음 중 하나를 골라 이산확률변수를 설명하시오.<br>[Q1] 이산확률변수는 어떤 값들을 가질 수 있는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 동전 3개를 던질 때 앞면의 개수: 0, 1, 2, 3<br>ㄴ. 주사위를 던질 때 나오는 눈의 수: 1, 2, 3, 4, 5, 6<br>ㄷ. 복권 10장 중 당첨 개수: 0, 1, 2, ..., 10</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 이산확률변수의 값이 '셀 수 있다'는 것의 의미를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 이산확률변수의 값이 유한개 또는 무한개일 수 있음을 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 이산확률변수가 정수값만 갖는 것은 아님을 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 「셀 수 있다」의 의미를 설명하시오.<br>[Q2] 「셀 수 있다」는 것은 어떤 상황을 뜻하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 가방 안의 공의 개수를 하나씩 세는 경우<br>ㄴ. 시험에서 맞힌 문제의 개수를 세는 경우<br>ㄷ. 하루에 받는 전화의 횟수를 세는 경우</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 셀 수 없는 경우의 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] 자연수와 일대일 대응이 가능하면 셀 수 있음을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 실수 구간의 값이 셀 수 없는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 이산확률변수의 예를 설명하시오.<br>[Q3] 이산확률변수의 예를 들고 가능한 값을 나열하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 동전 2개를 던질 때 앞면의 개수 \\(X\\)<br>ㄴ. 제품 5개 중 불량품의 개수 \\(X\\)<br>ㄷ. 주사위 2개의 눈의 합 \\(X\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 동전 3개를 던질 때 앞면의 개수 \\(X\\)의 가능한 값을 모두 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] 주사위 1개를 던질 때 3의 배수가 나오는 횟수 \\(X\\)의 가능한 값을 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 카드 1~5에서 2장을 뽑을 때 짝수 카드의 개수 \\(X\\)의 가능한 값을 쓰시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 확률분포표를 설명하시오.<br>[Q4] 이산확률변수는 어떻게 표로 정리할 수 있는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 동전 2개: \\(X\\)=앞면 개수, \\(P(X=0)=\\frac{1}{4}\\), \\(P(X=1)=\\frac{1}{2}\\), \\(P(X=2)=\\frac{1}{4}\\)<br>ㄴ. 주사위 1개: \\(X\\)=눈의 수, 각 확률 \\(\\frac{1}{6}\\)<br>ㄷ. 복권 3장(당첨확률 0.1): \\(X\\)=당첨 개수</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] 확률분포표의 형식을 설명하고 예를 그리시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 확률분포표에서 확률의 합이 1임을 확인하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] 확률분포표를 이용하여 \\(P(X \\geq 1)\\)을 구하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q5] 확률분포표는 어떤 정보를 담고 있는지 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] 확률분포표에서 확률변수의 값을 읽는 방법을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] 확률분포표에서 각 확률값의 의미를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] 확률분포표를 그래프로 나타내는 방법을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 확률질량함수를 설명하시오.<br>[Q6] 확률질량함수는 어떤 함수이고 어떤 조건을 만족해야 하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. \\(P(X=k) = \\frac{1}{6}\\) (\\(k=1,2,...,6\\)) - 주사위<br>ㄴ. \\(P(X=k) = {}_2C_k \\cdot (\\frac{1}{2})^2\\) (\\(k=0,1,2\\)) - 동전 2개<br>ㄷ. \\(P(X=k) = \\frac{k}{10}\\) (\\(k=1,2,3,4\\)) - 확률의 합=1 확인 필요</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-1] 확률질량함수의 정의를 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-2] 확률질량함수가 만족해야 하는 두 가지 조건을 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-3] 확률질량함수의 값은 어떤 의미인지 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 3, name: "Part3. 확률분포", questions: [
            { question: "다음 중 하나를 골라 확률변수의 평균(기댓값)을 설명하시오.<br>[Q1] 확률변수의 평균은 어떻게 구하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 동전 2개를 던질 때 앞면 개수의 기댓값<br>ㄴ. 주사위를 던질 때 눈의 수의 기댓값<br>ㄷ. 복권 당첨금의 기댓값 (1등 100만원 확률 0.01, 꽝 확률 0.99)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 기댓값 공식 \\(E(X) = \\sum x_i P(X=x_i)\\)를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 기댓값이 '평균'이라 불리는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 주사위를 던질 때 눈의 수의 기댓값 3.5의 의미를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 분산을 설명하시오.<br>[Q2] 분산은 평균에서 얼마나 떨어졌는지를 어떻게 표현하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 항상 3이 나오는 경우 vs 1~6이 고르게 나오는 경우<br>ㄴ. 시험 점수가 모두 80점인 경우 vs 60~100점에 분포된 경우<br>ㄷ. 키가 비슷한 집단 vs 키 차이가 큰 집단</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 분산 공식 \\(V(X) = E(X^2) - \\{E(X)\\}^2\\)를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] 분산이 클수록 어떤 의미인지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 분산이 0이 되는 경우를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q3] 표준편차는 분산과 어떤 관계인지 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 표준편차 공식 \\(\\sigma(X) = \\sqrt{V(X)}\\)를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] 표준편차를 사용하는 이유(분산 대신)를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 표준편차의 단위가 원래 자료와 같은 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q4] \\(aX+b\\)의 평균은 어떻게 구하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[공식]</b> \\(E(aX+b) = aE(X) + b\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] \\(E(X) = 3\\)일 때, \\(E(2X+5)\\)를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] \\(E(aX+b) = aE(X) + b\\)가 성립하는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] \\(E(X+Y) = E(X) + E(Y)\\)가 성립하는지 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q5] \\(aX+b\\)의 분산, 표준편차는 어떻게 구하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[공식]</b><br>\\(V(aX+b) = a^2 V(X)\\)<br>\\(\\sigma(aX+b) = |a| \\sigma(X)\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] \\(V(X) = 4\\)일 때, \\(V(3X+2)\\)를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] 분산에서 상수 \\(b\\)가 사라지는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] \\(\\sigma(X) = 2\\)일 때, \\(\\sigma(-2X+3)\\)을 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 이항분포를 설명하시오.<br>[Q6] 이항분포는 어떤 조건에서 생기는 분포인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 동전을 10번 던질 때 앞면이 나오는 횟수<br>ㄴ. 불량률 0.1인 제품 5개 중 불량품의 개수<br>ㄷ. 자유투 성공률 0.8인 선수가 10번 던질 때 성공 횟수</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-1] 이항분포의 조건 4가지를 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-2] 이항분포를 기호 \\(B(n, p)\\)로 나타내는 방법을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-3] 이항분포가 아닌 경우의 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q7] 시행이 독립이라는 것은 무슨 뜻인지 설명하시오.", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-1] 복원추출이 독립시행인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-2] 비복원추출이 독립시행이 아닌 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-3] 각 시행의 성공 확률이 일정해야 하는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q8] 이항분포에서 확률을 계산할 때 필요한 요소를 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[공식]</b> \\(P(X=r) = {}_nC_r \\cdot p^r \\cdot (1-p)^{n-r}\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-1] 공식에서 \\({}_nC_r\\)이 필요한 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-2] 공식에서 \\(p^r\\)이 의미하는 바를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-3] 공식에서 \\((1-p)^{n-r}\\)이 의미하는 바를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q9] 이항분포의 평균과 분산은 어떻게 구하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[공식]</b><br>\\(X \\sim B(n, p)\\)일 때,<br>\\(E(X) = np\\), \\(V(X) = np(1-p)\\), \\(\\sigma(X) = \\sqrt{np(1-p)}\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-1] \\(X \\sim B(10, 0.3)\\)일 때, \\(E(X)\\)와 \\(V(X)\\)를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-2] 이항분포의 평균이 \\(np\\)인 직관적 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-3] \\(p = 0.5\\)일 때 분산이 최대가 되는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 이항분포의 성질을 설명하시오.<br>[Q10] 이항분포는 항상 대칭인지, 아니라면 언제 대칭인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. \\(B(10, 0.5)\\) - 대칭<br>ㄴ. \\(B(10, 0.2)\\) - 왼쪽으로 치우침<br>ㄷ. \\(B(10, 0.8)\\) - 오른쪽으로 치우침</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q10-1] \\(p = 0.5\\)일 때 이항분포가 대칭인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q10-2] \\(n\\)이 커지면 이항분포의 모양이 어떻게 변하는지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q10-3] 시행 횟수와 성공 확률이 분포 모양에 미치는 영향을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]}
        ]
      },
      {
        id: 8,
        name: "Chapter 8. 연속확률변수와 정규분포",
        chapterInfo: [
          { partName: "Part1", description: "연속확률변수와 확률밀도함수", range: "Q1~Q5" },
          { partName: "Part2", description: "정규분포", range: "Q1~Q6" },
          { partName: "Part3", description: "표준정규분포", range: "Q1~Q7" }
        ],
        chapters: [
          { id: 1, name: "Part1. 연속확률변수와 확률밀도함수", questions: [
            { question: "다음 중 하나를 골라 확률이 「넓이」로 표현되는 이유를 설명하시오.<br>[Q1] 연속확률변수에서 확률이 넓이로 표현되는 이유를 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 키가 170cm~175cm인 사람의 비율 → 구간의 넓이<br>ㄴ. 버스 대기시간이 5분~10분일 확률 → 구간의 넓이<br>ㄷ. 전구 수명이 1000~1100시간일 확률 → 구간의 넓이</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 연속확률변수에서 점이 아닌 구간으로 확률을 구하는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 이산확률변수와 연속확률변수의 확률 표현 방식 차이를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 확률밀도함수 아래 넓이가 확률인 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 \\(P(X=a)=0\\)인 이유를 설명하시오.<br>[Q2] 연속확률변수에서 \\(P(X=a)\\)는 왜 0인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 키가 정확히 170.000...cm인 사람의 확률<br>ㄴ. 버스가 정확히 5.000...분에 도착할 확률<br>ㄷ. 전구가 정확히 1000.000...시간에 고장날 확률</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 선의 넓이가 0인 것과 \\(P(X=a)=0\\)의 관계를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] \\(P(X=a)=0\\)이지만 \\(X=a\\)가 불가능한 것은 아닌 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] \\(P(a \\leq X \\leq b) = P(a < X < b)\\)가 성립하는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 확률밀도함수를 설명하시오.<br>[Q3] 확률밀도함수는 무엇을 나타내는 함수인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 균등분포: \\(f(x) = \\frac{1}{b-a}\\) (\\(a \\leq x \\leq b\\))<br>ㄴ. 정규분포: 종 모양의 곡선<br>ㄷ. 지수분포: 감소하는 곡선</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 확률밀도함수의 정의를 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] 확률밀도함수의 값 \\(f(a)\\)는 확률이 아닌 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 확률밀도함수가 1보다 클 수 있는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 함수 아래 넓이의 의미를 설명하시오.<br>[Q4] 확률밀도함수 아래의 넓이는 어떤 의미인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. \\(\\int_a^b f(x)dx = P(a \\leq X \\leq b)\\)<br>ㄴ. 구간 [170, 175]의 넓이 = 키가 170~175cm일 확률<br>ㄷ. 구간 [5, 10]의 넓이 = 대기시간이 5~10분일 확률</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] 적분을 이용하여 확률을 구하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 균등분포에서 \\(P(a \\leq X \\leq b)\\)를 넓이로 구하는 방법을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] 확률밀도함수의 그래프와 확률의 관계를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q5] 확률밀도함수의 전체 넓이는 얼마인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[조건]</b><br>① \\(f(x) \\geq 0\\) (모든 \\(x\\)에서)<br>② \\(\\int_{-\\infty}^{\\infty} f(x)dx = 1\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] 전체 넓이가 1인 이유를 전사건의 관점에서 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] 확률밀도함수가 만족해야 하는 두 가지 조건을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] \\(f(x) = kx\\) (\\(0 \\leq x \\leq 2\\))에서 상수 \\(k\\)를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 2, name: "Part2. 정규분포", questions: [
            { question: "다음 중 하나를 골라 정규분포의 모양을 설명하시오.<br>[Q1] 정규분포는 어떤 모양의 그래프인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 학생들의 키 분포 - 평균 근처에 많이 모임<br>ㄴ. 시험 점수 분포 - 종 모양<br>ㄷ. 제품의 무게 분포 - 좌우 대칭</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 정규분포 곡선의 특징을 3가지 이상 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 정규분포가 좌우 대칭인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 정규분포 곡선과 x축 사이의 넓이가 1인 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 평균이 그래프에 미치는 영향을 설명하시오.<br>[Q2] 평균을 중심으로 정규분포 그래프는 어떻게 생겼는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 평균=50인 분포 vs 평균=70인 분포 (위치 이동)<br>ㄴ. 평균=0인 분포 vs 평균=100인 분포 (중심 이동)<br>ㄷ. 남학생 평균 키 vs 여학생 평균 키 (분포 위치 차이)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 평균이 바뀌면 그래프가 어떻게 변하는지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] 평균이 그래프의 대칭축인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 평균에서 확률밀도함수의 값이 최대인 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표준편차가 그래프에 미치는 영향을 설명하시오.<br>[Q3] 표준편차를 바꾸면 정규분포 그래프에 어떤 변화가 생기는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. σ=1 vs σ=2 (넓이는 같지만 모양이 다름)<br>ㄴ. 표준편차 작음 → 뾰족하고 좁음 / 표준편차 큼 → 완만하고 넓음<br>ㄷ. 성적 편차 작은 반 vs 성적 편차 큰 반</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 표준편차가 커지면 그래프가 어떻게 변하는지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] 표준편차가 달라도 그래프 아래 넓이는 1인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 표준편차가 0에 가까워지면 그래프가 어떻게 되는지 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q4] 정규분포를 기호 \\(N(\\mu, \\sigma^2)\\)로 나타내는 방법을 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[예시]</b><br>ㄱ. \\(N(50, 10^2)\\): 평균 50, 표준편차 10<br>ㄴ. \\(N(170, 5^2)\\): 평균 170, 표준편차 5<br>ㄷ. \\(N(0, 1)\\): 평균 0, 표준편차 1 (표준정규분포)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] \\(X \\sim N(100, 25)\\)에서 평균과 표준편차를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 기호에서 분산이 아닌 표준편차가 중요한 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] 두 정규분포 \\(N(50, 9)\\)와 \\(N(60, 9)\\)의 차이를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 정규분포의 성질을 설명하시오.<br>[Q5] 정규분포에서 평균을 기준으로 확률이 어떻게 분포하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. \\(P(\\mu - \\sigma \\leq X \\leq \\mu + \\sigma) \\approx 0.68\\)<br>ㄴ. \\(P(\\mu - 2\\sigma \\leq X \\leq \\mu + 2\\sigma) \\approx 0.95\\)<br>ㄷ. \\(P(\\mu - 3\\sigma \\leq X \\leq \\mu + 3\\sigma) \\approx 0.997\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] 68-95-99.7 규칙을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] \\(N(100, 10^2)\\)에서 90~110 사이에 있을 확률을 추정하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] 평균에서 멀어질수록 확률이 작아지는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q6] 정규분포가 자연현상과 사회현상에서 자주 나타나는 이유를 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[예시]</b><br>ㄱ. 키, 몸무게 등 신체 측정값<br>ㄴ. 시험 점수, IQ 점수<br>ㄷ. 제품의 규격, 측정 오차</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-1] 중심극한정리와 정규분포의 관계를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-2] 정규분포가 아닌 분포의 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-3] 정규분포가 통계학에서 중요한 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 3, name: "Part3. 표준정규분포", questions: [
            { question: "다음 중 하나를 골라 표준정규분포를 따로 배우는 이유를 설명하시오.<br>[Q1] 표준정규분포는 왜 따로 배우는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 모든 정규분포를 하나의 표로 통일 가능<br>ㄴ. 계산과 비교가 편리함<br>ㄷ. 표준정규분포표 하나로 모든 확률 계산 가능</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 정규분포마다 확률표를 만들면 어떤 문제가 생기는지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 표준정규분포로 통일하면 어떤 장점이 있는지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 다양한 정규분포를 비교하려면 표준화가 필요한 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표준정규분포의 그래프를 설명하시오.<br>[Q2] 평균이 0이고 표준편차가 1인 그래프는 어떤 모습인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 중심이 0에 위치<br>ㄴ. \\(z = \\pm 1\\)에서 변곡점<br>ㄷ. \\(z = 0\\)에서 최댓값</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] \\(N(0, 1)\\)의 그래프를 그리고 특징을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] 표준정규분포에서 \\(P(Z \\leq 0) = 0.5\\)인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 표준정규분포에서 \\(P(-1 \\leq Z \\leq 1) \\approx 0.68\\)임을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q3] 모든 정규분포를 표준정규분포(Z분포)로 바꿀 수 있는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[공식]</b><br>\\(X \\sim N(\\mu, \\sigma^2)\\)이면<br>\\(Z = \\frac{X - \\mu}{\\sigma} \\sim N(0, 1)\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 표준화 공식 \\(Z = \\frac{X - \\mu}{\\sigma}\\)의 의미를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] \\(X \\sim N(50, 10^2)\\)일 때, \\(X=60\\)을 표준화하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 표준화하면 평균이 0, 표준편차가 1이 되는 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표준화가 필요한 이유를 설명하시오.<br>[Q4] 표준화는 왜 필요한 계산인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 서로 다른 시험 점수 비교 (수학 80점 vs 영어 75점)<br>ㄴ. 서로 다른 단위의 데이터 비교<br>ㄷ. 표준정규분포표를 사용하기 위해</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] 평균 70, 표준편차 10인 시험에서 80점의 상대적 위치를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 표준화 점수(z-score)의 의미를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] \\(z = 2\\)가 의미하는 바를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q5] 정규분포를 표준정규분포로 바꾸는 과정을 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[예시]</b><br>\\(X \\sim N(100, 20^2)\\)에서 \\(P(X \\leq 120)\\) 구하기<br>→ \\(Z = \\frac{120-100}{20} = 1\\)<br>→ \\(P(Z \\leq 1)\\)을 표에서 찾기</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] \\(X \\sim N(50, 5^2)\\)에서 \\(P(X \\leq 60)\\)을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] \\(X \\sim N(80, 10^2)\\)에서 \\(P(70 \\leq X \\leq 90)\\)을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] 표준정규분포표를 읽는 방법을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 이항분포와 정규분포의 관계를 설명하시오.<br>[Q6] 이항분포가 정규분포로 바뀌는 이유를 설명하시오. (라플라스 정리)<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 동전을 10번 vs 100번 vs 1000번 던질 때 분포 모양 변화<br>ㄴ. 시행 횟수가 많아지면 종 모양에 가까워짐<br>ㄷ. \\(n\\)이 충분히 크면 \\(B(n,p) \\approx N(np, np(1-p))\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-1] 이항분포의 정규근사 조건 \\(np \\geq 5\\), \\(n(1-p) \\geq 5\\)를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-2] \\(X \\sim B(100, 0.5)\\)를 정규분포로 근사할 때 평균과 분산을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-3] 이항분포를 정규분포로 근사하면 유리한 상황을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q7] 이항분포의 정규근사는 어떤 상황에서 유용한지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[예시]</b><br>ㄱ. 동전을 1000번 던질 때 앞면이 490~510번 나올 확률<br>ㄴ. 불량률 1%인 제품 500개 중 불량품이 10개 이하일 확률<br>ㄷ. \\({1000}C_{500}\\) 같은 큰 조합 계산을 피할 수 있음</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-1] 시행 횟수가 많으면 이항분포 계산이 어려운 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-2] 정규근사를 이용하여 \\(B(100, 0.5)\\)에서 \\(P(45 \\leq X \\leq 55)\\)를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-3] 연속성 수정(continuity correction)이 필요한 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]}
        ]
      },
      {
        id: 9,
        name: "Chapter 9. 모집단과 표본",
        chapterInfo: [
          { partName: "Part1", description: "모집단과 표본", range: "Q1~Q15" },
          { partName: "Part2", description: "모평균의 추정", range: "Q1~Q8" }
        ],
        chapters: [
          { id: 1, name: "Part1. 모집단과 표본", questions: [
            { question: "다음 중 하나를 골라 모집단과 표본집단의 관계를 설명하시오.<br>[Q1] 모집단과 표본집단은 어떤 관계인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 전교생(모집단) → 각 반에서 5명씩 추출(표본)<br>ㄴ. 전국 유권자(모집단) → 1000명 설문조사(표본)<br>ㄷ. 공장 전체 제품(모집단) → 100개 품질검사(표본)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 모집단이란 무엇인지 정의하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 표본이 모집단을 대표해야 하는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 모집단과 표본의 크기 관계를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 대표성 없는 표본의 문제점을 설명하시오.<br>[Q2] 대표성이 없는 표본을 뽑으면 어떤 문제가 생기는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 서울에서만 조사 → 전국 여론 예측 실패<br>ㄴ. 남학생만 조사 → 전체 학생 평균 키 추정 오류<br>ㄷ. 인터넷 사용자만 조사 → 노인층 의견 누락</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 편향된 표본(biased sample)이란 무엇인지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] 무작위 추출이 필요한 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 표본 선정 오류의 실제 사례를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표본 추출의 목적을 설명하시오.<br>[Q3] 표본을 추출하는 목적은 무엇인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 시간과 비용 절약 → 전수조사 대신 일부만 조사<br>ㄴ. 모집단 특성 추정 → 표본으로 전체 예측<br>ㄷ. 파괴검사 → 전부 검사하면 제품이 없어짐</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 전수조사가 불가능한 상황의 예를 드시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] 표본조사의 장점을 3가지 이상 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 표본을 통해 모집단을 추정하는 과정을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표본 크기의 장점을 설명하시오.<br>[Q4] 표본이 클수록 어떤 장점이 있는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 표본 10명 vs 100명 → 100명이 더 정확<br>ㄴ. 여론조사 500명 vs 1500명 → 오차범위 감소<br>ㄷ. 큰 표본 → 모집단 특성을 더 잘 반영</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] 표본 크기와 추정 정확도의 관계를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 표본이 클수록 표준오차가 줄어드는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] 적절한 표본 크기를 결정하는 요인을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 모집단 직접 조사의 어려움을 설명하시오.<br>[Q5] 모집단을 직접 조사하기 어려운 이유를 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 비용 문제 → 전국민 조사는 막대한 비용 필요<br>ㄴ. 시간 문제 → 1억 명 조사는 현실적으로 불가능<br>ㄷ. 접근성 문제 → 모든 대상에 접근 어려움</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] 전수조사와 표본조사의 비용 차이를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] 모집단이 무한할 때 어떻게 조사하는지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] 전수조사가 필요한 경우의 예를 드시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 모평균의 의미를 설명하시오.<br>[Q6] 모평균은 무엇을 나타내는 값인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 전교생 수학 평균 점수 = 모평균<br>ㄴ. 전국 성인 남성 평균 키 = 모평균<br>ㄷ. 공장 전체 제품의 평균 무게 = 모평균</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-1] 모평균을 기호로 나타내는 방법을 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-2] 모평균과 표본평균의 차이를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-3] 모평균을 알 수 없는 경우가 많은 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 모평균 추정에 필요한 것을 설명하시오.<br>[Q7] 표본평균으로 모평균을 추정하려면 무엇이 필요한지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 충분한 표본 크기 → n이 클수록 정확<br>ㄴ. 무작위 추출 → 편향 없는 표본<br>ㄷ. 모표준편차 또는 표본표준편차 정보</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-1] 표본 크기가 클수록 추정이 정확해지는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-2] 무작위 추출의 방법을 예를 들어 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-3] 점추정과 구간추정의 차이를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표본평균이 모평균과 다른 이유를 설명하시오.<br>[Q8] 표본평균이 모평균과 다를 수 있는 이유를 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 추출 변동 → 뽑힌 표본에 따라 평균이 달라짐<br>ㄴ. 우연한 편향 → 특정 값이 더 많이 뽑힐 수 있음<br>ㄷ. 표본 크기 한계 → 일부만 보고 전체 추정</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-1] 표본오차(sampling error)란 무엇인지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-2] 같은 모집단에서 다른 표본평균이 나오는 예를 드시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-3] 표본평균의 변동성을 줄이는 방법을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표본 크기와 표본평균의 관계를 설명하시오.<br>[Q9] 표본의 크기가 커지면 표본평균은 어떻게 변하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. n=10 → 표본평균 변동 큼 / n=100 → 변동 작음<br>ㄴ. 큰 수의 법칙 → n이 커지면 표본평균이 모평균에 수렴<br>ㄷ. 표본평균의 표준편차 = \\(\\frac{\\sigma}{\\sqrt{n}}\\) → n↑이면 표준편차↓</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-1] 큰 수의 법칙을 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-2] 표본 크기가 4배가 되면 표준오차는 몇 배가 되는지 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q9-3] 표본평균이 모평균에 가까워지는 원리를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표본평균이 확률변수인 이유를 설명하시오.<br>[Q10] 표본평균을 확률변수로 보는 이유를 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 표본을 뽑을 때마다 평균값이 달라짐<br>ㄴ. 어떤 값이 나올지 미리 알 수 없음<br>ㄷ. 표본평균도 확률분포를 가짐</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q10-1] 확률변수의 정의를 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q10-2] 표본평균 \\(\\bar{X}\\)가 가질 수 있는 값의 범위를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q10-3] 같은 모집단에서 여러 번 표본 추출 시 표본평균이 달라지는 예를 드시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표본을 다시 뽑을 때 평균이 달라지는 이유를 설명하시오.<br>[Q11] 표본을 다시 뽑으면 평균이 달라지는 이유를 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 무작위 추출 → 매번 다른 원소가 선택됨<br>ㄴ. 1반에서 5명 추출 → 뽑힐 때마다 다른 학생<br>ㄷ. 주사위 10번 → 매번 평균이 다름</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q11-1] 복원추출과 비복원추출의 차이를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q11-2] 표본평균의 분포(표집분포)를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q11-3] 표본평균의 기댓값이 모평균과 같은 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 단일 표본평균으로 추정할 때 주의점을 설명하시오.<br>[Q12] 단 하나의 표본평균 값으로 모평균을 추정할 때 주의할 점을 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 표본평균 ≠ 모평균 → 오차 존재<br>ㄴ. 신뢰구간 제시 필요 → 범위로 표현<br>ㄷ. 표본 크기 언급 → 신뢰성 판단 근거</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q12-1] 점추정의 한계를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q12-2] 구간추정이 점추정보다 유용한 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q12-3] 표본평균의 신뢰성을 높이는 방법을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표본 크기 증가에 따른 분포 변화를 설명하시오.<br>[Q13] 표본의 크기가 커질수록 표본평균의 분포는 어떻게 변하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. n=5 → 넓게 퍼진 분포 / n=50 → 좁게 모인 분포<br>ㄴ. 중심극한정리 → 정규분포에 가까워짐<br>ㄷ. 분산이 \\(\\frac{\\sigma^2}{n}\\)으로 줄어듦</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q13-1] 중심극한정리를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q13-2] 모집단이 정규분포가 아닐 때 표본평균의 분포를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q13-3] n이 충분히 크다는 것은 보통 얼마 이상인지 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q14] 표본평균 분포의 평균과 분산은 어떻게 정해지는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[공식]</b><br>모집단: 평균 \\(\\mu\\), 분산 \\(\\sigma^2\\)<br>표본평균 \\(\\bar{X}\\)의 분포:<br>• \\(E(\\bar{X}) = \\mu\\)<br>• \\(V(\\bar{X}) = \\frac{\\sigma^2}{n}\\)<br>• \\(\\bar{X} \\sim N(\\mu, \\frac{\\sigma^2}{n})\\) (n이 충분히 클 때)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q14-1] \\(E(\\bar{X}) = \\mu\\)가 의미하는 바를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q14-2] 표본평균의 분산이 \\(\\frac{\\sigma^2}{n}\\)인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q14-3] 모평균 50, 모분산 100인 모집단에서 크기 25인 표본의 표본평균 분포를 구하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 정규근사 조건을 설명하시오.<br>[Q15] 정규근사를 사용할 때 필요한 조건을 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 모집단이 정규분포 → n에 관계없이 정규분포<br>ㄴ. 모집단이 정규분포 아님 → n ≥ 30이면 근사 가능<br>ㄷ. 중심극한정리 적용 → 표본 크기가 충분히 클 때</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q15-1] 모집단이 정규분포일 때 표본평균의 분포를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q15-2] n=30이 기준이 되는 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q15-3] 중심극한정리가 성립하지 않는 경우의 예를 드시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]},
          { id: 2, name: "Part2. 모평균의 추정", questions: [
            { question: "다음 문제에 대하여 설명하시오.<br>[Q1] 특정 구간에 표본평균이 들어갈 확률은 어떻게 계산하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[예시]</b><br>모평균 \\(\\mu = 50\\), 모표준편차 \\(\\sigma = 10\\), 표본크기 \\(n = 25\\)일 때<br>\\(P(48 \\leq \\bar{X} \\leq 52)\\) 계산:<br>① 표준화: \\(Z = \\frac{\\bar{X} - 50}{10/\\sqrt{25}} = \\frac{\\bar{X} - 50}{2}\\)<br>② \\(P(-1 \\leq Z \\leq 1)\\)을 표에서 찾기</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-1] 표본평균의 표준화 공식을 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-2] 모평균 100, 모표준편차 20, n=16일 때 \\(P(95 \\leq \\bar{X} \\leq 105)\\)를 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q1-3] 표본평균의 확률 계산 과정을 순서대로 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표본 크기 변화가 확률 계산에 미치는 영향을 설명하시오.<br>[Q2] 표본크기가 변하면 확률 계산은 어떻게 달라지는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. n=25 → 표준오차 = \\(\\frac{\\sigma}{5}\\) / n=100 → 표준오차 = \\(\\frac{\\sigma}{10}\\)<br>ㄴ. n이 커지면 → 같은 구간에 들어갈 확률 증가<br>ㄷ. n=25에서 n=100 → 분포가 더 좁아짐</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-1] 표본 크기가 4배가 되면 확률 계산이 어떻게 달라지는지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-2] n=16과 n=64에서 같은 구간 확률을 비교하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q2-3] 표본 크기와 추정 정밀도의 관계를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 신뢰구간의 개념을 설명하시오.<br>[Q3] 모평균이 포함될 가능성이 있는 범위를 뜻하는 용어를 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 신뢰구간(confidence interval) = 모평균이 들어있을 것으로 믿는 구간<br>ㄴ. \"평균 키는 168~172cm 사이\" → 신뢰구간 [168, 172]<br>ㄷ. 점추정 + 오차범위 = 구간추정</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-1] 신뢰구간의 정의를 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-2] 신뢰구간과 점추정의 차이를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q3-3] 신뢰구간이 넓을 때와 좁을 때의 의미를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q4] 신뢰구간을 계산할 때 필요한 요소를 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[공식]</b><br>신뢰구간: \\(\\bar{x} - z_{\\alpha/2} \\cdot \\frac{\\sigma}{\\sqrt{n}} \\leq \\mu \\leq \\bar{x} + z_{\\alpha/2} \\cdot \\frac{\\sigma}{\\sqrt{n}}\\)<br><br>필요 요소:<br>① 표본평균 \\(\\bar{x}\\)<br>② 모표준편차 \\(\\sigma\\) (또는 표본표준편차)<br>③ 표본크기 \\(n\\)<br>④ 신뢰도에 따른 \\(z\\)값 (95% → 1.96)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-1] 95% 신뢰구간 공식을 쓰시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-2] 표본평균 50, 모표준편차 10, n=100일 때 95% 신뢰구간을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q4-3] 신뢰구간 공식에서 각 요소의 역할을 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 신뢰도의 의미를 설명하시오.<br>[Q5] 신뢰도가 95%라는 말은 어떤 의미인지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 100번 신뢰구간을 구하면 약 95번은 모평균을 포함<br>ㄴ. 이 구간에 모평균이 있을 확률이 95%라는 의미 아님<br>ㄷ. 추정 방법의 신뢰성이 95%</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-1] 신뢰도 95%와 99%의 차이를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-2] \"95% 확률로 모평균이 이 구간에 있다\"가 틀린 해석인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q5-3] 신뢰도를 높이면 어떤 변화가 생기는지 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 표본 크기와 신뢰구간의 관계를 설명하시오.<br>[Q6] 표본이 커지면 신뢰구간은 어떻게 달라지는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. n=25 → 오차범위 큼 / n=100 → 오차범위 작음<br>ㄴ. \\(\\frac{\\sigma}{\\sqrt{n}}\\) → n이 커지면 분모↑ → 오차↓<br>ㄷ. 신뢰구간 좁아짐 = 추정 정밀도 증가</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-1] 표본 크기가 4배가 되면 신뢰구간 폭은 어떻게 변하는지 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-2] 신뢰구간을 절반으로 줄이려면 표본 크기를 몇 배로 해야 하는지 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q6-3] 표본 크기와 비용, 정밀도의 관계를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 중 하나를 골라 신뢰구간과 신뢰도의 관계를 설명하시오.<br>[Q7] 신뢰구간을 넓히면 신뢰도는 어떻게 변하는지 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[보기]</b><br>ㄱ. 좁은 구간(±1) → 낮은 신뢰도 / 넓은 구간(±3) → 높은 신뢰도<br>ㄴ. 95% 신뢰구간 < 99% 신뢰구간 (폭 비교)<br>ㄷ. 정밀도↑ ↔ 신뢰도↓ 의 트레이드오프</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-1] 신뢰도 95%일 때 z=1.96, 99%일 때 z=2.58인 이유를 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-2] 신뢰도와 정밀도를 모두 높이려면 어떻게 해야 하는지 설명하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q7-3] 99% 신뢰구간이 95% 신뢰구간보다 넓은 이유를 설명하시오.", answer: "", hint: "", explanation: "" }
              ]
            },
            { question: "다음 문제에 대하여 설명하시오.<br>[Q8] 모평균의 95% 신뢰구간을 구하는 전체 과정을 설명하시오.<br><div style='margin-top:10px; padding:10px; border:1px solid #444; border-radius:8px; color:#fff;'><b>[예시]</b><br>표본평균 \\(\\bar{x} = 72\\), 모표준편차 \\(\\sigma = 10\\), \\(n = 100\\)<br>① 표준오차: \\(\\frac{10}{\\sqrt{100}} = 1\\)<br>② 오차범위: \\(1.96 \\times 1 = 1.96\\)<br>③ 신뢰구간: \\(72 - 1.96 \\leq \\mu \\leq 72 + 1.96\\)<br>④ 결과: \\(70.04 \\leq \\mu \\leq 73.96\\)</div>", answer: "", hint: "", explanation: "",
              similarQuestions: [
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-1] 표본평균 80, 모표준편차 15, n=225일 때 95% 신뢰구간을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-2] 표본평균 50, 모표준편차 8, n=64일 때 99% 신뢰구간을 구하시오.", answer: "", hint: "", explanation: "" },
                { question: "다음 문제에 대하여 설명하시오.<br>[Q8-3] 신뢰구간 [48, 52]이고 신뢰도 95%, n=100일 때 모표준편차를 추정하시오.", answer: "", hint: "", explanation: "" }
              ]
            }
          ]}
        ]
      }
    ];

    // 상태 관리
    const state = {
      userType: null, // 'student' or 'admin'
      studentName: '',
      phone: '',
      teacherName: '', // 학생의 담당 선생님
      adminName: '', // 관리자 이름
      isLoggedIn: false,
      uid: '',
      loading: false,
      selectedCategory: null,
      currentTheme: null,
      currentQuestion: 0,
      answers: {},
      allStudentData: {},
      showResults: false,
      lockTimers: {},
      currentTime: Date.now(),
      autoLogin: false,
      // 관리자 전용
      adminStudents: [], // 관리자가 담당하는 학생 목록
      selectedStudent: null, // 관리자가 선택한 학생
      showAdminRegister: false,
      studentStatusFilter: 'active', // 'active' (재원생) 또는 'withdrawn' (퇴원생)
      showStudentRecords: false, // 학생 학습 기록 보기 모드
      // 학습 기록 전용
      recordSelectedCategory: null, // 학습 기록에서 선택한 카테고리
      expandedAttempts: {}, // 확장된 시도 목록 { attemptId: true/false }
      // 구두테스트 재시험 관련
      isWrongAnswerTest: false, // 구두테스트 재시험 모드 여부
      wrongAnswerQuestions: [], // 구두테스트 재시험 문제 목록
      wrongAnswerAttemptId: null, // 어떤 시도의 구두테스트 재시험인지
      retestRound: null, // 재시험 회차 (1 또는 2)
      // Canvas 관련
      currentCanvas: null,
      penColor: '#000000',
      penSize: 3,
      canvasStrokes: [], // 획 기록: [{points: [{x, y}, ...], color, width}]
      isEraserMode: false, // 지우개 모드 여부
      // 퀴즈 진행 관련
      quizStartTime: null, // 퀴즈 시작 시간
      questionStartTime: null, // 현재 문제 시작 시간
      questionPausedElapsed: 0, // 일시정지된 경과 시간 (밀리초)
      questionTimes: {}, // 각 문제별 소요 시간 { questionIndex: timeInMs }
      timerInterval: null, // 타이머 인터벌
      teacherNotes: {}, // 선생님 메모 { themeId: { questionIndex: "메모 내용" } }
      quizCompleted: false // 퀴즈 완료 여부 (결과 저장 후 답변 변경 방지)
    };

    // ===== Canvas 드로잉 관련 함수 =====
    function initCanvas(canvasId) {
      const canvas = document.getElementById(canvasId);
      if (!canvas) return null;

      const ctx = canvas.getContext('2d');
      const rect = canvas.getBoundingClientRect();
      const dpr = window.devicePixelRatio || 1;
      canvas.width = rect.width * dpr;
      canvas.height = rect.height * dpr;
      ctx.scale(dpr, dpr);
      canvas.style.width = rect.width + 'px';
      canvas.style.height = rect.height + 'px';

      ctx.fillStyle = '#FFFFFF';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';
      ctx.strokeStyle = state.penColor;
      ctx.lineWidth = state.penSize;

      state.currentCanvas = canvas;
      setupCanvasEvents(canvasId);
      return canvas;
    }

    function setupCanvasEvents(canvasId) {
      const canvas = document.getElementById(canvasId);
      if (!canvas) return;

      const ctx = canvas.getContext('2d');
      let isDrawing = false;
      let currentStroke = null; // 현재 그리고 있는 획

      function getCoordinates(e) {
        const rect = canvas.getBoundingClientRect();
        if (e.touches && e.touches[0]) {
          return {x: e.touches[0].clientX - rect.left, y: e.touches[0].clientY - rect.top};
        }
        return {x: e.clientX - rect.left, y: e.clientY - rect.top};
      }

      function startDrawing(e) {
        e.preventDefault();
        const coords = getCoordinates(e);
        isDrawing = true;

        if (state.isEraserMode) {
          // 지우개 모드: 드래그 시작 - 첫 위치에서도 지우기
          const strokeIndex = findStrokeAtPoint(coords.x, coords.y);
          if (strokeIndex !== -1) {
            state.canvasStrokes.splice(strokeIndex, 1);
            redrawCanvas();
          }
        } else {
          // 그리기 모드: 새 획 시작
          currentStroke = {
            points: [{x: coords.x, y: coords.y}],
            color: state.penColor,
            width: state.penSize
          };
        }
      }

      function draw(e) {
        if (!isDrawing) return;
        e.preventDefault();
        const coords = getCoordinates(e);

        if (state.isEraserMode) {
          // 지우개 모드: 지나가는 획을 계속 지우기
          const strokeIndex = findStrokeAtPoint(coords.x, coords.y);
          if (strokeIndex !== -1) {
            state.canvasStrokes.splice(strokeIndex, 1);
            redrawCanvas();
          }
        } else {
          // 그리기 모드: 현재 획에 점 추가
          currentStroke.points.push({x: coords.x, y: coords.y});

          // 즉시 화면에 그리기 (미리보기)
          const lastPoint = currentStroke.points[currentStroke.points.length - 2];
          ctx.strokeStyle = currentStroke.color;
          ctx.lineWidth = currentStroke.width;
          ctx.beginPath();
          ctx.moveTo(lastPoint.x, lastPoint.y);
          ctx.lineTo(coords.x, coords.y);
          ctx.stroke();
        }
      }

      function stopDrawing(e) {
        if (isDrawing) {
          e.preventDefault();
          isDrawing = false;

          // 그리기 모드에서만 완성된 획 저장
          if (!state.isEraserMode && currentStroke && currentStroke.points.length > 0) {
            state.canvasStrokes.push(currentStroke);
          }
          currentStroke = null;
        }
      }

      canvas.addEventListener('touchstart', startDrawing, {passive: false});
      canvas.addEventListener('touchmove', draw, {passive: false});
      canvas.addEventListener('touchend', stopDrawing, {passive: false});
      canvas.addEventListener('touchcancel', stopDrawing, {passive: false});
      canvas.addEventListener('mousedown', startDrawing);
      canvas.addEventListener('mousemove', draw);
      canvas.addEventListener('mouseup', stopDrawing);
      canvas.addEventListener('mouseleave', stopDrawing);
    }

    // 특정 좌표에 있는 획 찾기
    function findStrokeAtPoint(x, y) {
      const threshold = 10; // 터치 감지 반경

      // 가장 최근 획부터 역순으로 검색 (위에 있는 획 우선)
      for (let i = state.canvasStrokes.length - 1; i >= 0; i--) {
        const stroke = state.canvasStrokes[i];

        // 획의 모든 점과 거리 계산
        for (let j = 0; j < stroke.points.length; j++) {
          const point = stroke.points[j];
          const distance = Math.sqrt(
            Math.pow(point.x - x, 2) + Math.pow(point.y - y, 2)
          );

          if (distance <= threshold + stroke.width / 2) {
            return i; // 획 인덱스 반환
          }
        }
      }

      return -1; // 획을 찾지 못함
    }

    // 캔버스 전체 다시 그리기
    function redrawCanvas() {
      const canvas = state.currentCanvas;
      if (!canvas) return;

      const ctx = canvas.getContext('2d');

      // 캔버스 초기화
      ctx.fillStyle = '#FFFFFF';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // 모든 획 다시 그리기
      state.canvasStrokes.forEach(stroke => {
        if (stroke.points.length < 2) return;

        ctx.strokeStyle = stroke.color;
        ctx.lineWidth = stroke.width;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';

        ctx.beginPath();
        ctx.moveTo(stroke.points[0].x, stroke.points[0].y);

        for (let i = 1; i < stroke.points.length; i++) {
          ctx.lineTo(stroke.points[i].x, stroke.points[i].y);
        }

        ctx.stroke();
      });
    }

    function clearCanvas() {
      const canvas = state.currentCanvas;
      if (!canvas) return;
      const ctx = canvas.getContext('2d');
      ctx.fillStyle = '#FFFFFF';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      // 모든 획 기록 삭제
      state.canvasStrokes = [];
    }

    // 펜 모드로 전환
    function setPenMode() {
      state.isEraserMode = false;
      render();
    }

    // 지우개 모드 토글
    function toggleEraser() {
      state.isEraserMode = !state.isEraserMode;
      render();
    }

    function changePenColor(color) {
      state.penColor = color;
      render();
    }

    function changePenSize(size) {
      state.penSize = size;
      render();
    }

    // ===== 타이머 관련 함수 =====
    function startQuestionTimer() {
      // 일시정지된 시간을 고려하여 시작 시간 설정
      state.questionStartTime = Date.now() - state.questionPausedElapsed;

      // 기존 타이머가 있으면 제거
      if (state.timerInterval) {
        clearInterval(state.timerInterval);
      }

      // 1초마다 타이머 업데이트
      state.timerInterval = setInterval(() => {
        updateTimerDisplay();
      }, 1000);
    }

    function stopQuestionTimer() {
      if (state.timerInterval) {
        clearInterval(state.timerInterval);
        state.timerInterval = null;

        // 현재까지 경과한 시간 저장
        if (state.questionStartTime) {
          state.questionPausedElapsed = Date.now() - state.questionStartTime;
        }
      }
    }

    function saveQuestionTime(questionIndex) {
      if (state.questionStartTime) {
        const elapsed = Date.now() - state.questionStartTime;
        state.questionTimes[questionIndex] = elapsed;
      }
    }

    function updateTimerDisplay() {
      const timerElement = document.getElementById('questionTimer');
      if (!timerElement || !state.questionStartTime) return;

      const elapsed = Date.now() - state.questionStartTime;
      const totalSeconds = Math.floor(elapsed / 1000);
      const minutes = Math.floor(totalSeconds / 60);
      const seconds = totalSeconds % 60;

      // 3분(180초) 제한
      const remainingSeconds = 180 - totalSeconds;

      if (remainingSeconds <= 0) {
        timerElement.textContent = '0:00';
        timerElement.classList.add('text-red-500', 'animate-pulse');
        stopQuestionTimer();
      } else {
        const displayMinutes = Math.floor(remainingSeconds / 60);
        const displaySeconds = remainingSeconds % 60;
        timerElement.textContent = `${displayMinutes}:${displaySeconds.toString().padStart(2, '0')}`;

        // 30초 이하면 빨간색 경고
        if (remainingSeconds <= 30) {
          timerElement.classList.add('text-red-500');
        } else {
          timerElement.classList.remove('text-red-500');
        }
      }
    }

    function getTotalQuestionTime() {
      // 응답한 문제들의 시간만 합산
      return Object.keys(state.answers).reduce((total, questionIndex) => {
        return total + (state.questionTimes[questionIndex] || 0);
      }, 0);
    }

    function formatTime(milliseconds) {
      const totalSeconds = Math.floor(milliseconds / 1000);
      const minutes = Math.floor(totalSeconds / 60);
      const seconds = totalSeconds % 60;
      return `${minutes}분 ${seconds}초`;
    }

    // ===== 구두테스트 재시험 관련 함수 =====
    function generateWrongAnswerTest(attempt, round = 1) {
      console.log('=== 구두테스트 재시험 생성 시작 ===');
      console.log('재시험 회차:', round);
      console.log('Attempt:', attempt);

      const category = categories.find(c => c.id === attempt.categoryId);
      const theme = category.chapters.find(t => t.id === attempt.themeId);

      // 먼저 모든 틀린 문제들을 수집
      const allWrongQuestions = [];
      theme.questions.forEach((question, qIdx) => {
        const answer = attempt.answers[qIdx];
        // 틀린 문제만 선택
        if (answer && !answer.correct) {
          // similarQuestions가 있으면 후보에 추가
          if (question.similarQuestions && question.similarQuestions.length > 0) {
            allWrongQuestions.push({
              originalQuestion: question.question,
              originalQuestionIndex: qIdx,
              question: question,
              similarQuestions: question.similarQuestions
            });
          }
        }
      });

      // 틀린 문제들 중에서 랜덤으로 2개만 선택
      const selectedCount = Math.min(2, allWrongQuestions.length);
      const selectedWrongQuestions = [];

      // 무작위로 섞기
      const shuffled = [...allWrongQuestions].sort(() => Math.random() - 0.5);

      // 선택된 문제들에서 유사문제 랜덤 선택
      for (let i = 0; i < selectedCount; i++) {
        const wrongQ = shuffled[i];
        const randomIndex = Math.floor(Math.random() * wrongQ.similarQuestions.length);
        const selectedSimilarQuestion = wrongQ.similarQuestions[randomIndex];

        selectedWrongQuestions.push({
          originalQuestion: wrongQ.originalQuestion,
          originalQuestionIndex: wrongQ.originalQuestionIndex,
          question: selectedSimilarQuestion.question,
          answer: selectedSimilarQuestion.answer || "",
          hint: selectedSimilarQuestion.hint || "",
          explanation: selectedSimilarQuestion.explanation || ""
        });
      }

      console.log('생성된 구두테스트 재시험 문제 수:', selectedWrongQuestions.length);
      console.log('구두테스트 재시험 문제:', selectedWrongQuestions);

      return selectedWrongQuestions;
    }

    function startWrongAnswerTest(attempt, round = 1) {
      console.log('=== 구두테스트 재시험 시작 ===');
      console.log('재시험 회차:', round);

      const wrongQuestions = generateWrongAnswerTest(attempt, round);

      if (wrongQuestions.length === 0) {
        alert('틀린 문제가 없거나 유사문제가 없습니다.');
        return;
      }

      state.isWrongAnswerTest = true;
      state.wrongAnswerQuestions = wrongQuestions;
      state.wrongAnswerAttemptId = attempt.date; // 시도 날짜를 ID로 사용
      state.retestRound = round; // 재시험 회차 저장
      state.selectedCategory = attempt.categoryId;
      state.currentTheme = attempt.themeId;
      state.currentQuestion = 0;
      state.answers = {};
      state.quizStartTime = Date.now();
      state.questionTimes = {};
      state.questionPausedElapsed = 0;
      state.canvasStrokes = [];
      state.isEraserMode = false;
      state.showResults = false;
      stopQuestionTimer();

      render();
      // 타이머는 수동으로 시작해야 함
    }

    function startWrongAnswerTestForStudent(attemptDate, round = 1) {
      console.log('=== 선생님이 학생 구두테스트 재시험 시작 ===', attemptDate);
      console.log('재시험 회차:', round);

      if (!state.selectedStudent) {
        console.error('선택된 학생이 없습니다.');
        alert('선택된 학생이 없습니다.');
        return;
      }

      // 학생 UID를 별도로 저장 (퀴즈 진행 중 state.selectedStudent가 사라지는 것을 방지)
      state.currentStudentUid = state.selectedStudent.id;
      state.currentStudentName = state.selectedStudent.studentName;
      state.currentStudentPhone = state.selectedStudent.phone;
      console.log('🔒 학생 정보 백업:', {
        uid: state.currentStudentUid,
        name: state.currentStudentName,
        phone: state.currentStudentPhone
      });

      // adminStudents에서 최신 학생 데이터 가져오기
      const latestStudent = state.adminStudents.find(s => s.id === state.selectedStudent.id);
      if (latestStudent) {
        state.selectedStudent = latestStudent;
      }

      const attempts = state.selectedStudent.attempts || [];
      console.log('학생의 모든 시도:', attempts.map(a => ({ date: a.date, theme: a.themeName })));

      const attempt = attempts.find(a => a.date === attemptDate);

      if (!attempt) {
        console.error('해당 날짜의 시도를 찾을 수 없습니다:', attemptDate);
        console.error('찾으려는 날짜:', attemptDate);
        console.error('사용 가능한 날짜들:', attempts.map(a => a.date));
        alert('해당 테스트를 찾을 수 없습니다.\n콘솔을 확인해주세요.');
        return;
      }

      console.log('찾은 시도:', attempt);

      // 학습 기록 모드 해제 (구두테스트 재시험 화면 표시를 위해)
      state.showStudentRecords = false;

      // 기존 startWrongAnswerTest 함수 호출
      startWrongAnswerTest(attempt, round);
    }

    async function uploadCanvasImage(canvas, studentId, questionIndex) {
      try {
        const maxWidth = 800;
        const quality = 0.6;
        let width = canvas.width;
        let height = canvas.height;

        if (width > maxWidth) {
          const ratio = maxWidth / width;
          width = maxWidth;
          height = height * ratio;
        }

        const tempCanvas = document.createElement('canvas');
        tempCanvas.width = width;
        tempCanvas.height = height;
        const tempCtx = tempCanvas.getContext('2d');
        tempCtx.drawImage(canvas, 0, 0, width, height);

        const blob = await new Promise(resolve => {
          tempCanvas.toBlob(resolve, 'image/jpeg', quality);
        });

        const filename = `handwriting/${studentId}/q${questionIndex}_${Date.now()}.jpg`;
        const storageRef = storage.ref(filename);
        const snapshot = await storageRef.put(blob);
        const downloadUrl = await snapshot.ref.getDownloadURL();

        return downloadUrl;
      } catch (error) {
        console.error('이미지 업로드 오류:', error);
        throw error;
      }
    }

    // 자동 로그인 체크
    function checkAutoLogin() {
      // 학생 자동 로그인 체크
      const savedName = localStorage.getItem('ox_quiz_student_name');
      const savedPhone = localStorage.getItem('ox_quiz_student_phone');
      const savedTeacher = localStorage.getItem('ox_quiz_teacher_name');
      const studentAutoLoginEnabled = localStorage.getItem('ox_quiz_auto_login') === 'true';

      if (studentAutoLoginEnabled && savedName && savedPhone) {
        console.log('학생 자동 로그인 시도:', savedName);
        state.studentName = savedName;
        state.phone = savedPhone;
        state.teacherName = savedTeacher || '';
        state.autoLogin = true;
        state.userType = 'student';
        return { type: 'student' };
      }

      // 관리자 자동 로그인 체크
      const savedAdminName = localStorage.getItem('ox_quiz_admin_name');
      const adminAutoLoginEnabled = localStorage.getItem('ox_quiz_admin_auto_login') === 'true';

      if (adminAutoLoginEnabled && savedAdminName) {
        console.log('관리자 자동 로그인 시도:', savedAdminName);
        state.adminName = savedAdminName;
        state.autoLogin = true;
        state.userType = 'admin';
        return { type: 'admin', name: savedAdminName };
      }

      return null;
    }

    // 로그인 정보 저장
    function saveLoginInfo(name, phone, teacher, autoLogin) {
      localStorage.setItem('ox_quiz_student_name', name);
      localStorage.setItem('ox_quiz_student_phone', phone);
      localStorage.setItem('ox_quiz_teacher_name', teacher);
      localStorage.setItem('ox_quiz_auto_login', autoLogin ? 'true' : 'false');
    }

    // 로그아웃
    function logout() {
      localStorage.removeItem('ox_quiz_student_name');
      localStorage.removeItem('ox_quiz_student_phone');
      localStorage.removeItem('ox_quiz_teacher_name');
      localStorage.removeItem('ox_quiz_auto_login');
      localStorage.removeItem('ox_quiz_admin_name');
      localStorage.removeItem('ox_quiz_admin_auto_login');
      state.isLoggedIn = false;
      state.userType = null;
      state.studentName = '';
      state.phone = '';
      state.teacherName = '';
      state.adminName = '';
      state.uid = '';
      state.selectedCategory = null;
      state.currentTheme = null;
      state.autoLogin = false;
      state.adminStudents = [];
      state.selectedStudent = null;
      render();
    }

    // Firebase 함수
    async function loadData(id) {
      try {
        const doc = await db.collection('probability-students').doc(id).get();
        if (doc.exists) {
          const studentData = doc.data();
          // Firebase에서 가져온 studentName을 사용 (정확한 키 매칭을 위해)
          const studentName = studentData.studentName || state.studentName;
          state.allStudentData[studentName] = studentData;
          state.lockTimers = studentData.lockTimers || {};
          // 기존 데이터에서 teacherName 가져오기
          if (!state.teacherName && studentData.teacherName) {
            state.teacherName = studentData.teacherName;
          }
          // state.studentName도 Firebase의 값으로 업데이트 (일관성 유지)
          if (studentData.studentName) {
            state.studentName = studentData.studentName;
          }
          console.log('데이터 로드 완료 - studentName:', studentName, 'attempts:', studentData.attempts?.length || 0);
        } else {
          console.log('새 학생 데이터 생성:', state.studentName);
          state.allStudentData[state.studentName] = {
            attempts: [],
            lockTimers: {},
            teacherName: state.teacherName,
            studentName: state.studentName,
            phone: state.phone,
            status: 'active' // 신규 학생은 재원생으로 시작
          };
          state.lockTimers = {};
        }
      } catch (error) {
        console.error('데이터 로드 오류:', error);
        state.allStudentData[state.studentName] = {
          attempts: [],
          lockTimers: {},
          teacherName: state.teacherName,
          studentName: state.studentName,
          phone: state.phone,
          status: 'active'
        };
        state.lockTimers = {};
      }
    }

    async function saveData(newData, uid = null) {
      const targetUid = uid || state.uid;

      // 온라인 저장 재시도 로직 (최대 3회)
      const maxRetries = 3;
      let retryCount = 0;
      let saveSuccess = false;

      while (retryCount < maxRetries && !saveSuccess) {
        try {
          if (navigator.onLine) {
            await db.collection('probability-students').doc(targetUid).set(newData);
            console.log('온라인 저장 완료 (시도:', retryCount + 1, '/', maxRetries, ')');
            saveSuccess = true;

            // 선생님이 학생 데이터를 저장한 경우, 학생 목록 다시 로드
            if (state.userType === 'admin' && uid) {
              console.log('선생님 학생 목록 다시 로드 중...');
              await loadAdminStudents(state.adminName);
              console.log('학생 목록 다시 로드 완료');

              // selectedStudent도 최신 데이터로 업데이트
              if (state.selectedStudent && state.selectedStudent.id) {
                const updatedStudent = state.adminStudents.find(s => s.id === state.selectedStudent.id);
                if (updatedStudent) {
                  state.selectedStudent = updatedStudent;
                  console.log('✅ selectedStudent를 최신 데이터로 업데이트:', updatedStudent.attempts?.length, '개의 시도');
                }
              }
            }
          } else {
            await saveToIndexedDB(newData);
            console.log('오프라인 임시 저장 완료');
            alert('오프라인 상태입니다. 온라인 복구 시 자동으로 동기화됩니다.');
            saveSuccess = true; // 로컬 저장 성공
          }
        } catch (error) {
          retryCount++;
          console.error('데이터 저장 오류 (시도:', retryCount, '/', maxRetries, '):', error);

          if (retryCount >= maxRetries) {
            // 최대 재시도 횟수 초과 시 로컬 저장
            await saveToIndexedDB(newData);
            alert('온라인 저장에 실패했습니다. 데이터를 로컬에 임시 저장했습니다.\n인터넷 연결을 확인해주세요.');
          } else {
            // 재시도 전 잠시 대기 (1초)
            await new Promise(resolve => setTimeout(resolve, 1000));
          }
        }
      }

      return saveSuccess;
    }

    // 관리자 함수
    async function loadAdminStudents(teacherName) {
      try {
        const snapshot = await db.collection('probability-students')
          .where('teacherName', '==', teacherName)
          .get();
        
        const students = [];
        snapshot.forEach(doc => {
          students.push({
            id: doc.id,
            ...doc.data()
          });
        });
        
        state.adminStudents = students;
        console.log('학생 목록 로드 완료:', students.length, '명');
      } catch (error) {
        console.error('학생 목록 로드 오류:', error);
        state.adminStudents = [];
      }
    }

    async function registerAdmin(adminName, secretKey) {
      if (secretKey !== ADMIN_SECRET_KEY) {
        alert('보안 키가 올바르지 않습니다.');
        return false;
      }

      try {
        const adminId = `admin_${adminName}`;
        // students 컬렉션에 관리자 정보 저장 (isAdmin: true 플래그 추가)
        await db.collection('probability-students').doc(adminId).set({
          name: adminName,
          isAdmin: true,
          registeredAt: new Date().toISOString()
        });
        
        alert('관리자 등록이 완료되었습니다!');
        return true;
      } catch (error) {
        console.error('관리자 등록 오류:', error);
        alert('관리자 등록 중 오류가 발생했습니다: ' + error.message);
        return false;
      }
    }

    async function checkAdminExists(adminName) {
      try {
        const adminId = `admin_${adminName}`;
        const doc = await db.collection('probability-students').doc(adminId).get();
        return doc.exists && doc.data()?.isAdmin === true;
      } catch (error) {
        console.error('관리자 확인 오류:', error);
        return false;
      }
    }

    // 유틸리티 함수
    function getThemeStatus(categoryId, themeId) {
      const attempts = state.allStudentData[state.studentName]?.attempts || [];
      const themeAttempts = attempts.filter(a => a.categoryId === categoryId && a.themeId === themeId);
      
      if (themeAttempts.length === 0) return { status: 'new', lastAttempt: null, attemptCount: 0 };
      
      const lastAttempt = themeAttempts[themeAttempts.length - 1];
      const percentage = lastAttempt.percentage;
      
      return { 
        status: percentage === 100 ? 'completed' : 'retry', 
        lastAttempt, 
        attemptCount: themeAttempts.length
      };
    }

    function isLocked(categoryId, themeId) {
      const lockUntil = state.lockTimers[`${state.studentName}-${categoryId}-${themeId}`];
      if (!lockUntil) return false;
      return state.currentTime < lockUntil;
    }

    function getRemainingTime(categoryId, themeId) {
      const lockUntil = state.lockTimers[`${state.studentName}-${categoryId}-${themeId}`];
      if (!lockUntil) return 0;
      const remaining = Math.max(0, Math.ceil((lockUntil - state.currentTime) / 1000));
      return remaining;
    }

    // 이벤트 핸들러
    async function handleStudentLogin(autoLoginChecked = false, isNewStudent = false) {
      if (state.studentName.trim() && state.phone.trim()) {
        const p = state.phone.replace(/[^0-9]/g, '');
        if (p.length < 10 || p.length > 11) {
          alert('올바른 전화번호를 입력해주세요. (10-11자리)');
          return;
        }

        if (isNewStudent && !state.teacherName.trim()) {
          alert('담당 선생님 성함을 입력해주세요.');
          return;
        }

        state.loading = true;
        render();
        const id = `${state.studentName.trim()}_${p}`;
        state.uid = id;
        
        saveLoginInfo(state.studentName.trim(), p, state.teacherName.trim(), autoLoginChecked);
        
        await loadData(id);
        
        // 퇴원생 체크
        const studentData = state.allStudentData[state.studentName];
        if (studentData && studentData.status === 'withdrawn') {
          state.loading = false;
          alert('퇴원 처리된 학생은 로그인할 수 없습니다.\\n담당 선생님께 문의해주세요.');
          logout();
          return;
        }
        
        // 신규 학생인 경우 선생님 정보 저장
        if (isNewStudent) {
          const newData = {
            ...state.allStudentData[state.studentName],
            teacherName: state.teacherName.trim(),
            studentName: state.studentName.trim(),
            phone: p,
            status: 'active'
          };
          await saveData(newData);
        }
        
        state.isLoggedIn = true;
        state.userType = 'student';
        state.loading = false;
        render();
      }
    }

    async function handleAdminLogin() {
      if (!state.adminName.trim()) {
        alert('관리자 이름을 입력해주세요.');
        return;
      }

      const adminPassword = document.getElementById('adminPasswordInput')?.value;
      if (!adminPassword) {
        alert('비밀번호를 입력해주세요.');
        return;
      }

      if (adminPassword !== ADMIN_PASSWORD) {
        alert('비밀번호가 올바르지 않습니다.');
        return;
      }

      // 자동 로그인 체크박스 확인 (render 전에 먼저 확인)
      const autoLoginChecked = document.getElementById('adminAutoLoginCheckbox')?.checked || false;
      console.log('관리자 자동 로그인 체크:', autoLoginChecked);

      state.loading = true;
      render();

      const exists = await checkAdminExists(state.adminName.trim());
      
      if (!exists) {
        state.loading = false;
        alert('등록되지 않은 관리자입니다. 먼저 관리자 등록을 진행해주세요.');
        render();
        return;
      }

      // 자동 로그인 정보 저장
      if (autoLoginChecked) {
        console.log('관리자 자동 로그인 정보 저장:', state.adminName.trim());
        localStorage.setItem('ox_quiz_admin_name', state.adminName.trim());
        localStorage.setItem('ox_quiz_admin_auto_login', 'true');
      }

      await loadAdminStudents(state.adminName.trim());
      
      state.isLoggedIn = true;
      state.userType = 'admin';
      state.loading = false;
      render();
    }

    function handleStartQuiz(themeId) {
      if (isLocked(state.selectedCategory, themeId)) return;

      console.log('🎯 일반 구두테스트 시작 - isWrongAnswerTest를 false로 설정');
      state.isWrongAnswerTest = false; // 일반 테스트임을 명시
      state.wrongAnswerQuestions = []; // 재시험 관련 상태 초기화
      state.wrongAnswerAttemptId = null;
      state.retestRound = null;

      state.currentTheme = themeId;
      state.currentQuestion = 0;
      state.answers = {};
      state.quizStartTime = Date.now(); // 퀴즈 시작 시간 기록
      state.questionTimes = {}; // 문제별 시간 초기화
      state.questionPausedElapsed = 0; // 일시정지 시간 초기화
      state.canvasStrokes = []; // 캔버스 획 초기화
      state.isEraserMode = false; // 지우개 모드 해제
      stopQuestionTimer(); // 기존 타이머 정리
      render();
      // 타이머는 수동으로 시작해야 함
    }

    async function handleAnswer(selectedAnswer) {
      // 퀴즈 완료 후에는 답변 변경 불가
      if (state.quizCompleted) {
        return;
      }

      const key = state.currentQuestion;

      // 기존 답변이 있는 경우, 이미지 URL 보존
      const existingImageUrl = state.answers[key]?.imageUrl || null;

      const category = categories.find(c => c.id === state.selectedCategory);
      const theme = category.chapters.find(t => t.id === state.currentTheme);
      const question = theme.questions[state.currentQuestion];
      // O/X는 선생님이 직접 평가하는 버튼 (O = 정답, X = 오답)
      const isCorrect = selectedAnswer === 'O';

      const status = getThemeStatus(state.selectedCategory, state.currentTheme);
      const isRetake = status.attemptCount >= 1;

      // Canvas 이미지 업로드 (있는 경우, 새로 그린 경우만)
      let imageUrl = existingImageUrl;
      if (state.currentCanvas && state.canvasStrokes.length > 0) {
        try {
          const targetStudentId = state.userType === 'admin'
            ? (state.selectedStudent?.id || state.currentStudentUid)
            : state.uid;
          imageUrl = await uploadCanvasImage(
            state.currentCanvas,
            targetStudentId,
            state.currentQuestion
          );
        } catch (error) {
          console.error('Canvas 이미지 업로드 실패:', error);
          // 이미지 업로드 실패해도 답변은 저장
        }
      }

      // 문제 시간 저장 (처음 답변할 때만)
      if (!state.answers[key]) {
        saveQuestionTime(key);
      }

      state.answers[key] = {
        selected: selectedAnswer,
        correct: isCorrect,
        isRetake,
        imageUrl
      };
      render();
    }

    function handleNext() {
      const category = categories.find(c => c.id === state.selectedCategory);
      const theme = category.chapters.find(t => t.id === state.currentTheme);
      if (state.currentQuestion < theme.questions.length - 1) {
        // 현재 문제가 아직 답변 안 되었으면 시간 저장 (건너뛸 때)
        if (!state.answers[state.currentQuestion]) {
          saveQuestionTime(state.currentQuestion);
        }

        state.currentQuestion++;
        state.canvasStrokes = []; // 다음 문제로 이동 시 캔버스 획 초기화
        state.isEraserMode = false; // 지우개 모드 해제
        state.questionPausedElapsed = 0; // 일시정지 시간 초기화
        state.questionStartTime = null; // 타이머 시작 시간 초기화

        // 타이머는 수동으로 시작해야 함
        stopQuestionTimer();

        render();
      }
    }

    function handlePrev() {
      if (state.currentQuestion > 0) {
        // 현재 문제가 아직 답변 안 되었으면 시간 저장
        if (!state.answers[state.currentQuestion]) {
          saveQuestionTime(state.currentQuestion);
        }

        state.currentQuestion--;
        state.canvasStrokes = []; // 이전 문제로 이동 시 캔버스 획 초기화
        state.isEraserMode = false; // 지우개 모드 해제
        state.questionPausedElapsed = 0; // 일시정지 시간 초기화
        state.questionStartTime = null; // 타이머 시작 시간 초기화

        // 타이머는 수동으로 시작해야 함
        stopQuestionTimer();

        render();
      }
    }

    async function handleFinishQuiz() {
      console.log('=== handleFinishQuiz 시작 ===');

      // 퀴즈 완료 플래그 설정 (답변 변경 방지)
      state.quizCompleted = true;

      // 타이머 정리
      stopQuestionTimer();

      const category = categories.find(c => c.id === state.selectedCategory);
      const theme = category.chapters.find(t => t.id === state.currentTheme);

      // 구두테스트 재시험 모드인지 확인
      const isWrongTest = state.isWrongAnswerTest;
      const questions = isWrongTest ? state.wrongAnswerQuestions : theme.questions;

      const answeredCount = Object.keys(state.answers).length;
      const correct = Object.values(state.answers).filter(a => a.correct).length;
      const total = questions.length;
      // 정답률은 응답한 문제 기준으로 계산
      const percentage = answeredCount > 0 ? Math.round((correct / answeredCount) * 100) : 0;

      const wrongQuestions = questions
        .map((q, idx) => ({ ...q, index: idx }))
        .filter(q => state.answers[q.index] && !state.answers[q.index].correct)
        .map(q => q.question);

      // 응답한 문제 번호 목록
      const answeredQuestions = Object.keys(state.answers).map(Number).sort((a, b) => a - b);

      // 총 소요 시간 계산 - 응답한 문제들의 시간만 합산
      const totalTime = getTotalQuestionTime();
      console.log('응답한 문제:', answeredQuestions);
      console.log('각 문제 소요 시간:', state.questionTimes);
      console.log('총 소요 시간:', formatTime(totalTime));

      // 구두테스트 재시험은 별도의 키로 선생님 메모 저장
      const noteKey = isWrongTest
        ? state.currentTheme + '_retest_' + state.wrongAnswerAttemptId + '_' + (state.retestRound || 1)
        : state.currentTheme;

      const attemptData = {
        categoryId: state.selectedCategory,
        categoryName: category.name,
        themeId: state.currentTheme,
        themeName: theme.name,
        date: new Date().toLocaleString('ko-KR'),
        correct,
        total,
        answeredCount, // 응답한 문제 수
        answeredQuestions, // 응답한 문제 번호들
        percentage,
        wrongQuestions,
        answers: { ...state.answers },
        totalTime, // 총 소요 시간 (밀리초) - 응답한 문제들의 합
        questionTimes: { ...state.questionTimes }, // 각 문제별 소요 시간
        teacherNotes: state.teacherNotes[noteKey] || {}, // 선생님 메모
        isWrongAnswerTest: isWrongTest, // 구두테스트 재시험 여부
        wrongAnswerAttemptId: isWrongTest ? state.wrongAnswerAttemptId : null, // 원본 시도 ID
        retestRound: isWrongTest ? (state.retestRound || 1) : null // 재시험 회차 (1 또는 2)
      };

      console.log('저장할 attemptData:', attemptData);

      // 선생님이 학생의 테스트를 진행한 경우, 학생 데이터에 저장
      const targetStudentName = (state.userType === 'admin' && state.selectedStudent)
        ? state.selectedStudent.studentName
        : state.studentName;

      const targetStudentPhone = (state.userType === 'admin' && state.selectedStudent)
        ? state.selectedStudent.phone
        : state.phone;

      const targetTeacherName = (state.userType === 'admin' && state.selectedStudent)
        ? state.selectedStudent.teacherName || state.adminName
        : state.teacherName;

      // 선생님 모드에서는 selectedStudent의 최신 데이터를 사용
      // 학생 모드에서는 allStudentData 사용
      const baseData = (state.userType === 'admin' && state.selectedStudent)
        ? state.selectedStudent
        : state.allStudentData[targetStudentName];

      console.log('=== 데이터 기반 확인 ===');
      console.log('baseData:', baseData);
      console.log('기존 attempts 수:', baseData?.attempts?.length || 0);

      const newData = {
        ...baseData,
        attempts: [...(baseData?.attempts || []), attemptData],
        teacherName: targetTeacherName,
        studentName: targetStudentName,
        phone: targetStudentPhone
      };

      console.log('새로운 attempts 수:', newData.attempts.length);

      // 선생님 모드에서는 학생의 ID를 보존해야 함
      if (state.userType === 'admin' && state.selectedStudent?.id) {
        newData.id = state.selectedStudent.id;
      }

      if (percentage < 100) {
        const lockUntil = Date.now() + 60000;
        state.lockTimers[`${targetStudentName}-${state.selectedCategory}-${state.currentTheme}`] = lockUntil;
        newData.lockTimers = state.lockTimers;
      }

      state.allStudentData[targetStudentName] = newData;

      // 선생님이 진행한 경우, 학생의 UID로 저장
      console.log('=== saveUid 결정 ===');
      console.log('state.userType:', state.userType);
      console.log('state.selectedStudent:', state.selectedStudent);
      console.log('state.selectedStudent?.id:', state.selectedStudent?.id);
      console.log('state.currentStudentUid (백업):', state.currentStudentUid);
      console.log('state.uid:', state.uid);

      let saveUid;
      if (state.userType === 'admin') {
        // 선생님 모드: selectedStudent 또는 백업된 currentStudentUid 사용
        saveUid = state.selectedStudent?.id || state.currentStudentUid;
        console.log('👨‍🏫 선생님 모드 - saveUid:', saveUid);
      } else {
        // 학생 모드: state.uid 사용
        saveUid = state.uid;
        console.log('👨‍🎓 학생 모드 - saveUid:', saveUid);
      }

      console.log('=== 퀴즈 완료 후 데이터 저장 ===');
      console.log('저장 시작 - targetStudentName:', targetStudentName);
      console.log('저장 시작 - saveUid:', saveUid);
      console.log('저장할 attempts 수:', newData.attempts?.length || 0);
      console.log('저장할 newData:', newData);

      if (!saveUid) {
        console.error('❌ saveUid가 비어있습니다! 저장할 수 없습니다.');
        console.error('state.userType:', state.userType);
        console.error('state.selectedStudent:', state.selectedStudent);
        console.error('state.currentStudentUid:', state.currentStudentUid);
        console.error('state.uid:', state.uid);
        alert('저장 오류: 학생 ID를 찾을 수 없습니다.\n선생님 화면에서 학생을 다시 선택해주세요.');
        return;
      }

      await saveData(newData, saveUid);

      console.log('Firebase 저장 완료!');
      console.log('학생 UID:', saveUid, '에 저장됨');

      // 선생님이 진행한 경우, selectedStudent 데이터도 업데이트
      if (state.userType === 'admin' && state.selectedStudent) {
        state.selectedStudent = newData;
      }

      // 구두테스트 재시험 완료 후 학습 기록으로 이동
      if (isWrongTest) {
        state.isWrongAnswerTest = false;
        state.wrongAnswerQuestions = [];
        state.wrongAnswerAttemptId = null;
        state.retestRound = null;

        // 선생님이 진행한 경우 → 학생 상세 기록 화면으로
        if (state.userType === 'admin' && state.selectedStudent) {
          state.showStudentRecords = true;
          state.selectedCategory = null; // 학습 기록 화면으로 가기 위해 카테고리 초기화
        } else {
          // 학생이 진행한 경우 → 학습 기록 화면으로
          state.showResults = true;
        }
      }

      state.currentTheme = null;
      state.currentQuestion = 0;
      state.answers = {};
      state.quizStartTime = null;
      state.questionTimes = {}; // 문제별 시간 초기화
      state.quizCompleted = false; // 퀴즈 완료 플래그 초기화

      if (!isWrongTest) {
        state.selectedCategory = null;
      }

      console.log('=== handleFinishQuiz 완료 ===');
      render();
    }

    // 렌더링 함수
    let isRendering = false;
    let renderCount = 0;
    function render() {
      if (isRendering) {
        console.log('⚠️ render() 차단됨 (이미 렌더링 중)');
        return;
      }
      isRendering = true;
      renderCount++;

      console.log(`\n🔄 ========== render() 호출 #${renderCount} ==========`);
      console.log('현재 state:', {
        userType: state.userType,
        isLoggedIn: state.isLoggedIn,
        studentName: state.studentName,
        isWrongAnswerTest: state.isWrongAnswerTest,
        wrongAnswerQuestions_length: state.wrongAnswerQuestions?.length,
        showResults: state.showResults,
        selectedCategory: state.selectedCategory
      });

      const app = document.getElementById('app');

      if (state.loading) {
        app.innerHTML = `
          <div class="min-h-screen flex items-center justify-center">
            <div class="text-center">
              <div class="w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
              <p class="text-white font-bold">데이터 불러오는 중...</p>
            </div>
          </div>
        `;
        isRendering = false;
        return;
      }

      if (!state.isLoggedIn) {
        if (state.showAdminRegister) {
          renderAdminRegister(app);
        } else {
          renderLogin(app);
        }
        // 로그인 화면은 수식이 없으므로 즉시 표시
        if (!app.classList.contains('ready')) {
          app.classList.add('ready');
        }
        isRendering = false;
        return;
      }

      if (state.userType === 'admin') {
        console.log('→ renderAdminScreen() 호출');
        renderAdminScreen(app);
      } else {
        console.log('→ renderMainScreen() 호출');
        renderMainScreen();
      }

      console.log(`✅ render() #${renderCount} 완료\n`);
      isRendering = false;

      // 100ms 후에 다시 render가 호출되는지 체크
      setTimeout(() => {
        const currentCount = renderCount;
        setTimeout(() => {
          if (renderCount > currentCount) {
            console.log(`⚠️ 경고: render() #${currentCount} 이후 추가 render() 호출됨! (현재: #${renderCount})`);
          }
        }, 10);
      }, 100);

      // DOM 업데이트 후 KaTeX 렌더링 (디바운싱 적용됨)
      renderMath();
    }

    // KaTeX 렌더링 함수 (강력한 디바운싱)
    let renderMathTimeout = null;
    let isRenderingMath = false;
    let lastRenderTime = 0;
    let isFirstRender = true;

    function renderMath() {
      // KaTeX가 로드될 때까지 대기
      if (typeof renderMathInElement === 'undefined') {
        // KaTeX가 아직 로드되지 않았다면 잠시 후 다시 시도
        setTimeout(renderMath, 50);
        return;
      }

      const app = document.getElementById('app');
      if (!app) return;

      // KaTeX 렌더링 실행 (화면에 보이기 전에)
      try {
        renderMathInElement(app, {
          delimiters: [
            {left: '\\(', right: '\\)', display: false},
            {left: '\\[', right: '\\]', display: true}
          ],
          throwOnError: false,
          ignoredTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
          // ≠, >, < 같은 HTML 엔티티는 무시
          trust: (context) => ['\\htmlId', '\\href'].includes(context.command)
        });
        console.log('✓ KaTeX 렌더링 완료');
      } catch (error) {
        console.error('KaTeX 렌더링 오류:', error);
      }

      // 렌더링 완료 후 화면 표시 (SSR처럼 보이도록)
      if (!app.classList.contains('ready')) {
        // 아주 짧은 지연으로 자연스럽게 표시
        setTimeout(() => {
          app.classList.add('ready');
          console.log('✓ 앱 표시 (수식 렌더링 완료)');
        }, 10);
      }

      isFirstRender = false;
    }

    function renderLogin(app) {
      app.innerHTML = `
        <div class="min-h-screen flex items-center justify-center p-6">
          <div class="max-w-md w-full">
            <div class="bg-gray-900 rounded-2xl p-8 shadow-2xl border border-orange-500/30">
              <div class="flex justify-center mb-6">
                <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center shadow-lg shadow-orange-500/50">
                  ${icon('bookOpen', 'text-white', 32)}
                </div>
              </div>
              <h1 class="text-3xl font-bold text-center mb-2 text-white">구두테스트 퀴즈</h1>
              <h2 class="text-xl text-center mb-8 text-orange-500">확률과 통계</h2>
              
              <div class="flex gap-2 mb-6">
                <button id="studentBtn" class="flex-1 py-2 px-4 bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg font-bold text-white text-sm">
                  학생
                </button>
                <button id="adminBtn" class="flex-1 py-2 px-4 bg-gray-800 hover:bg-gray-700 rounded-lg font-bold text-white text-sm transition-all">
                  관리자
                </button>
              </div>

              <div id="loginForm"></div>
            </div>
          </div>
        </div>
      `;

      const studentBtn = document.getElementById('studentBtn');
      const adminBtn = document.getElementById('adminBtn');
      const loginForm = document.getElementById('loginForm');

      function showStudentForm() {
        studentBtn.className = "flex-1 py-2 px-4 bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg font-bold text-white text-sm";
        adminBtn.className = "flex-1 py-2 px-4 bg-gray-800 hover:bg-gray-700 rounded-lg font-bold text-white text-sm transition-all";
        
        loginForm.innerHTML = `
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-300">학생 이름</label>
              <input
                type="text"
                id="nameInput"
                value="${state.studentName}"
                placeholder="이름을 입력하세요"
                class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20 text-white placeholder-gray-500 transition-all"
              />
            </div>

            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-300">전화번호</label>
              <input
                type="tel"
                id="phoneInput"
                value="${state.phone}"
                placeholder="전화번호 (- 없이)"
                class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20 text-white placeholder-gray-500 transition-all"
              />
              <p class="text-xs text-gray-500 mt-1">예: 01012345678</p>
            </div>

            <div id="teacherField" style="display: none;">
              <label class="block text-sm font-semibold mb-2 text-gray-300">담당 선생님 성함</label>
              <input
                type="text"
                id="teacherInput"
                value="${state.teacherName}"
                placeholder="선생님 성함"
                class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20 text-white placeholder-gray-500 transition-all"
              />
              <p class="text-xs text-gray-500 mt-1">처음 가입시에만 입력</p>
            </div>

            <div class="flex items-center gap-2">
              <input
                type="checkbox"
                id="newStudentCheck"
                class="w-4 h-4 bg-gray-800 border-gray-700 rounded focus:ring-orange-500 focus:ring-2 text-orange-500"
              />
              <label for="newStudentCheck" class="text-sm text-gray-300 cursor-pointer">처음 가입하는 학생입니다</label>
            </div>

            <div>
              <label class="flex items-center cursor-pointer">
                <input
                  type="checkbox"
                  id="autoLoginCheck"
                  ${state.autoLogin ? 'checked' : ''}
                  class="w-4 h-4 bg-gray-800 border-gray-700 rounded focus:ring-orange-500 focus:ring-2 text-orange-500"
                />
                <span class="ml-2 text-sm text-gray-300">자동 로그인</span>
              </label>
              <p class="text-xs text-gray-500 mt-1 ml-6">다음부터 자동으로 로그인됩니다</p>
            </div>
            
            <button
              id="loginBtn"
              class="w-full py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 rounded-xl font-bold text-white transition-all shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50 transform hover:scale-105 active:scale-95"
            >
              시작하기
            </button>
          </div>
        `;

        const nameInput = document.getElementById('nameInput');
        const phoneInput = document.getElementById('phoneInput');
        const teacherInput = document.getElementById('teacherInput');
        const newStudentCheck = document.getElementById('newStudentCheck');
        const teacherField = document.getElementById('teacherField');
        const loginBtn = document.getElementById('loginBtn');

        nameInput.addEventListener('input', (e) => {
          state.studentName = e.target.value;
        });
        
        phoneInput.addEventListener('input', (e) => {
          state.phone = e.target.value;
        });

        teacherInput.addEventListener('input', (e) => {
          state.teacherName = e.target.value;
        });

        newStudentCheck.addEventListener('change', (e) => {
          teacherField.style.display = e.target.checked ? 'block' : 'none';
        });

        phoneInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            const autoLoginChecked = document.getElementById('autoLoginCheck').checked;
            const isNewStudent = newStudentCheck.checked;
            handleStudentLogin(autoLoginChecked, isNewStudent);
          }
        });

        loginBtn.addEventListener('click', () => {
          const autoLoginChecked = document.getElementById('autoLoginCheck').checked;
          const isNewStudent = newStudentCheck.checked;
          handleStudentLogin(autoLoginChecked, isNewStudent);
        });
      }

      function showAdminForm() {
        studentBtn.className = "flex-1 py-2 px-4 bg-gray-800 hover:bg-gray-700 rounded-lg font-bold text-white text-sm transition-all";
        adminBtn.className = "flex-1 py-2 px-4 bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg font-bold text-white text-sm";
        
        loginForm.innerHTML = `
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-300">관리자 이름</label>
              <input
                type="text"
                id="adminNameInput"
                value="${state.adminName}"
                placeholder="이름을 입력하세요"
                class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20 text-white placeholder-gray-500 transition-all"
              />
            </div>

            <div>
              <label class="block text-sm font-semibold mb-2 text-gray-300">비밀번호</label>
              <input
                type="password"
                id="adminPasswordInput"
                placeholder="비밀번호를 입력하세요"
                class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20 text-white placeholder-gray-500 transition-all"
              />
            </div>

            <div class="flex items-center">
              <input
                type="checkbox"
                id="adminAutoLoginCheckbox"
                class="w-4 h-4 bg-gray-800 border-gray-700 rounded focus:ring-orange-500 focus:ring-2"
              />
              <label for="adminAutoLoginCheckbox" class="ml-2 text-sm text-gray-300">
                자동 로그인
              </label>
            </div>
            
            <button
              id="adminLoginBtn"
              class="w-full py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 rounded-xl font-bold text-white transition-all shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50 transform hover:scale-105 active:scale-95"
            >
              로그인
            </button>

            <button
              id="adminRegisterBtn"
              class="w-full py-3 bg-gray-800 hover:bg-gray-700 rounded-xl font-bold text-white transition-all border border-gray-700"
            >
              관리자 등록
            </button>
          </div>
        `;

        const adminNameInput = document.getElementById('adminNameInput');
        const adminPasswordInput = document.getElementById('adminPasswordInput');
        const adminLoginBtn = document.getElementById('adminLoginBtn');
        const adminRegisterBtn = document.getElementById('adminRegisterBtn');

        adminNameInput.addEventListener('input', (e) => {
          state.adminName = e.target.value;
        });

        adminPasswordInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            handleAdminLogin();
          }
        });

        adminLoginBtn.addEventListener('click', handleAdminLogin);
        
        adminRegisterBtn.addEventListener('click', () => {
          state.showAdminRegister = true;
          render();
        });
      }

      studentBtn.addEventListener('click', showStudentForm);
      adminBtn.addEventListener('click', showAdminForm);

      showStudentForm();
    }

    function renderAdminRegister(app) {
      app.innerHTML = `
        <div class="min-h-screen flex items-center justify-center p-6">
          <div class="max-w-md w-full">
            <div class="bg-gray-900 rounded-2xl p-8 shadow-2xl border border-orange-500/30">
              <div class="mb-6">
                <button id="backBtn" class="text-sm text-orange-500 hover:text-orange-400 flex items-center font-semibold">
                  ${icon('chevronLeft', '', 16)}돌아가기
                </button>
              </div>

              <div class="flex justify-center mb-6">
                <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center shadow-lg shadow-orange-500/50">
                  ${icon('settings', 'text-white', 32)}
                </div>
              </div>
              
              <h1 class="text-2xl font-bold text-center mb-2 text-white">관리자 등록</h1>
              <p class="text-sm text-center mb-6 text-gray-400">보안 키가 필요합니다</p>
              
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-semibold mb-2 text-gray-300">관리자 이름</label>
                  <input
                    type="text"
                    id="regAdminNameInput"
                    placeholder="이름을 입력하세요"
                    class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20 text-white placeholder-gray-500 transition-all"
                  />
                </div>

                <div>
                  <label class="block text-sm font-semibold mb-2 text-gray-300">보안 키</label>
                  <input
                    type="password"
                    id="secretKeyInput"
                    placeholder="보안 키를 입력하세요"
                    class="w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20 text-white placeholder-gray-500 transition-all"
                  />
                  <p class="text-xs text-red-400 mt-1">⚠️ 관리자만 알고 있는 보안 키</p>
                </div>
                
                <button
                  id="registerBtn"
                  class="w-full py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 rounded-xl font-bold text-white transition-all shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50 transform hover:scale-105 active:scale-95"
                >
                  등록하기
                </button>
              </div>
            </div>
          </div>
        </div>
      `;

      document.getElementById('backBtn').addEventListener('click', () => {
        state.showAdminRegister = false;
        render();
      });

      const regAdminNameInput = document.getElementById('regAdminNameInput');
      const secretKeyInput = document.getElementById('secretKeyInput');
      const registerBtn = document.getElementById('registerBtn');

      registerBtn.addEventListener('click', async () => {
        const name = regAdminNameInput.value.trim();
        const key = secretKeyInput.value.trim();

        if (!name) {
          alert('이름을 입력해주세요.');
          return;
        }

        if (!key) {
          alert('보안 키를 입력해주세요.');
          return;
        }

        const success = await registerAdmin(name, key);
        if (success) {
          state.showAdminRegister = false;
          render();
        }
      });
    }

    function renderAdminScreen(app) {
      if (state.selectedStudent) {
        // 학습 기록 보기 모드일 때는 우선적으로 학생 상세 기록 표시
        if (state.showStudentRecords) {
          renderAdminStudentDetail(app);
          return;
        }

        // 선생님이 학생의 테스트를 진행 중인 경우
        if (state.selectedCategory) {
          if (state.currentTheme === null) {
            renderThemeSelection(app);
          } else {
            renderQuizScreen(app);
          }
          return;
        }

        // 기본적으로 카테고리 선택 화면 표시
        renderAdminCategorySelection(app);
        return;
      }

      // 재원생/퇴원생 필터링
      const activeStudents = state.adminStudents.filter(s => s.status !== 'withdrawn');
      const withdrawnStudents = state.adminStudents.filter(s => s.status === 'withdrawn');
      const displayStudents = (state.studentStatusFilter === 'withdrawn') ? withdrawnStudents : activeStudents;
      
      app.innerHTML = `
        <div class="min-h-screen p-6">
          <div class="max-w-5xl mx-auto">
            <div class="bg-gray-900 rounded-2xl p-6 mb-8 shadow-xl border border-orange-500/30">
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center mr-3">
                    ${icon('users', 'text-white')}
                  </div>
                  <div>
                    <h2 class="text-xl font-bold text-white">${state.adminName} 선생님</h2>
                    <p class="text-sm text-gray-400 mt-1">담당 학생 관리</p>
                  </div>
                </div>
                <button id="logoutBtn" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-bold text-white transition-all transform hover:scale-105 active:scale-95 text-sm">
                  로그아웃
                </button>
              </div>
            </div>

            <!-- 재원생/퇴원생 탭 -->
            <div class="mb-6">
              <div class="flex gap-2 mb-4">
                <button id="activeTab" class="px-6 py-3 rounded-lg font-bold transition-all ${state.studentStatusFilter !== 'withdrawn' ? 'bg-orange-500 text-white' : 'bg-gray-800 text-gray-400 hover:bg-gray-700'}">
                  재원생 (${activeStudents.length}명)
                </button>
                <button id="withdrawnTab" class="px-6 py-3 rounded-lg font-bold transition-all ${state.studentStatusFilter === 'withdrawn' ? 'bg-gray-600 text-white' : 'bg-gray-800 text-gray-400 hover:bg-gray-700'}">
                  퇴원생 (${withdrawnStudents.length}명)
                </button>
              </div>
              
              <div class="bg-gray-900 rounded-xl p-4 border border-gray-800">
                <div class="flex items-center justify-between">
                  <span class="text-gray-400 text-sm font-semibold">
                    ${state.studentStatusFilter === 'withdrawn' ? '퇴원생' : '재원생'} 수
                  </span>
                  <span class="text-2xl font-bold text-orange-400">${displayStudents.length}명</span>
                </div>
              </div>
            </div>

            ${displayStudents.length === 0 ? `
              <div class="bg-gray-900 rounded-2xl p-12 text-center border border-gray-800">
                ${icon('users', 'mx-auto mb-4 text-gray-600', 48)}
                <p class="text-gray-400 font-medium">
                  ${state.studentStatusFilter === 'withdrawn' ? '퇴원 처리된 학생이 없습니다.' : '아직 담당 학생이 없습니다.'}
                </p>
                ${state.studentStatusFilter !== 'withdrawn' ? `
                  <p class="text-sm text-gray-500 mt-2">학생이 회원가입할 때 선생님 성함을 입력하면 자동으로 연결됩니다.</p>
                ` : ''}
              </div>
            ` : `
              <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                ${displayStudents.map(student => {
                  const attempts = student.attempts || [];
                  const totalAttempts = attempts.length;
                  const avgPercentage = totalAttempts > 0 
                    ? Math.round(attempts.reduce((sum, a) => sum + a.percentage, 0) / totalAttempts)
                    : 0;
                  const completedThemes = attempts.filter(a => a.percentage === 100).length;

                  return `
                    <button
                      data-student="${student.id}"
                      class="student-btn bg-gray-900 rounded-2xl p-6 border border-gray-800 shadow-xl hover:shadow-orange-500/20 hover:border-orange-500/50 transition-all text-left transform hover:scale-105 active:scale-95"
                    >
                      <div class="flex items-center mb-4">
                        <div class="w-10 h-10 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center mr-3">
                          ${icon('user', 'text-white', 20)}
                        </div>
                        <div>
                          <h3 class="text-base font-bold text-white">${student.studentName || '이름 없음'}</h3>
                          <p class="text-xs text-gray-500">${student.phone || ''}</p>
                        </div>
                      </div>
                      
                      <div class="grid grid-cols-3 gap-2 mb-3">
                        <div class="bg-gray-800/50 rounded-lg p-2 text-center">
                          <div class="text-lg font-bold text-orange-400">${totalAttempts}</div>
                          <div class="text-xs text-gray-500">시도</div>
                        </div>
                        <div class="bg-gray-800/50 rounded-lg p-2 text-center">
                          <div class="text-lg font-bold text-green-400">${completedThemes}</div>
                          <div class="text-xs text-gray-500">완료</div>
                        </div>
                        <div class="bg-gray-800/50 rounded-lg p-2 text-center">
                          <div class="text-lg font-bold text-blue-400">${avgPercentage}%</div>
                          <div class="text-xs text-gray-500">평균</div>
                        </div>
                      </div>

                      <div class="text-xs text-gray-400 text-right">
                        자세히 보기 →
                      </div>
                    </button>
                  `;
                }).join('')}
              </div>
            `}
          </div>
        </div>
      `;

      document.getElementById('logoutBtn').addEventListener('click', () => {
        if (confirm('로그아웃 하시겠습니까?')) {
          logout();
        }
      });

      // 탭 전환 이벤트
      document.getElementById('activeTab').addEventListener('click', () => {
        state.studentStatusFilter = 'active';
        render();
      });

      document.getElementById('withdrawnTab').addEventListener('click', () => {
        state.studentStatusFilter = 'withdrawn';
        render();
      });

      document.querySelectorAll('.student-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const studentId = btn.dataset.student;
          state.selectedStudent = state.adminStudents.find(s => s.id === studentId);
          render();
        });
      });
    }

    function renderAdminStudentDetail(app) {
      const student = state.selectedStudent;
      const attempts = student.attempts || [];

      app.innerHTML = `
        <div class="min-h-screen p-6">
          <div class="max-w-5xl mx-auto">
            <div class="mb-4">
              <button id="backBtn" class="text-sm text-orange-500 hover:text-orange-400 flex items-center font-semibold">
                ${icon('chevronLeft', '', 16)}학생 목록으로 돌아가기
              </button>
            </div>

            <div class="bg-gray-900 rounded-2xl p-6 mb-6 shadow-xl border border-orange-500/30">
              <div class="flex items-center justify-between mb-4">
                <div class="flex items-center">
                  <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center mr-3">
                    ${icon('user', 'text-white')}
                  </div>
                  <div>
                    <h2 class="text-xl font-bold text-white">${student.studentName || '이름 없음'}</h2>
                    <p class="text-sm text-gray-400 mt-1">${student.phone || ''}</p>
                  </div>
                </div>
                ${student.status === 'withdrawn' ? `
                  <button id="reactivateBtn" class="px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-bold text-white transition-all transform hover:scale-105 active:scale-95 text-sm flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    재원 처리
                  </button>
                ` : `
                  <button id="withdrawBtn" class="px-4 py-2 bg-yellow-600 hover:bg-yellow-700 rounded-lg font-bold text-white transition-all transform hover:scale-105 active:scale-95 text-sm flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"/>
                    </svg>
                    퇴원 처리
                  </button>
                `}
              </div>
              ${student.status === 'withdrawn' ? `
                <div class="bg-yellow-900/30 border border-yellow-600/50 rounded-lg p-3 mt-4">
                  <p class="text-yellow-400 text-sm font-bold flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                    </svg>
                    퇴원 처리된 학생입니다
                  </p>
                </div>
              ` : ''}
            </div>

            <div class="grid md:grid-cols-4 gap-4 mb-6">
              <div class="bg-gray-900 rounded-xl p-4 border border-gray-800">
                <div class="text-center">
                  <div class="text-2xl font-bold text-orange-400">${attempts.length}</div>
                  <div class="text-xs text-gray-500 mt-1">전체 시도</div>
                </div>
              </div>
              <div class="bg-gray-900 rounded-xl p-4 border border-gray-800">
                <div class="text-center">
                  <div class="text-2xl font-bold text-green-400">${attempts.filter(a => a.percentage === 100).length}</div>
                  <div class="text-xs text-gray-500 mt-1">완료 테마</div>
                </div>
              </div>
              <div class="bg-gray-900 rounded-xl p-4 border border-gray-800">
                <div class="text-center">
                  <div class="text-2xl font-bold text-blue-400">
                    ${attempts.length > 0 ? Math.round(attempts.reduce((sum, a) => sum + a.percentage, 0) / attempts.length) : 0}%
                  </div>
                  <div class="text-xs text-gray-500 mt-1">평균 정답률</div>
                </div>
              </div>
              <div class="bg-gray-900 rounded-xl p-4 border border-gray-800">
                <div class="text-center">
                  <div class="text-2xl font-bold text-purple-400">
                    ${attempts.length > 0 ? Math.round(attempts.reduce((sum, a) => sum + a.correct, 0) / attempts.length) : 0}
                  </div>
                  <div class="text-xs text-gray-500 mt-1">평균 정답 수</div>
                </div>
              </div>
            </div>

            ${attempts.length === 0 ? `
              <div class="bg-gray-900 rounded-2xl p-12 text-center border border-gray-800">
                ${icon('barChart', 'mx-auto mb-4 text-gray-600', 48)}
                <p class="text-gray-400 font-medium">아직 학습 기록이 없습니다.</p>
              </div>
            ` : `
              <div class="space-y-6">
                ${(() => {
                  // 날짜별로 그룹화 (날짜만 추출, 시간 제외)
                  const dateGroups = {};
                  attempts.forEach(attempt => {
                    // 날짜에서 시간 부분 제거
                    const dateOnly = attempt.date.split('.')[0] + '.' + attempt.date.split('.')[1] + '.' + attempt.date.split('.')[2];

                    if (!dateGroups[dateOnly]) {
                      dateGroups[dateOnly] = {
                        date: dateOnly,
                        regularTests: [],
                        wrongTests: []
                      };
                    }

                    if (attempt.isWrongAnswerTest) {
                      dateGroups[dateOnly].wrongTests.push(attempt);
                    } else {
                      dateGroups[dateOnly].regularTests.push(attempt);
                    }
                  });

                  // 날짜순으로 정렬 (최신순)
                  const sortedDates = Object.keys(dateGroups).sort((a, b) => {
                    return new Date(b.replace(/\. /g, '-')) - new Date(a.replace(/\. /g, '-'));
                  });

                  return sortedDates.map((dateKey, groupIdx) => {
                    const group = dateGroups[dateKey];
                    const allTestsInDate = [...group.regularTests, ...group.wrongTests];

                    // 해당 날짜의 모든 테스트 통계 계산
                    const totalCorrect = allTestsInDate.reduce((sum, t) => sum + t.correct, 0);
                    const totalIncorrect = allTestsInDate.reduce((sum, t) => sum + ((t.answeredCount || t.total) - t.correct), 0);
                    const totalAnswered = totalCorrect + totalIncorrect;
                    const overallPercentage = totalAnswered > 0 ? Math.round((totalCorrect / totalAnswered) * 100) : 0;

                    // 총 소요시간 계산 (밀리초 → 분:초)
                    const totalTimeMs = allTestsInDate.reduce((sum, t) => sum + (t.totalTime || 0), 0);
                    const totalMinutes = Math.floor(totalTimeMs / 60000);
                    const totalSeconds = Math.floor((totalTimeMs % 60000) / 1000);
                    const totalTimeStr = totalMinutes > 0
                      ? `${totalMinutes}분 ${totalSeconds}초`
                      : `${totalSeconds}초`;

                    const dateCardId = `admin-date-${groupIdx}`;
                    const isExpanded = state.expandedAttempts[dateCardId];

                    // 구두테스트 재시험이 필요한 구두테스트 찾기 (틀린 문제가 있는 경우)
                    const testsNeedingRetest = group.regularTests.filter(t => {
                      const hasWrongAnswers = (t.answeredCount || t.total) - t.correct > 0;
                      return hasWrongAnswers;
                    }).map(t => {
                      // 이 테스트에 대한 재시험 찾기
                      const round1 = group.wrongTests.find(w => w.wrongAnswerAttemptId === t.date && w.retestRound === 1);
                      const round2 = group.wrongTests.find(w => w.wrongAnswerAttemptId === t.date && w.retestRound === 2);

                      let availableRounds = [];
                      if (!round1) {
                        // 1회차가 없으면 1회차 시작 가능
                        availableRounds.push(1);
                      } else if (round1.percentage < 100 && !round2) {
                        // 1회차가 100점이 아니고 2회차가 없으면 2회차 시작 가능
                        availableRounds.push(2);
                      }

                      return {
                        ...t,
                        availableRounds,
                        round1,
                        round2
                      };
                    }).filter(t => t.availableRounds.length > 0);

                    return `
                      <div class="bg-gray-900 rounded-2xl border border-gray-800 shadow-xl overflow-hidden">
                        <button
                          class="attempt-card-header w-full text-left p-5 hover:bg-gray-800/50 transition-all"
                          data-attempt-id="${dateCardId}"
                        >
                          <div class="flex items-center justify-between mb-4">
                            <div class="flex-1">
                              <h3 class="text-lg font-bold text-white mb-1">${group.date}</h3>
                              <p class="text-xs text-gray-500">총 ${totalAnswered}개 문제 · ${totalTimeStr}</p>
                            </div>
                            <div class="text-3xl font-bold ${overallPercentage === 100 ? 'text-green-400' : overallPercentage >= 80 ? 'text-orange-400' : 'text-red-400'}">
                              ${overallPercentage}%
                            </div>
                          </div>

                          <div class="grid grid-cols-3 gap-3 pt-4 border-t border-gray-800">
                            <div class="text-center">
                              <div class="text-xl font-bold text-green-400">${totalCorrect}</div>
                              <div class="text-xs text-gray-500">맞힌 개수</div>
                            </div>
                            <div class="text-center">
                              <div class="text-xl font-bold text-red-400">${totalIncorrect}</div>
                              <div class="text-xs text-gray-500">틀린 개수</div>
                            </div>
                            <div class="text-center flex items-center justify-center">
                              <svg class="w-5 h-5 transform transition-transform ${isExpanded ? 'rotate-180' : ''}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                              </svg>
                            </div>
                          </div>
                        </button>

                        ${isExpanded ? `
                          <div class="border-t border-gray-800 p-5 bg-gray-800/30">
                            <!-- 구두테스트 재시험 시작 버튼들 -->
                            ${testsNeedingRetest.length > 0 ? `
                              <div class="mb-6 space-y-2">
                                <h4 class="text-sm font-bold text-purple-400 mb-3">📝 구두테스트 재시험 시작하기</h4>
                                ${testsNeedingRetest.map(test => {
                                  return test.availableRounds.map(round => `
                                    <button
                                      class="start-wrong-answer-test-btn w-full px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 rounded-xl font-bold text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg text-sm"
                                      data-attempt-date="${test.date}"
                                      data-round="${round}"
                                    >
                                      ${test.themeName} 재시험 ${round}회차 시작 (2문제)
                                    </button>
                                  `).join('');
                                }).join('')}
                              </div>
                            ` : ''}

                            <!-- 각 테스트 상세 정보 -->
                            <div class="space-y-4">
                              ${allTestsInDate.map((test, testIdx) => {
                                const category = categories.find(c => c.id === test.categoryId);
                                const theme = category?.chapters.find(t => t.id === test.themeId);

                                if (!theme) return '';

                                const testCardId = `admin-test-${groupIdx}-${testIdx}`;
                                const isTestExpanded = state.expandedAttempts[testCardId];

                                // 문제 분류
                                const correctQuestions = [];
                                const wrongQuestions = [];
                                const answeredQuestions = test.answeredQuestions || Object.keys(test.answers || {}).map(Number);

                                answeredQuestions.forEach(qIdx => {
                                  const answer = test.answers?.[qIdx];
                                  const question = theme?.questions[qIdx];
                                  if (question) {
                                    if (answer?.correct) {
                                      correctQuestions.push({ idx: qIdx, question, answer });
                                    } else {
                                      wrongQuestions.push({ idx: qIdx, question, answer });
                                    }
                                  }
                                });

                                return `
                                  <div class="bg-gray-900/50 rounded-xl border border-gray-700 overflow-hidden">
                                    <button
                                      class="attempt-card-header w-full text-left p-3 hover:bg-gray-800/30 transition-all"
                                      data-attempt-id="${testCardId}"
                                    >
                                      <div class="flex items-center justify-between">
                                        <div class="flex-1">
                                          <div class="flex items-center gap-2 mb-1">
                                            <h4 class="text-sm font-bold text-white">${test.themeName}</h4>
                                            <span class="text-xs px-2 py-0.5 rounded ${test.isWrongAnswerTest ? 'bg-purple-500/20 text-purple-400' : 'bg-orange-500/20 text-orange-400'}">
                                              ${test.isWrongAnswerTest ? `재시험 ${test.retestRound || 1}회차` : '구두테스트'}
                                            </span>
                                          </div>
                                          <p class="text-xs text-gray-500">${test.date}</p>
                                        </div>
                                        <div class="flex items-center gap-3">
                                          <div class="text-right">
                                            <div class="text-lg font-bold ${test.percentage === 100 ? 'text-green-400' : test.percentage >= 80 ? 'text-orange-400' : 'text-red-400'}">
                                              ${test.percentage}%
                                            </div>
                                            <div class="text-xs text-gray-500">${test.correct}/${test.answeredCount || test.total}</div>
                                          </div>
                                          <svg class="w-4 h-4 transform transition-transform ${isTestExpanded ? 'rotate-180' : ''}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                          </svg>
                                        </div>
                                      </div>
                                    </button>

                                    ${isTestExpanded ? `
                                      <div class="border-t border-gray-700 p-3 bg-gray-800/20">
                                        <div class="space-y-2">
                                          ${[...correctQuestions, ...wrongQuestions].map(({ idx, question, answer }) => {
                                            const isCorrect = answer?.correct;
                                            return `
                                              <div class="bg-${isCorrect ? 'green' : 'red'}-900/10 border border-${isCorrect ? 'green' : 'red'}-500/30 rounded-lg p-2">
                                                <p class="text-xs text-${isCorrect ? 'green' : 'red'}-400 font-semibold mb-1">문제 ${idx + 1}</p>
                                                <p class="text-xs text-gray-300 mb-2 leading-relaxed">${question.question}</p>
                                                ${answer?.imageUrl ? `
                                                  <div class="mt-2">
                                                    <p class="text-xs text-blue-400 font-semibold mb-1">✏️ 필기:</p>
                                                    <img src="${answer.imageUrl}" alt="필기" class="w-full rounded border border-gray-700" onerror="this.style.display='none'" />
                                                  </div>
                                                ` : ''}
                                                ${test.teacherNotes?.[idx] ? `
                                                  <div class="mt-2 bg-orange-900/20 border border-orange-500/30 rounded p-2">
                                                    <p class="text-xs text-orange-400 font-semibold mb-1">📝 선생님 메모:</p>
                                                    <p class="text-xs text-gray-300">${test.teacherNotes[idx]}</p>
                                                  </div>
                                                ` : ''}
                                              </div>
                                            `;
                                          }).join('')}
                                        </div>
                                      </div>
                                    ` : ''}
                                  </div>
                                `;
                              }).join('')}
                            </div>
                          </div>
                        ` : ''}
                      </div>
                    `;
                  }).join('');
                })()}
              </div>
            `}
          </div>
        </div>
      `;

      document.getElementById('backBtn').addEventListener('click', () => {
        state.showStudentRecords = false;
        render();
      });

      // 구두테스트 재시험 시작 버튼 이벤트
      document.querySelectorAll('.start-wrong-answer-test-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const attemptDate = btn.dataset.attemptDate;
          const round = parseInt(btn.dataset.round) || 1;
          console.log('구두테스트 재시험 버튼 클릭:', attemptDate, '회차:', round);
          startWrongAnswerTestForStudent(attemptDate, round);
        });
      });

      // 퇴원 처리 버튼
      const withdrawBtn = document.getElementById('withdrawBtn');
      if (withdrawBtn) {
        withdrawBtn.addEventListener('click', async () => {
          if (confirm(`${student.studentName} 학생을 퇴원 처리하시겠습니까?\\n\\n퇴원생으로 이동하며, 나중에 재원 처리할 수 있습니다.`)) {
            try {
              await db.collection('probability-students').doc(student.id).update({
                status: 'withdrawn',
                withdrawnAt: new Date().toISOString()
              });
              alert('퇴원 처리가 완료되었습니다.');
              
              // 상태 업데이트
              student.status = 'withdrawn';
              state.studentStatusFilter = 'withdrawn';
              state.selectedStudent = null;
              
              // 데이터 새로고침
              await loadAdminData(state.adminName);
              render();
            } catch (error) {
              console.error('퇴원 처리 오류:', error);
              alert('퇴원 처리 중 오류가 발생했습니다.');
            }
          }
        });
      }

      // 재원 처리 버튼
      const reactivateBtn = document.getElementById('reactivateBtn');
      if (reactivateBtn) {
        reactivateBtn.addEventListener('click', async () => {
          if (confirm(`${student.studentName} 학생을 재원 처리하시겠습니까?\n\n재원생 목록으로 이동합니다.`)) {
            try {
              await db.collection('probability-students').doc(student.id).update({
                status: 'active',
                reactivatedAt: new Date().toISOString()
              });
              alert('재원 처리가 완료되었습니다.');
              
              // 상태 업데이트
              student.status = 'active';
              state.studentStatusFilter = 'active';
              state.selectedStudent = null;
              
              // 데이터 새로고침
              await loadAdminData(state.adminName);
              render();
            } catch (error) {
              console.error('재원 처리 오류:', error);
              alert('재원 처리 중 오류가 발생했습니다.');
            }
          }
        });
      }

      // 카드 헤더 클릭 (확장/축소)
      document.querySelectorAll('.attempt-card-header').forEach(btn => {
        btn.addEventListener('click', () => {
          const attemptId = btn.dataset.attemptId;
          state.expandedAttempts[attemptId] = !state.expandedAttempts[attemptId];
          render();
        });
      });
    }

    function renderStudentRecordsOnly(app, currentStudentAttempts) {
      console.log('=== renderStudentRecordsOnly 호출 ===');
      console.log('받은 currentStudentAttempts:', currentStudentAttempts);
      console.log('currentStudentAttempts.length:', currentStudentAttempts.length);

      // 날짜순 정렬 (최신순)
      const sortedAttempts = [...currentStudentAttempts].sort((a, b) =>
        new Date(b.date) - new Date(a.date)
      );

      console.log('정렬 후 sortedAttempts.length:', sortedAttempts.length);
      console.log('sortedAttempts:', sortedAttempts);

      const hasData = sortedAttempts && sortedAttempts.length > 0;
      console.log('🔍 hasData 검사:', hasData, '(sortedAttempts.length:', sortedAttempts.length, ')');

      app.innerHTML = `
        <div class="min-h-screen p-6">
          <div class="max-w-5xl mx-auto">
            <div class="bg-gray-900 rounded-2xl p-6 mb-6 shadow-xl border border-orange-500/30">
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center mr-3">
                    ${icon('user', 'text-white')}
                  </div>
                  <div>
                    <h2 class="text-xl font-bold text-white">${state.studentName}</h2>
                    <p class="text-sm text-gray-400">학습 기록</p>
                  </div>
                </div>
                <button id="logoutBtn" class="px-5 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-bold text-white transition-all transform hover:scale-105 active:scale-95">
                  로그아웃
                </button>
              </div>
            </div>

            ${!hasData ? `
              <div class="bg-gray-900 rounded-2xl p-12 text-center border border-gray-800 mb-6">
                ${icon('barChart', 'mx-auto mb-4 text-gray-600', 48)}
                <p class="text-gray-400 font-medium mb-2">아직 학습 기록이 없습니다.</p>
                <p class="text-sm text-gray-500">선생님이 구두테스트를 시작하면 기록이 표시됩니다.</p>
              </div>
            ` : `
              <div class="space-y-6">
                ${(() => {
                  // 구두테스트와 재시험을 분리
                  // 똑똑한 필터링: isWrongAnswerTest가 true여도 실제 재시험 데이터가 없으면 일반 테스트로 간주
                  const regularTests = sortedAttempts.filter(a => {
                    // 명시적으로 false면 일반 테스트
                    if (!a.isWrongAnswerTest) return true;

                    // isWrongAnswerTest가 true지만 wrongAnswerAttemptId가 없으면 잘못 분류된 일반 테스트
                    const hasWrongAnswerData = a.wrongAnswerAttemptId;

                    // 재시험 데이터가 없으면 일반 테스트로 취급
                    return !hasWrongAnswerData;
                  });

                  const wrongAnswerTests = sortedAttempts.filter(a => {
                    // isWrongAnswerTest이고 wrongAnswerAttemptId가 있으면 재시험
                    return a.isWrongAnswerTest && a.wrongAnswerAttemptId;
                  });

                  console.log('🔍 똑똑한 필터링 결과:', {
                    sortedAttempts_length: sortedAttempts.length,
                    regularTests_length: regularTests.length,
                    wrongAnswerTests_length: wrongAnswerTests.length
                  });

                  if (sortedAttempts[0]) {
                    console.log('sortedAttempts[0] 분석:', {
                      isWrongAnswerTest: sortedAttempts[0].isWrongAnswerTest,
                      hasWrongAnswerAttemptId: !!sortedAttempts[0].wrongAnswerAttemptId,
                      wrongAnswerQuestionsLength: sortedAttempts[0].wrongAnswerQuestions?.length || 0
                    });
                  }

                  if (regularTests.length === 0) {
                    console.log('❌ regularTests가 여전히 비어있습니다!');
                    console.log('⚠️ 모든 테스트를 표시합니다 (필터링 없음)');

                    // 일반 테스트가 없으면 모든 테스트를 그냥 표시
                    return sortedAttempts.map((test, idx) => {
                      const testId = `all-test-${idx}`;
                      const isExpanded = state.expandedAttempts[testId];
                      const category = categories.find(c => c.id === test.categoryId);
                      const theme = category?.chapters.find(t => t.id === test.themeId);

                      if (!theme) return '';

                      const testType = test.isWrongAnswerTest ? `재시험 ${test.retestRound || 1}회차` : '구두테스트';
                      const testColor = test.isWrongAnswerTest ? 'purple' : 'orange';

                      return `
                        <div class="bg-gray-900 rounded-2xl border border-gray-800 shadow-xl overflow-hidden">
                          <button
                            class="attempt-card-header w-full text-left p-4 hover:bg-gray-800/50 transition-all"
                            data-attempt-id="${testId}"
                          >
                            <div class="flex items-center justify-between mb-3">
                              <div class="flex-1">
                                <div class="flex items-center gap-2 mb-1">
                                  <h3 class="text-sm font-bold text-white">${test.themeName}</h3>
                                  <span class="text-xs px-2 py-1 rounded bg-${testColor}-500/20 text-${testColor}-400">
                                    ${testType}
                                  </span>
                                </div>
                                <p class="text-xs text-gray-500">${test.date}</p>
                              </div>
                              <div class="text-2xl font-bold ${test.percentage === 100 ? 'text-green-400' : test.percentage >= 80 ? 'text-orange-400' : 'text-red-400'}">
                                ${test.percentage}%
                              </div>
                            </div>

                            <div class="grid grid-cols-4 gap-2 pt-3 border-t border-gray-800">
                              <div class="text-center">
                                <div class="text-base font-bold text-green-400">${test.correct}</div>
                                <div class="text-xs text-gray-500">맞힘</div>
                              </div>
                              <div class="text-center">
                                <div class="text-base font-bold text-red-400">${(test.answeredCount || test.total) - test.correct}</div>
                                <div class="text-xs text-gray-500">틀림</div>
                              </div>
                              <div class="text-center">
                                <div class="text-base font-bold text-blue-400">${(() => {
                                  const totalMs = test.totalTime || 0;
                                  const mins = Math.floor(totalMs / 60000);
                                  const secs = Math.floor((totalMs % 60000) / 1000);
                                  return mins > 0 ? `${mins}분` : `${secs}초`;
                                })()}</div>
                                <div class="text-xs text-gray-500">총 시간</div>
                              </div>
                              <div class="text-center flex items-center justify-center">
                                <svg class="w-4 h-4 transform transition-transform ${isExpanded ? 'rotate-180' : ''}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                              </div>
                            </div>
                          </button>
                        </div>
                      `;
                    }).join('');
                  } else {
                    console.log('✅ regularTests에', regularTests.length, '개의 테스트가 있습니다');
                  }

                  // 날짜별로 그룹화 (YYYY. MM. DD 형식으로)
                  const groupedByDate = {};
                  regularTests.forEach(test => {
                    // "2025. 12. 17. 오전 1:14:10" -> "2025. 12. 17" 추출
                    const dateParts = test.date.split(' ');
                    const dateOnly = dateParts[0] + ' ' + dateParts[1] + ' ' + dateParts[2].replace('.', '');

                    if (!groupedByDate[dateOnly]) {
                      groupedByDate[dateOnly] = [];
                    }
                    groupedByDate[dateOnly].push(test);
                  });

                  // 날짜 키들을 배열로 변환하고 내림차순 정렬 (최신 날짜가 먼저)
                  const sortedDates = Object.keys(groupedByDate).sort((a, b) => {
                    const parseDate = (dateStr) => {
                      const parts = dateStr.split(' ').map(p => parseInt(p.replace('.', '')));
                      return new Date(parts[0], parts[1] - 1, parts[2]);
                    };
                    return parseDate(b) - parseDate(a);
                  });

                  // 날짜별로 렌더링
                  return sortedDates.map(dateKey => {
                    const testsForDate = groupedByDate[dateKey];

                    return `
                      <div class="mb-8">
                        <h2 class="text-xl font-bold text-white mb-4 border-b border-gray-700 pb-2">${dateKey}</h2>
                        <div class="space-y-4">
                          ${testsForDate.map((regularTest, localIdx) => {
                            // 전체 배열에서의 인덱스 계산 (ID 충돌 방지)
                            const idx = regularTests.findIndex(t => t === regularTest);
                    // 해당 구두테스트의 재시험 1회차, 2회차 모두 찾기
                    const wrongTests = wrongAnswerTests.filter(w => w.wrongAnswerAttemptId === regularTest.date);
                    const wrongTest1 = wrongTests.find(w => w.retestRound === 1);
                    const wrongTest2 = wrongTests.find(w => w.retestRound === 2);
                    const hasRetests = wrongTests.length > 0;

                    // 재시험 상태 계산
                    let retestStatus = null;
                    let retestStatusColor = '';
                    let retestStatusText = '';

                    if (wrongTest1 && wrongTest1.percentage === 100) {
                      retestStatus = 'pass1';
                      retestStatusColor = 'bg-green-500/30 text-green-400';
                      retestStatusText = '재시험 1회차 통과';
                    } else if (wrongTest1 && wrongTest1.percentage < 100 && !wrongTest2) {
                      retestStatus = 'fail1';
                      retestStatusColor = 'bg-red-500/30 text-red-400';
                      retestStatusText = '재시험 1회차 불통과';
                    } else if (wrongTest2 && wrongTest2.percentage === 100) {
                      retestStatus = 'pass2';
                      retestStatusColor = 'bg-green-500/30 text-green-400';
                      retestStatusText = '재시험 2회차 통과';
                    } else if (wrongTest2 && wrongTest2.percentage < 100) {
                      retestStatus = 'fail';
                      retestStatusColor = 'bg-red-500/30 text-red-400';
                      retestStatusText = '재시험 불통과';
                    }

                    const category = categories.find(c => c.id === regularTest.categoryId);
                    const theme = category?.chapters.find(t => t.id === regularTest.themeId);

                    const regularAttemptId = `regular-${idx}`;
                    const retestsAttemptId = `retests-${idx}`;
                    const isRegularExpanded = state.expandedAttempts[regularAttemptId];
                    const isRetestsExpanded = state.expandedAttempts[retestsAttemptId];

                    // 구두테스트의 맞은/틀린 문제 분류
                    const regularCorrectQuestions = [];
                    const regularWrongQuestions = [];
                    const regularAnsweredQuestions = regularTest.answeredQuestions || Object.keys(regularTest.answers || {}).map(Number);

                    regularAnsweredQuestions.forEach(qIdx => {
                      const answer = regularTest.answers?.[qIdx];
                      const question = theme?.questions[qIdx];
                      if (question) {
                        if (answer?.correct) {
                          regularCorrectQuestions.push({ idx: qIdx, question, answer });
                        } else {
                          regularWrongQuestions.push({ idx: qIdx, question, answer });
                        }
                      }
                    });

                    // 재시험 1회차의 맞은/틀린 문제 분류
                    let wrongCorrectQuestions1 = [];
                    let wrongWrongQuestions1 = [];
                    if (wrongTest1) {
                      const wrongAnsweredQuestions = wrongTest1.answeredQuestions || Object.keys(wrongTest1.answers || {}).map(Number);
                      wrongAnsweredQuestions.forEach(qIdx => {
                        const answer = wrongTest1.answers?.[qIdx];
                        const question = theme?.questions[qIdx];
                        if (question) {
                          if (answer?.correct) {
                            wrongCorrectQuestions1.push({ idx: qIdx, question, answer });
                          } else {
                            wrongWrongQuestions1.push({ idx: qIdx, question, answer });
                          }
                        }
                      });
                    }

                    // 재시험 2회차의 맞은/틀린 문제 분류
                    let wrongCorrectQuestions2 = [];
                    let wrongWrongQuestions2 = [];
                    if (wrongTest2) {
                      const wrongAnsweredQuestions = wrongTest2.answeredQuestions || Object.keys(wrongTest2.answers || {}).map(Number);
                      wrongAnsweredQuestions.forEach(qIdx => {
                        const answer = wrongTest2.answers?.[qIdx];
                        const question = theme?.questions[qIdx];
                        if (question) {
                          if (answer?.correct) {
                            wrongCorrectQuestions2.push({ idx: qIdx, question, answer });
                          } else {
                            wrongWrongQuestions2.push({ idx: qIdx, question, answer });
                          }
                        }
                      });
                    }

                    // 두 카드를 그리드로 배치
                    return `
                      <div class="grid md:grid-cols-2 gap-4">
                        <!-- 구두테스트 카드 -->
                        <div class="bg-gray-900 rounded-2xl border border-gray-800 shadow-xl overflow-hidden">
                          <button
                            class="attempt-card-header w-full text-left p-4 hover:bg-gray-800/50 transition-all"
                            data-attempt-id="${regularAttemptId}"
                          >
                            <div class="flex items-center justify-between mb-3">
                              <div class="flex-1">
                                <div class="flex items-center gap-2 mb-1">
                                  <h3 class="text-base font-bold text-white">${regularTest.themeName}</h3>
                                  <span class="text-xs px-2 py-1 rounded ${regularTest.percentage >= 80 ? 'bg-green-500/30 text-green-400' : 'bg-red-500/30 text-red-400'} font-bold">
                                    ${regularTest.percentage >= 80 ? '구두테스트 통과' : '구두테스트 불통과'}
                                  </span>
                                </div>
                                <p class="text-xs text-gray-500">${regularTest.date.split(' ').slice(3).join(' ')}</p>
                              </div>
                              <div class="text-2xl font-bold ${regularTest.percentage === 100 ? 'text-green-400' : regularTest.percentage >= 80 ? 'text-orange-400' : 'text-red-400'}">
                                ${regularTest.percentage}%
                              </div>
                            </div>

                            <div class="grid grid-cols-4 gap-2 pt-3 border-t border-gray-800">
                              <div class="text-center">
                                <div class="text-base font-bold text-green-400">${regularTest.correct}</div>
                                <div class="text-xs text-gray-500">맞힘</div>
                              </div>
                              <div class="text-center">
                                <div class="text-base font-bold text-red-400">${(regularTest.answeredCount || regularTest.total) - regularTest.correct}</div>
                                <div class="text-xs text-gray-500">틀림</div>
                              </div>
                              <div class="text-center">
                                <div class="text-base font-bold text-blue-400">${(() => {
                                  const totalMs = regularTest.totalTime || 0;
                                  const mins = Math.floor(totalMs / 60000);
                                  const secs = Math.floor((totalMs % 60000) / 1000);
                                  return mins > 0 ? `${mins}분` : `${secs}초`;
                                })()}</div>
                                <div class="text-xs text-gray-500">총 시간</div>
                              </div>
                              <div class="text-center flex items-center justify-center">
                                <svg class="w-4 h-4 transform transition-transform ${isRegularExpanded ? 'rotate-180' : ''}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                </svg>
                              </div>
                            </div>
                          </button>

                          ${isRegularExpanded && theme ? `
                            <div class="border-t border-gray-800 p-4 bg-gray-800/30">
                              <div class="space-y-3">
                                ${[...regularCorrectQuestions, ...regularWrongQuestions].map(({ idx, question, answer }) => {
                                  const isCorrect = answer?.correct;
                                  return `
                                    <div class="bg-${isCorrect ? 'green' : 'red'}-900/10 border border-${isCorrect ? 'green' : 'red'}-500/30 rounded-lg p-3">
                                      <p class="text-xs text-${isCorrect ? 'green' : 'red'}-400 font-semibold mb-1">문제 ${idx + 1}</p>
                                      <p class="text-xs text-gray-300 mb-2 leading-relaxed">${question.question}</p>
                                      ${answer?.imageUrl ? `
                                        <div class="mt-2">
                                          <p class="text-xs text-blue-400 font-semibold mb-1">✏️ 필기:</p>
                                          <img src="${answer.imageUrl}" alt="필기" class="w-full rounded border border-gray-700" onerror="this.style.display='none'" />
                                        </div>
                                      ` : ''}
                                      ${regularTest.teacherNotes?.[idx] ? `
                                        <div class="mt-2 bg-orange-900/20 border border-orange-500/30 rounded p-2">
                                          <p class="text-xs text-orange-400 font-semibold mb-1">📝 선생님 메모:</p>
                                          <p class="text-xs text-gray-300">${regularTest.teacherNotes[idx]}</p>
                                        </div>
                                      ` : ''}
                                    </div>
                                  `;
                                }).join('')}
                              </div>
                            </div>
                          ` : ''}
                        </div>

                        <!-- 재시험 카드 (1회차와 2회차를 묶어서 표시) -->
                        ${hasRetests ? `
                          <div class="bg-gray-900 rounded-2xl border border-gray-800 shadow-xl overflow-hidden">
                            <button
                              class="attempt-card-header w-full text-left p-4 hover:bg-gray-800/50 transition-all"
                              data-attempt-id="${retestsAttemptId}"
                            >
                              <div class="flex items-center justify-between mb-3">
                                <div class="flex-1">
                                  <div class="flex items-center gap-2 mb-1">
                                    <h3 class="text-base font-bold text-white">${regularTest.themeName}</h3>
                                    ${retestStatusText ? `
                                      <span class="text-xs px-2 py-1 rounded font-bold ${retestStatusColor}">
                                        ${retestStatusText}
                                      </span>
                                    ` : ''}
                                  </div>
                                  <p class="text-xs text-gray-500">
                                    ${wrongTest1 ? wrongTest1.date.split(' ').slice(3).join(' ') : ''}${wrongTest1 && wrongTest2 ? ', ' : ''}${wrongTest2 ? wrongTest2.date.split(' ').slice(3).join(' ') : ''}
                                  </p>
                                </div>
                                <div class="text-center flex items-center justify-center">
                                  <svg class="w-4 h-4 transform transition-transform ${isRetestsExpanded ? 'rotate-180' : ''}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                                  </svg>
                                </div>
                              </div>
                            </button>

                            ${isRetestsExpanded && theme ? `
                              <div class="border-t border-gray-800 p-4 bg-gray-800/30 space-y-4">
                                <!-- 재시험 1회차 -->
                                ${wrongTest1 ? `
                                  <div class="bg-purple-900/10 rounded-xl border border-purple-500/30 p-3">
                                    <div class="flex items-center justify-between mb-3">
                                      <div class="flex items-center gap-2">
                                        <span class="text-xs px-2 py-1 rounded bg-purple-500/30 text-purple-300 font-bold">
                                          재시험 1회차
                                        </span>
                                        ${wrongTest1.percentage === 100 ? `
                                          <span class="text-xs px-2 py-1 rounded bg-green-500/30 text-green-400 font-bold">
                                            통과
                                          </span>
                                        ` : ''}
                                        <span class="text-xs text-gray-500">${wrongTest1.date}</span>
                                      </div>
                                      <div class="text-xl font-bold ${wrongTest1.percentage === 100 ? 'text-green-400' : wrongTest1.percentage >= 80 ? 'text-purple-400' : 'text-red-400'}">
                                        ${wrongTest1.percentage}%
                                      </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-2 mb-3">
                                      <div class="text-center bg-green-900/20 rounded p-2">
                                        <div class="text-base font-bold text-green-400">${wrongTest1.correct}</div>
                                        <div class="text-xs text-gray-500">맞힘</div>
                                      </div>
                                      <div class="text-center bg-red-900/20 rounded p-2">
                                        <div class="text-base font-bold text-red-400">${(wrongTest1.answeredCount || wrongTest1.total) - wrongTest1.correct}</div>
                                        <div class="text-xs text-gray-500">틀림</div>
                                      </div>
                                      <div class="text-center bg-blue-900/20 rounded p-2">
                                        <div class="text-base font-bold text-blue-400">${(() => {
                                          const totalMs = wrongTest1.totalTime || 0;
                                          const mins = Math.floor(totalMs / 60000);
                                          const secs = Math.floor((totalMs % 60000) / 1000);
                                          return mins > 0 ? `${mins}분` : `${secs}초`;
                                        })()}</div>
                                        <div class="text-xs text-gray-500">총 시간</div>
                                      </div>
                                    </div>

                                    <div class="space-y-3">
                                      ${[...wrongCorrectQuestions1, ...wrongWrongQuestions1].map(({ idx, question, answer }) => {
                                        const isCorrect = answer?.correct;
                                        return `
                                          <div class="bg-${isCorrect ? 'green' : 'red'}-900/10 border border-${isCorrect ? 'green' : 'red'}-500/30 rounded-lg p-3">
                                            <p class="text-xs text-${isCorrect ? 'green' : 'red'}-400 font-semibold mb-1">문제 ${idx + 1}</p>
                                            <p class="text-xs text-gray-300 mb-2 leading-relaxed">${question.question}</p>
                                            ${answer?.imageUrl ? `
                                              <div class="mt-2">
                                                <p class="text-xs text-blue-400 font-semibold mb-1">✏️ 필기:</p>
                                                <img src="${answer.imageUrl}" alt="필기" class="w-full rounded border border-gray-700" onerror="this.style.display='none'" />
                                              </div>
                                            ` : ''}
                                            ${wrongTest1.teacherNotes?.[idx] ? `
                                              <div class="mt-2 bg-orange-900/20 border border-orange-500/30 rounded p-2">
                                                <p class="text-xs text-orange-400 font-semibold mb-1">📝 선생님 메모:</p>
                                                <p class="text-xs text-gray-300">${wrongTest1.teacherNotes[idx]}</p>
                                              </div>
                                            ` : ''}
                                          </div>
                                        `;
                                      }).join('')}
                                    </div>
                                  </div>
                                ` : ''}

                                <!-- 재시험 2회차 -->
                                ${wrongTest2 ? `
                                  <div class="bg-purple-900/10 rounded-xl border border-purple-500/30 p-3">
                                    <div class="flex items-center justify-between mb-3">
                                      <div class="flex items-center gap-2">
                                        <span class="text-xs px-2 py-1 rounded bg-purple-500/30 text-purple-300 font-bold">
                                          재시험 2회차
                                        </span>
                                        ${wrongTest2.percentage === 100 ? `
                                          <span class="text-xs px-2 py-1 rounded bg-green-500/30 text-green-400 font-bold">
                                            통과
                                          </span>
                                        ` : `
                                          <span class="text-xs px-2 py-1 rounded bg-red-500/30 text-red-400 font-bold">
                                            불통과
                                          </span>
                                        `}
                                        <span class="text-xs text-gray-500">${wrongTest2.date}</span>
                                      </div>
                                      <div class="text-xl font-bold ${wrongTest2.percentage === 100 ? 'text-green-400' : wrongTest2.percentage >= 80 ? 'text-purple-400' : 'text-red-400'}">
                                        ${wrongTest2.percentage}%
                                      </div>
                                    </div>

                                    <div class="grid grid-cols-3 gap-2 mb-3">
                                      <div class="text-center bg-green-900/20 rounded p-2">
                                        <div class="text-base font-bold text-green-400">${wrongTest2.correct}</div>
                                        <div class="text-xs text-gray-500">맞힘</div>
                                      </div>
                                      <div class="text-center bg-red-900/20 rounded p-2">
                                        <div class="text-base font-bold text-red-400">${(wrongTest2.answeredCount || wrongTest2.total) - wrongTest2.correct}</div>
                                        <div class="text-xs text-gray-500">틀림</div>
                                      </div>
                                      <div class="text-center bg-blue-900/20 rounded p-2">
                                        <div class="text-base font-bold text-blue-400">${(() => {
                                          const totalMs = wrongTest2.totalTime || 0;
                                          const mins = Math.floor(totalMs / 60000);
                                          const secs = Math.floor((totalMs % 60000) / 1000);
                                          return mins > 0 ? `${mins}분` : `${secs}초`;
                                        })()}</div>
                                        <div class="text-xs text-gray-500">총 시간</div>
                                      </div>
                                    </div>

                                    <div class="space-y-3">
                                      ${[...wrongCorrectQuestions2, ...wrongWrongQuestions2].map(({ idx, question, answer }) => {
                                        const isCorrect = answer?.correct;
                                        return `
                                          <div class="bg-${isCorrect ? 'green' : 'red'}-900/10 border border-${isCorrect ? 'green' : 'red'}-500/30 rounded-lg p-3">
                                            <p class="text-xs text-${isCorrect ? 'green' : 'red'}-400 font-semibold mb-1">문제 ${idx + 1}</p>
                                            <p class="text-xs text-gray-300 mb-2 leading-relaxed">${question.question}</p>
                                            ${answer?.imageUrl ? `
                                              <div class="mt-2">
                                                <p class="text-xs text-blue-400 font-semibold mb-1">✏️ 필기:</p>
                                                <img src="${answer.imageUrl}" alt="필기" class="w-full rounded border border-gray-700" onerror="this.style.display='none'" />
                                              </div>
                                            ` : ''}
                                            ${wrongTest2.teacherNotes?.[idx] ? `
                                              <div class="mt-2 bg-orange-900/20 border border-orange-500/30 rounded p-2">
                                                <p class="text-xs text-orange-400 font-semibold mb-1">📝 선생님 메모:</p>
                                                <p class="text-xs text-gray-300">${wrongTest2.teacherNotes[idx]}</p>
                                              </div>
                                            ` : ''}
                                          </div>
                                        `;
                                      }).join('')}
                                    </div>
                                  </div>
                                ` : ''}
                              </div>
                            ` : ''}
                          </div>
                        ` : `
                          <div class="bg-gray-900/30 rounded-2xl border border-dashed border-gray-700 p-8 flex items-center justify-center">
                            <p class="text-gray-600 text-sm text-center">
                              재시험 미진행
                            </p>
                          </div>
                        `}
                      </div>
                    `;
                          }).join('')}
                        </div>
                      </div>
                    `;
                  }).join('');
                })()}
              </div>
            `}

            <div class="mt-6 bg-blue-900/20 border border-blue-500/30 rounded-xl p-4">
              <p class="text-blue-400 text-sm font-medium text-center">
                ${icon('info', 'inline mr-2', 18)}구두테스트는 선생님이 진행합니다
              </p>
              <p class="text-xs text-gray-400 mt-1 text-center">선생님께서 테스트를 시작하면 여기에 기록이 남습니다.</p>
              <button
                id="refreshDataBtn"
                class="mt-3 w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-bold text-white transition-all transform hover:scale-105 active:scale-95 text-sm"
              >
                ${icon('refreshCw', 'inline mr-2', 18)}최신 기록 불러오기
              </button>
            </div>
          </div>
        </div>
      `;

      // 최신 기록 불러오기 버튼
      const refreshBtn = document.getElementById('refreshDataBtn');
      console.log('🔵 refreshDataBtn 요소:', refreshBtn ? '존재함' : '❌ 없음!');

      if (refreshBtn) {
        refreshBtn.addEventListener('click', async () => {
          console.log('\n🔄 ===== 최신 기록 불러오기 버튼 클릭 =====');
          console.log('클릭 시각:', new Date().toLocaleTimeString());
          console.log('현재 state.uid:', state.uid);
          console.log('현재 state.studentName:', state.studentName);
          console.log('불러오기 전 attempts 수:', state.allStudentData[state.studentName]?.attempts?.length || 0);
          console.log('불러오기 전 state.isWrongAnswerTest:', state.isWrongAnswerTest);

          const btn = document.getElementById('refreshDataBtn');
          btn.disabled = true;
          btn.innerHTML = `${icon('refreshCw', 'inline mr-2 animate-spin', 18)}불러오는 중...`;

          console.log('⏳ loadData() 호출 시작...');
          await loadData(state.uid);
          console.log('✅ loadData() 완료');

          console.log('불러온 후 attempts 수:', state.allStudentData[state.studentName]?.attempts?.length || 0);
          console.log('불러온 후 state.isWrongAnswerTest:', state.isWrongAnswerTest);
          console.log('불러온 데이터:', state.allStudentData[state.studentName]);

          console.log('🔄 render() 호출...');
          render();
          console.log('===== 최신 기록 불러오기 완료 =====\n');
        });
      } else {
        console.error('❌ refreshDataBtn 요소를 찾을 수 없습니다!');
      }

      // DOM에 실제로 렌더링된 내용 확인
      setTimeout(() => {
        const appElement = document.getElementById('app');
        const hasNoDataMessage = appElement.innerHTML.includes('아직 학습 기록이 없습니다');
        const hasTestData = appElement.innerHTML.includes('총') && appElement.innerHTML.includes('개 문제');
        console.log('📋 DOM 확인:', {
          hasNoDataMessage,
          hasTestData,
          refreshBtnExists: !!document.getElementById('refreshDataBtn')
        });
      }, 50);

      // 로그아웃 버튼
      document.getElementById('logoutBtn').addEventListener('click', () => {
        state.isLoggedIn = false;
        state.userType = null;
        state.studentName = '';
        state.phone = '';
        state.teacherName = '';
        state.uid = '';
        state.selectedCategory = null;
        state.currentTheme = null;
        state.currentQuestion = 0;
        state.answers = {};
        state.allStudentData = {};
        state.expandedAttempts = {};
        render();
      });

      // 카드 헤더 클릭 (확장/축소)
      document.querySelectorAll('.attempt-card-header').forEach(btn => {
        btn.addEventListener('click', () => {
          const attemptId = btn.dataset.attemptId;
          state.expandedAttempts[attemptId] = !state.expandedAttempts[attemptId];
          render();
        });
      });
    }

    function renderMainScreen() {
      const app = document.getElementById('app');
      console.log('=== renderMainScreen 호출 ===');
      console.log('state.studentName:', state.studentName);
      console.log('state.allStudentData 키들:', Object.keys(state.allStudentData));
      console.log('state.allStudentData[state.studentName]:', state.allStudentData[state.studentName]);

      const currentStudentAttempts = state.allStudentData[state.studentName]?.attempts || [];
      console.log('currentStudentAttempts 길이:', currentStudentAttempts.length);

      // 구두테스트 재시험 모드일 때는 퀴즈 화면 표시
      if (state.isWrongAnswerTest && state.wrongAnswerQuestions.length > 0) {
        renderQuizScreen(app);
      } else {
        // 학생은 학습 기록만 볼 수 있음 (테스트는 선생님이 진행)
        renderStudentRecordsOnly(app, currentStudentAttempts);
      }
    }

    function renderAdminCategorySelection(app) {
      const student = state.selectedStudent;

      app.innerHTML = `
        <div class="min-h-screen p-6">
          <div class="max-w-5xl mx-auto">
            <div class="bg-gray-900 rounded-2xl p-6 mb-8 shadow-xl border border-orange-500/30">
              <div class="flex items-center mb-4">
                <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center mr-3">
                  ${icon('user', 'text-white')}
                </div>
                <div class="flex-1">
                  <h2 class="text-xl font-bold text-white">${student.studentName}</h2>
                  <p class="text-sm text-gray-400 mt-1">${state.adminName} 선생님</p>
                </div>
              </div>
              <div class="flex gap-2">
                <button id="recordBtn" class="flex items-center px-5 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-bold text-white transition-all transform hover:scale-105 active:scale-95">
                  ${icon('barChart', 'mr-2', 18)}학습 기록 보기
                </button>
                <button id="backBtn" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-bold text-white transition-all transform hover:scale-105 active:scale-95 text-sm">
                  뒤로 가기
                </button>
              </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
              ${categories.map(category => `
                <button
                  data-cat="${category.id}"
                  class="cat-btn bg-gray-900 rounded-2xl p-6 border shadow-xl text-left transition-all transform ${
                    category.chapters.length > 0
                      ? 'border-gray-800 hover:shadow-orange-500/20 hover:border-orange-500/50 hover:scale-105 active:scale-95'
                      : 'border-gray-800 opacity-50 cursor-not-allowed'
                  }"
                  ${category.chapters.length === 0 ? 'disabled' : ''}
                >
                  <h3 class="text-base font-bold text-white mb-2">${category.name}</h3>
                  <p class="text-xs text-gray-500 font-semibold">
                    ${category.chapters.length > 0 ? `${category.chapters.length}개의 테마` : '준비 중'}
                  </p>
                </button>
              `).join('')}
            </div>
          </div>
        </div>
      `;

      document.getElementById('recordBtn').addEventListener('click', () => {
        state.showStudentRecords = true;
        render();
      });

      document.getElementById('backBtn').addEventListener('click', () => {
        state.selectedStudent = null;
        state.showStudentRecords = false;
        render();
      });

      document.querySelectorAll('.cat-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const catId = parseInt(btn.dataset.cat);
          const category = categories.find(c => c.id === catId);
          if (category.chapters.length > 0) {
            state.selectedCategory = catId;
            render();
          }
        });
      });
    }

    function renderCategorySelection(app) {
      app.innerHTML = `
        <div class="min-h-screen p-6">
          <div class="max-w-5xl mx-auto">
            <div class="bg-gray-900 rounded-2xl p-6 mb-8 shadow-xl border border-orange-500/30">
              <div class="flex items-center mb-4">
                <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center mr-3">
                  ${icon('user', 'text-white')}
                </div>
                <h2 class="text-xl font-bold text-white">${state.studentName}</h2>
              </div>
              <div class="flex gap-2">
                <button id="recordBtn" class="flex items-center px-5 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg font-bold text-white transition-all border border-gray-700 transform hover:scale-105 active:scale-95">
                  ${icon('barChart', 'mr-2', 18)}학습 기록
                </button>
                <button id="logoutBtn" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-bold text-white transition-all transform hover:scale-105 active:scale-95 text-sm">
                  로그아웃
                </button>
              </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4">
              ${categories.map(category => `
                <button
                  data-cat="${category.id}"
                  class="cat-btn bg-gray-900 rounded-2xl p-6 border shadow-xl text-left transition-all transform ${
                    category.chapters.length > 0
                      ? 'border-gray-800 hover:shadow-orange-500/20 hover:border-orange-500/50 hover:scale-105 active:scale-95'
                      : 'border-gray-800 opacity-50 cursor-not-allowed'
                  }"
                  ${category.chapters.length === 0 ? 'disabled' : ''}
                >
                  <h3 class="text-base font-bold text-white mb-2">${category.name}</h3>
                  <p class="text-xs text-gray-500 font-semibold">
                    ${category.chapters.length > 0 ? `${category.chapters.length}개의 테마` : '준비 중'}
                  </p>
                </button>
              `).join('')}
            </div>
          </div>
        </div>
      `;

      document.getElementById('recordBtn').addEventListener('click', () => {
        state.showResults = true;
        state.recordSelectedCategory = null; // Chapter 선택 화면을 먼저 보여주기 위해 초기화
        render();
      });

      document.getElementById('logoutBtn').addEventListener('click', () => {
        if (confirm('로그아웃 하시겠습니까?')) {
          logout();
        }
      });

      document.querySelectorAll('.cat-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const catId = parseInt(btn.dataset.cat);
          const category = categories.find(c => c.id === catId);
          if (category.chapters.length > 0) {
            state.selectedCategory = catId;
            render();
          }
        });
      });
    }

    function renderThemeSelection(app) {
      const category = categories.find(c => c.id === state.selectedCategory);
      
      app.innerHTML = `
        <div class="min-h-screen p-6">
          <div class="max-w-5xl mx-auto">
            <div class="mb-4">
              <button id="backBtn" class="text-sm text-orange-500 hover:text-orange-400 flex items-center font-semibold">
                ${icon('chevronLeft', '', 16)}챕터 선택으로 돌아가기
              </button>
            </div>

            <div class="bg-gray-900 rounded-2xl p-6 mb-8 shadow-xl border border-orange-500/30">
              <div class="flex items-center justify-between mb-4">
                <div>
                  <h2 class="text-xl font-bold text-white">${category.name}</h2>
                  <p class="text-sm text-gray-400 mt-1 font-medium">테마 선택</p>
                </div>
                <button id="resultsBtn" class="flex items-center px-5 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg font-bold text-white transition-all border border-gray-700 transform hover:scale-105 active:scale-95">
                  ${icon('barChart', 'mr-2', 18)}학습 기록
                </button>
              </div>
              
              ${category.chapterInfo ? `
                <div class="mt-4 pt-4 border-t border-gray-700">
                  <div class="grid grid-cols-2 gap-3">
                    ${category.chapterInfo.map(info => `
                      <div class="bg-gray-800/50 rounded-lg p-3 border border-gray-700">
                        <div class="flex items-baseline gap-2 mb-1">
                          <span class="text-orange-400 font-bold text-xs">${info.partName}</span>
                          <span class="text-gray-300 text-xs font-medium">${info.description}</span>
                        </div>
                        <span class="text-gray-500 text-xs">${info.range}</span>
                      </div>
                    `).join('')}
                  </div>
                </div>
              ` : ''}
            </div>

            <div class="grid md:grid-cols-2 gap-4">
              ${category.chapters.map(theme => {
                const status = getThemeStatus(state.selectedCategory, theme.id);
                const locked = isLocked(state.selectedCategory, theme.id);
                const remainingSeconds = getRemainingTime(state.selectedCategory, theme.id);
                const minutes = Math.floor(remainingSeconds / 60);
                const seconds = remainingSeconds % 60;
                const isCompleted = status.status === 'completed';

                return `
                  <div class="bg-gray-900 rounded-2xl p-6 shadow-xl transition-all relative ${
                    isCompleted 
                      ? 'border-2 border-green-500/50 shadow-green-500/20' 
                      : 'border border-gray-800 hover:shadow-orange-500/20 hover:border-orange-500/50'
                  }">
                    ${isCompleted ? `
                      <div class="absolute top-4 right-4 flex items-center justify-center" style="width: 28px; height: 28px;">
                        <svg style="width:28px;height:28px;flex-shrink:0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-green-500">
                          <circle cx="12" cy="8" r="7"/>
                          <path d="M8.21 13.89 7 23l5-3 5 3-1.21-9.12"/>
                        </svg>
                      </div>
                    ` : ''}
                    
                    <div class="flex items-start justify-between mb-4">
                      <h3 class="text-base font-bold text-white flex-1 pr-8">${theme.name}</h3>
                    </div>
                    
                    <p class="text-xs text-gray-500 mb-4 font-semibold">${theme.questions.length}개 문제</p>
                    
                    ${status.lastAttempt ? `
                      <div class="mb-4 p-4 bg-gray-800/50 rounded-xl border border-gray-700">
                        <p class="text-xs text-gray-500 font-semibold mb-1">최근 시도</p>
                        <p class="text-lg font-bold text-orange-400">
                          ${status.lastAttempt.percentage}% <span class="text-sm text-gray-500">(${status.lastAttempt.correct}/${status.lastAttempt.total})</span>
                        </p>
                        <p class="text-xs text-gray-500 mt-1">시도 횟수: ${status.attemptCount}회</p>
                      </div>
                    ` : ''}

                    ${isCompleted ? `
                      <div class="space-y-2">
                        <div class="w-full py-3 bg-gradient-to-r from-green-500 to-green-600 rounded-xl font-bold text-white text-center flex items-center justify-center text-sm shadow-lg shadow-green-500/30">
                          ${icon('checkCircle', 'mr-2', 18)}퀴즈 완료
                        </div>
                        <button data-theme="${theme.id}" class="start-btn w-full py-2 bg-gray-800 hover:bg-gray-700 rounded-xl font-semibold text-white transition-all text-xs border border-gray-700 transform hover:scale-105 active:scale-95">
                          다시 도전하기
                        </button>
                      </div>
                    ` : locked ? `
                      <div class="space-y-3">
                        <div class="w-full py-3 bg-gray-800/50 rounded-xl font-bold text-gray-400 text-center border border-gray-700 cursor-not-allowed flex items-center justify-center text-sm">
                          ${icon('lock', 'mr-2', 16)}${icon('clock', 'mr-1', 16)}<span data-lock-timer="${theme.id}">${minutes}:${seconds.toString().padStart(2, '0')} 후 재시험 가능</span>
                        </div>
                        <button data-review="${theme.id}" class="review-btn w-full py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 rounded-xl font-bold text-white transition-all text-sm shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 transform hover:scale-105 active:scale-95 flex items-center justify-center">
                          ${icon('bookOpen', 'mr-2', 18)}힌트 복습하기
                        </button>
                      </div>
                    ` : status.status === 'retry' ? `
                      <button data-theme="${theme.id}" class="start-btn w-full py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 rounded-xl font-bold text-white transition-all text-sm shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50 transform hover:scale-105 active:scale-95">
                        퀴즈 다시 도전하기
                      </button>
                    ` : `
                      <button data-theme="${theme.id}" class="start-btn w-full py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 rounded-xl font-bold text-white transition-all text-sm shadow-lg shadow-orange-500/30 hover:shadow-orange-500/50 transform hover:scale-105 active:scale-95">
                        퀴즈 시작
                      </button>
                    `}
                  </div>
                `;
              }).join('')}
            </div>
          </div>
        </div>
      `;

      document.getElementById('backBtn').addEventListener('click', () => {
        state.selectedCategory = null;
        render();
      });

      document.getElementById('resultsBtn').addEventListener('click', () => {
        state.showResults = true;
        state.recordSelectedCategory = state.selectedCategory; // 현재 선택된 카테고리를 학습 기록용으로 설정
        render();
      });

      document.querySelectorAll('.start-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          handleStartQuiz(parseInt(btn.dataset.theme));
        });
      });

      document.querySelectorAll('.review-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          state.showResults = true;
          state.selectedCategory = state.selectedCategory;
          render();
        });
      });
    }

    function renderQuizScreen(app) {
      const category = categories.find(c => c.id === state.selectedCategory);
      if (!category || !category.chapters) {
        app.innerHTML = `<div class="min-h-screen flex items-center justify-center p-6"><p class="text-white">카테고리를 찾을 수 없습니다.</p></div>`;
        return;
      }

      const theme = category.chapters.find(t => t.id === state.currentTheme);
      if (!theme || !theme.questions) {
        app.innerHTML = `<div class="min-h-screen flex items-center justify-center p-6"><p class="text-white">테마를 찾을 수 없습니다.</p></div>`;
        return;
      }

      // 구두테스트 재시험 모드인지 확인
      const isWrongTest = state.isWrongAnswerTest;
      const questions = isWrongTest ? state.wrongAnswerQuestions : theme.questions;
      const themeName = isWrongTest ? `${theme.name} - 재시험 ${state.retestRound || 1}회차` : theme.name;

      const question = questions[state.currentQuestion];
      const answer = state.answers[state.currentQuestion];
      const answeredCount = Object.keys(state.answers).length;
      const correctCount = Object.values(state.answers).filter(a => a.correct).length;
      const incorrectCount = answeredCount - correctCount;
      // 부분 완료 허용 - 최소 1문제만 풀면 저장 가능
      const isComplete = answeredCount >= 1;

      app.innerHTML = `
        <div class="min-h-screen p-6">
          <div class="max-w-4xl mx-auto">
            <div class="mb-4">
              <button id="backToThemeBtn" class="text-sm text-orange-500 hover:text-orange-400 flex items-center font-semibold">
                ${icon('chevronLeft', '', 16)}${isWrongTest ? '학습 기록으로 돌아가기' : '테마 선택으로 돌아가기'}
              </button>
            </div>

            <div class="bg-gray-900 rounded-2xl p-5 mb-6 shadow-xl border ${isWrongTest ? 'border-purple-500/30' : 'border-orange-500/30'}">
              <div class="flex items-center justify-between">
                <div>
                  <h2 class="text-base font-bold text-white">${state.studentName}</h2>
                  <p class="text-xs ${isWrongTest ? 'text-purple-400' : 'text-gray-400'} mt-1 font-medium">${themeName}</p>
                </div>
                <div class="text-right">
                  <p class="text-xs text-gray-500 font-semibold">진행 상황</p>
                  <p class="text-lg font-bold ${isWrongTest ? 'text-purple-400' : 'text-orange-400'}">${state.currentQuestion + 1} / ${questions.length}</p>
                </div>
              </div>
            </div>

            <div class="bg-gray-900 rounded-2xl p-6 mb-6 shadow-xl border border-gray-800">
              <div class="grid grid-cols-3 gap-4 text-center">
                <div>
                  <div class="text-2xl font-bold text-green-400">${correctCount}</div>
                  <div class="text-xs text-gray-500 mt-1 font-medium">맞힌 개수</div>
                </div>
                <div>
                  <div class="text-2xl font-bold text-red-400">${incorrectCount}</div>
                  <div class="text-xs text-gray-500 mt-1 font-medium">틀린 개수</div>
                </div>
                <div>
                  <div class="text-2xl font-bold text-orange-400">${answeredCount}</div>
                  <div class="text-xs text-gray-500 mt-1 font-medium">답변 완료</div>
                </div>
              </div>
            </div>

            <div class="bg-gray-900 rounded-2xl p-8 border border-gray-800 shadow-xl mb-6">
              <div class="mb-8">
                <div class="flex items-center justify-between mb-4">
                  <span class="inline-block px-3 py-1 bg-orange-500/20 text-orange-400 rounded-lg text-xs font-bold">
                    문제 ${state.currentQuestion + 1}
                  </span>
                  ${!answer ? `
                    <div class="flex items-center gap-2">
                      <div class="flex items-center gap-2 px-4 py-2 bg-blue-500/20 rounded-lg border border-blue-500/30">
                        <svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <span id="questionTimer" class="text-lg font-bold text-blue-400">3:00</span>
                      </div>
                      <button
                        id="timerStartBtn"
                        onclick="startQuestionTimer()"
                        class="px-3 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg transition-all text-xs font-bold"
                      >
                        ▶ 시작
                      </button>
                      <button
                        id="timerStopBtn"
                        onclick="stopQuestionTimer()"
                        class="px-3 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-all text-xs font-bold"
                      >
                        ■ 정지
                      </button>
                    </div>
                  ` : ''}
                </div>
                <p class="text-lg leading-relaxed text-white font-medium">${question.question}</p>
              </div>

              <!-- Canvas 필기 영역 -->
              <div class="mb-6">
                <div class="flex items-center justify-between mb-3">
                  <h3 class="text-white font-semibold text-sm flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                    </svg>
                    필기 영역
                  </h3>
                  <div class="flex gap-2">
                    <button
                      onclick="setPenMode()"
                      id="penBtn"
                      class="text-xs px-3 py-1.5 rounded-lg transition-all font-bold ${!state.isEraserMode ? 'bg-blue-500 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}"
                    >
                      ✏️ 펜
                    </button>
                    <button
                      onclick="toggleEraser()"
                      id="eraserBtn"
                      class="text-xs px-3 py-1.5 rounded-lg transition-all font-bold ${state.isEraserMode ? 'bg-orange-500 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}"
                    >
                      🧹 지우개
                    </button>
                    <button
                      onclick="clearCanvas()"
                      class="text-xs bg-red-500/20 hover:bg-red-500/30 text-red-400 px-3 py-1.5 rounded-lg transition-all font-bold"
                    >
                      🗑️ 전체 지우기
                    </button>
                  </div>
                </div>

                <canvas
                  id="drawingCanvas"
                  class="w-full bg-white rounded-xl mb-3 touch-none"
                  style="height: 450px; border: 2px solid #374151;"
                ></canvas>

                <div class="flex items-center gap-3 bg-gray-800/50 p-2 rounded-lg">
                  <div class="flex items-center gap-2">
                    <span class="text-gray-400 text-xs">색상:</span>
                    <div class="flex gap-1">
                      ${['#000000', '#FF0000', '#0000FF', '#00AA00', '#FF6B00'].map(color => `
                        <button
                          onclick="changePenColor('${color}')"
                          class="w-6 h-6 rounded-full border-2 ${state.penColor === color ? 'border-orange-400 ring-2 ring-orange-400/50' : 'border-gray-600'} transition-all"
                          style="background-color: ${color};"
                        ></button>
                      `).join('')}
                    </div>
                  </div>

                  <div class="flex items-center gap-2">
                    <span class="text-gray-400 text-xs">굵기:</span>
                    <div class="flex gap-1">
                      ${[2, 3, 5, 8].map(size => `
                        <button
                          onclick="changePenSize(${size})"
                          class="w-6 h-6 rounded flex items-center justify-center text-xs ${state.penSize === size ? 'bg-orange-500 text-white' : 'bg-gray-700 text-gray-300'} transition-all"
                        >
                          ${size}
                        </button>
                      `).join('')}
                    </div>
                  </div>
                </div>
              </div>

              <div class="flex gap-3 mb-6">
                ${['O', 'X'].map(opt => {
                  let btnClass = 'flex-1 py-4 px-6 rounded-xl font-bold text-2xl transition-all ';

                  if (state.quizCompleted) {
                    // 퀴즈 완료 후에는 버튼 비활성화
                    btnClass += 'cursor-not-allowed opacity-50 ';
                    if (!answer) {
                      btnClass += 'bg-gray-800 border-2 border-gray-700 text-gray-400';
                    } else {
                      if (answer.selected === opt) {
                        if (answer.correct) {
                          btnClass += 'bg-gradient-to-r from-green-500 to-green-600 border-2 border-green-400 text-white';
                        } else {
                          btnClass += 'bg-gradient-to-r from-red-500 to-red-600 border-2 border-red-400 text-white';
                        }
                      } else {
                        btnClass += 'bg-gray-800 border-2 border-gray-700 text-gray-400';
                      }
                    }
                  } else {
                    btnClass += 'transform hover:scale-105 active:scale-95 cursor-pointer ';
                    if (!answer) {
                      btnClass += 'bg-gray-800 hover:bg-gray-700 border-2 border-gray-700 text-white';
                    } else {
                      if (answer.selected === opt) {
                        if (answer.correct) {
                          btnClass += 'bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 border-2 border-green-400 text-white shadow-lg shadow-green-500/50';
                        } else {
                          btnClass += 'bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 border-2 border-red-400 text-white shadow-lg shadow-red-500/50';
                        }
                      } else {
                        btnClass += 'bg-gray-800 hover:bg-gray-700 border-2 border-gray-700 text-white';
                      }
                    }
                  }

                  return `
                    <button data-answer="${opt}" class="answer-btn ${btnClass}" ${state.quizCompleted ? 'disabled' : ''}>
                      ${answer?.selected === opt ? (answer.correct ? icon('checkCircle', 'inline mr-2', 22) : icon('xCircle', 'inline mr-2', 22)) : ''}
                      ${opt}
                    </button>
                  `;
                }).join('')}
              </div>
              
              ${answer ? `
                <div class="p-5 rounded-xl border-2 ${answer.correct ? 'bg-green-900/20 border-green-500/50' : 'bg-red-900/20 border-red-500/50'}">
                  <p class="font-bold text-sm mb-2" style="color: ${answer.correct ? '#4ade80' : '#f87171'}">
                    ${answer.correct ? '✓ 정답입니다!' : '✗ 오답입니다.'}
                  </p>
                ${answer.correct ? `
                  <p class="text-sm text-gray-300 leading-relaxed font-medium">
                    <span class="text-green-400 font-bold">해설:</span> ${question.explanation}
                  </p>
                ` : `
                  <p class="text-sm text-gray-300 leading-relaxed font-medium">
                    <span class="text-orange-400 font-bold">💡 힌트:</span> ${question.hint}
                  </p>
                `}
                  ${state.userType === 'admin' ? `
                    <div class="mt-4 pt-4 border-t border-gray-700">
                      <label class="text-sm text-gray-300 font-bold mb-2 block">📝 선생님 메모:</label>
                      <textarea
                        id="teacherNote-${state.currentQuestion}"
                        class="w-full p-3 bg-gray-900/50 border border-gray-700 rounded-lg text-sm text-gray-300 focus:border-orange-500 focus:outline-none resize-none"
                        rows="3"
                        placeholder="이 문제에 대한 메모를 입력하세요..."
                      >${(() => {
                        const noteKey = state.isWrongAnswerTest
                          ? state.currentTheme + '_wrong_' + state.wrongAnswerAttemptId
                          : state.currentTheme;
                        return state.teacherNotes[noteKey]?.[state.currentQuestion] || '';
                      })()}</textarea>
                    </div>
                  ` : ''}
                </div>
              ` : ''}
            </div>

            <div class="flex gap-3">
              <button id="prevBtn" class="flex items-center px-8 py-4 bg-gray-800 hover:bg-gray-700 disabled:bg-gray-800/30 disabled:cursor-not-allowed rounded-xl font-bold transition-all border border-gray-700 disabled:border-gray-800 text-white disabled:text-gray-600 text-base transform hover:scale-105 active:scale-95 disabled:scale-100" ${state.currentQuestion === 0 ? 'disabled' : ''}>
                ${icon('chevronLeft', 'mr-1', 20)}이전
              </button>

              <button id="nextBtn" class="flex items-center justify-center px-8 py-4 rounded-xl font-bold transition-all text-base transform ${
                state.currentQuestion < questions.length - 1
                  ? 'bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 hover:scale-105 active:scale-95'
                  : 'bg-gray-800/30 cursor-not-allowed border border-gray-700 text-gray-600 scale-100'
              }" ${state.currentQuestion >= questions.length - 1 ? 'disabled' : ''}>
                다음${icon('chevronRight', 'ml-1', 20)}
              </button>

              <button id="finishBtn" class="px-4 py-2 rounded-xl font-bold transition-all text-xs transform ${
                isComplete
                  ? 'bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white shadow-lg shadow-orange-500/30 hover:scale-105 active:scale-95'
                  : 'bg-gray-800/30 cursor-not-allowed border border-gray-700 text-gray-600 scale-100'
              }" ${!isComplete ? 'disabled' : ''}>
                ${isComplete ? `완료 (${answeredCount}/${questions.length})` : '최소 1문제 이상'}
              </button>
            </div>

            ${isComplete ? `
              <div class="mt-6 border-2 rounded-2xl p-6 shadow-xl ${
                correctCount === answeredCount
                  ? 'bg-green-900/20 border-green-500/50'
                  : 'bg-orange-900/20 border-orange-500/50'
              }">
                <h3 class="text-xl font-bold mb-4 text-center ${
                  correctCount === answeredCount ? 'text-green-400' : 'text-orange-400'
                }">
                  ${correctCount === answeredCount ? '🎉 완벽합니다!' : '저장 준비 완료!'}
                </h3>
                <p class="text-base text-center mb-3 text-white font-medium">
                  응답한 ${answeredCount}문제 중 <span class="text-green-400 font-bold">${correctCount}문제</span> 맞히셨습니다!
                </p>
                <p class="text-sm text-center mb-4 text-gray-300 font-medium">
                  정답률: <span class="font-bold text-lg ${
                    correctCount === answeredCount ? 'text-green-400' : 'text-orange-400'
                  }">
                    ${Math.round((correctCount / answeredCount) * 100)}%
                  </span>
                </p>
                ${answeredCount < theme.questions.length ? `
                  <p class="text-center text-xs text-gray-400 font-medium">
                    📝 ${theme.questions.length - answeredCount}개 문제 미응답 (부분 완료로 저장됩니다)
                  </p>
                ` : ''}
              </div>
            ` : ''}
          </div>
        </div>
      `;

      document.getElementById('backToThemeBtn').addEventListener('click', () => {
        // 구두테스트 재시험 모드 종료
        if (state.isWrongAnswerTest) {
          state.isWrongAnswerTest = false;
          state.wrongAnswerQuestions = [];
          state.wrongAnswerAttemptId = null;
          state.retestRound = null;
          state.showResults = true; // 학습 기록으로 돌아가기
        }

        state.currentTheme = null;
        state.currentQuestion = 0;
        state.answers = {};
        stopQuestionTimer();
        render();
      });

      // 이전 버튼 이벤트
      const prevBtn = document.getElementById('prevBtn');
      if (prevBtn) {
        prevBtn.addEventListener('click', handlePrev);
      }

      // 다음 버튼 이벤트
      const nextBtn = document.getElementById('nextBtn');
      if (nextBtn) {
        nextBtn.addEventListener('click', handleNext);
      }

      // 완료 버튼 이벤트 (항상 등록, disabled 속성이 클릭 방지)
      const finishBtn = document.getElementById('finishBtn');
      if (finishBtn) {
        finishBtn.addEventListener('click', async () => {
          if (!isComplete) return; // 추가 안전장치

          console.log('완료 버튼 클릭됨');
          finishBtn.disabled = true;
          finishBtn.textContent = '저장 중...';
          try {
            await handleFinishQuiz();
          } catch (error) {
            console.error('완료 처리 오류:', error);
            alert('오류 발생: ' + error.message);
            finishBtn.disabled = false;
            finishBtn.textContent = '결과 저장하고 완료';
          }
        });
      }

      // O, X 버튼 이벤트 (퀴즈 완료 후에는 handleAnswer에서 차단됨)
      document.querySelectorAll('.answer-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          handleAnswer(btn.dataset.answer);
        });
      });

      // Canvas 초기화
      setTimeout(() => {
        initCanvas('drawingCanvas');
        redrawCanvas(); // 기존 획 복원
      }, 0);

      // 선생님 메모 이벤트 리스너 (관리자만)
      if (state.userType === 'admin' && answer) {
        const teacherNoteTextarea = document.getElementById(`teacherNote-${state.currentQuestion}`);
        if (teacherNoteTextarea) {
          teacherNoteTextarea.addEventListener('input', (e) => {
            // 구두테스트 재시험은 별도의 키 사용
            const noteKey = state.isWrongAnswerTest
              ? state.currentTheme + '_wrong_' + state.wrongAnswerAttemptId
              : state.currentTheme;

            if (!state.teacherNotes[noteKey]) {
              state.teacherNotes[noteKey] = {};
            }
            state.teacherNotes[noteKey][state.currentQuestion] = e.target.value;
          });
        }
      }
    }

    function renderResultsScreen(app, currentStudentAttempts) {
      const categoryAttempts = state.recordSelectedCategory 
        ? currentStudentAttempts.filter(a => a.categoryId === state.recordSelectedCategory)
        : [];

      app.innerHTML = `
        <div class="min-h-screen p-6">
          <div class="max-w-5xl mx-auto">
            <div class="bg-gray-900 rounded-2xl p-6 mb-6 shadow-xl border border-orange-500/30">
              <div class="flex items-center justify-between">
                <div class="flex items-center">
                  <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-full flex items-center justify-center mr-3">
                    ${icon('user', 'text-white')}
                  </div>
                  <div>
                    <h2 class="text-xl font-bold text-white">${state.studentName}</h2>
                    <p class="text-sm text-gray-400">학습 기록</p>
                  </div>
                </div>
                <button id="backBtn" class="px-5 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg font-bold text-white transition-all border border-gray-700 transform hover:scale-105 active:scale-95">
                  돌아가기
                </button>
              </div>
            </div>

            ${state.recordSelectedCategory ? `
              <div class="mb-4">
                <button id="allRecordsBtn" class="text-sm text-orange-500 hover:text-orange-400 flex items-center font-semibold">
                  ${icon('chevronLeft', '', 16)}챕터 선택으로 돌아가기
                </button>
              </div>
              
              <h3 class="text-lg font-bold text-white mb-4">
                ${categories.find(c => c.id === state.recordSelectedCategory)?.name}
              </h3>

              ${categoryAttempts.length === 0 ? `
                <div class="bg-gray-900 rounded-2xl p-12 text-center border border-gray-800">
                  ${icon('barChart', 'mx-auto mb-4 text-gray-600', 48)}
                  <p class="text-gray-400 font-medium">이 챕터의 학습 기록이 없습니다.</p>
                </div>
              ` : `
                <div class="space-y-4">
                  ${(() => {
                    // Theme별로 그룹화 (themeId 기준으로 정렬)
                    const themeGroups = {};
                    categoryAttempts.forEach(attempt => {
                      const key = attempt.themeId;
                      if (!themeGroups[key]) {
                        themeGroups[key] = [];
                      }
                      themeGroups[key].push(attempt);
                    });

                    // themeId 순서대로 정렬
                    const sortedThemeIds = Object.keys(themeGroups).map(Number).sort((a, b) => a - b);

                    return sortedThemeIds.map(themeId => {
                      const attempts = themeGroups[themeId];
                      const lastAttempt = attempts[attempts.length - 1];
                      const allWrongQuestions = attempts
                        .flatMap(a => a.wrongQuestions || [])
                        .filter((q, idx, arr) => arr.indexOf(q) === idx);

                      const isRetakeAvailable = lastAttempt.percentage < 100;
                      const category = categories.find(c => c.id === lastAttempt.categoryId);
                      const theme = category.chapters.find(t => t.id === lastAttempt.themeId);

                      return `
                        <div class="bg-gray-900 rounded-2xl p-6 border border-gray-800 shadow-xl relative">
                          <div class="flex justify-between items-start mb-4">
                            <div>
                              <h3 class="text-base font-bold text-white mb-1">${lastAttempt.themeName}</h3>
                              <p class="text-xs text-gray-500">최종 시도: ${lastAttempt.date}</p>
                            </div>
                            <div class="text-right">
                              <div class="text-2xl font-bold ${lastAttempt.percentage === 100 ? 'text-green-400' : 'text-orange-400'}">
                                ${lastAttempt.percentage}%
                              </div>
                              <div class="text-xs text-gray-500 font-semibold">
                                ${lastAttempt.correct} / ${lastAttempt.answeredCount || lastAttempt.total}
                                ${lastAttempt.answeredCount && lastAttempt.answeredCount < lastAttempt.total ?
                                  `<span class="text-blue-400"> (${lastAttempt.answeredCount}문제 응답)</span>` : ''}
                              </div>
                            </div>
                          </div>

                          ${lastAttempt.answeredQuestions && lastAttempt.answeredCount < lastAttempt.total ? `
                            <div class="mb-4 px-4 py-2 bg-blue-900/20 border border-blue-500/30 rounded-xl">
                              <p class="text-xs text-blue-400 font-semibold mb-1">응답한 문제:</p>
                              <p class="text-xs text-gray-300">
                                ${lastAttempt.answeredQuestions.map(i => `Q${i+1}`).join(', ')}
                              </p>
                            </div>
                          ` : ''}

                          ${lastAttempt.questionTimes && Object.keys(lastAttempt.questionTimes).length > 0 ? `
                            <div class="mb-4 px-4 py-2 bg-purple-900/20 border border-purple-500/30 rounded-xl">
                              <p class="text-xs text-purple-400 font-semibold mb-2">문제별 소요 시간:</p>
                              <div class="grid grid-cols-4 gap-2">
                                ${lastAttempt.answeredQuestions.map(qIdx => {
                                  const timeMs = lastAttempt.questionTimes[qIdx] || 0;
                                  const mins = Math.floor(timeMs / 60000);
                                  const secs = Math.floor((timeMs % 60000) / 1000);
                                  const timeStr = mins > 0 ? `${mins}:${secs.toString().padStart(2, '0')}` : `${secs}초`;
                                  return `
                                    <div class="text-xs bg-gray-900/50 px-2 py-1 rounded">
                                      <span class="text-gray-400">Q${qIdx+1}:</span>
                                      <span class="text-purple-300 font-semibold ml-1">${timeStr}</span>
                                    </div>
                                  `;
                                }).join('')}
                              </div>
                            </div>
                          ` : ''}

                          <div class="grid grid-cols-4 gap-4 pt-4 border-t border-gray-800 mb-4">
                            <div class="text-center">
                              <div class="text-lg font-bold text-green-400">${lastAttempt.correct}</div>
                              <div class="text-xs text-gray-500">맞힌 개수</div>
                            </div>
                            <div class="text-center">
                              <div class="text-lg font-bold text-red-400">${(lastAttempt.answeredCount || lastAttempt.total) - lastAttempt.correct}</div>
                              <div class="text-xs text-gray-500">틀린 개수</div>
                            </div>
                            <div class="text-center">
                              <div class="text-lg font-bold text-blue-400">${attempts.length}</div>
                              <div class="text-xs text-gray-500">시도 횟수</div>
                            </div>
                            <div class="text-center">
                              <div class="text-lg font-bold text-purple-400">${(() => {
                                const totalMs = lastAttempt.totalTime || 0;
                                const mins = Math.floor(totalMs / 60000);
                                const secs = Math.floor((totalMs % 60000) / 1000);
                                return mins > 0 ? `${mins}분 ${secs}초` : `${secs}초`;
                              })()}</div>
                              <div class="text-xs text-gray-500">소요 시간</div>
                            </div>
                          </div>

                          ${isRetakeAvailable ? `
                            <button 
                              data-category="${lastAttempt.categoryId}" 
                              data-theme="${lastAttempt.themeId}" 
                              class="retake-btn w-full mb-4 px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 rounded-xl font-bold text-white transition-all transform hover:scale-105 active:scale-95 shadow-lg shadow-orange-500/30"
                            >
                              🔥 재시험 도전하기
                            </button>
                          ` : `
                            <div class="mb-4 px-6 py-3 bg-green-900/20 border border-green-500/30 rounded-xl text-center">
                              <p class="text-green-400 font-bold text-sm flex items-center justify-center gap-2">
                                ${icon('checkCircle', '', 18)}
                                완벽하게 마스터했습니다!
                              </p>
                            </div>
                          `}

                          ${allWrongQuestions.length > 0 ? `
                            <div class="bg-red-900/20 border border-red-500/30 rounded-xl p-4">
                              <h4 class="text-sm font-bold text-red-400 mb-3 flex items-center flex-wrap gap-2">
                                <span class="flex items-center">
                                  ${icon('xCircle', 'mr-2', 18)}복습 필요 문제
                                </span>
                                ${isRetakeAvailable ? `
                                  <span class="text-xs bg-orange-500/20 text-orange-400 px-2 py-1 rounded font-bold">
                                    재시험 전 복습!
                                  </span>
                                ` : ''}
                              </h4>
                              <div class="space-y-3">
                                ${allWrongQuestions.map((wrongQ, idx) => {
                                  const questionData = theme.questions.find(q => q.question === wrongQ);
                                  return `
                                    <div class="text-sm bg-gray-900/50 rounded-lg p-3 border border-red-500/20">
                                      <p class="text-red-300 font-medium mb-2 leading-relaxed">• ${wrongQ}</p>
                                      ${isRetakeAvailable ? `
                                        <p class="text-gray-400 text-xs leading-relaxed">
                                          <span class="text-orange-400 font-bold">💡 힌트:</span> ${questionData?.hint}
                                        </p>
                                      ` : `
                                        <p class="text-gray-400 text-xs leading-relaxed">
                                          <span class="text-green-400 font-bold">해설:</span> ${questionData?.explanation}
                                        </p>
                                      `}
                                    </div>
                                  `;
                                }).join('')}
                              </div>
                              ${isRetakeAvailable ? `
                                <div class="mt-4 p-3 bg-blue-900/20 border border-blue-500/30 rounded-lg text-center">
                                  <p class="text-blue-400 text-xs font-bold">
                                    ℹ️ 힌트 확인 후 재시험 도전! 재시험에서는 해설 제공
                                  </p>
                                </div>
                              ` : ''}

                              <!-- 구두테스트 재시험 안내 메시지 (학생은 시작 불가) -->
                              ${hasWrongAnswers && !alreadyHasWrongTest ? `
                                <div class="mt-4 bg-purple-900/20 border border-purple-500/30 rounded-xl p-4">
                                  <p class="text-sm text-purple-400 text-center font-medium">
                                    📝 구두테스트 재시험은 선생님이 시작해주실 거예요
                                  </p>
                                </div>
                              ` : ''}
                            </div>
                          ` : ''}

                          <!-- 상세 문제별 기록 (필기 및 선생님 메모) - 항상 표시 -->
                          ${(() => {
                            // 응답한 문제들만 표시
                            const answeredQuestions = lastAttempt.answeredQuestions || Object.keys(lastAttempt.answers || {}).map(Number);

                            if (answeredQuestions.length === 0) return '';

                            return `
                              <div class="mt-4 bg-gray-800/30 border border-gray-700 rounded-xl p-4">
                                <h4 class="text-sm font-bold text-blue-400 mb-3 flex items-center">
                                  ${icon('fileText', 'mr-2', 18)}문제별 상세 기록
                                </h4>
                                <div class="space-y-4">
                                  ${answeredQuestions.map(idx => {
                                    const q = theme.questions[idx];
                                    const answer = lastAttempt.answers?.[idx];
                                    const teacherNote = lastAttempt.teacherNotes?.[idx];

                                    if (!q) return '';

                                    return `
                                      <div class="bg-gray-900/50 rounded-lg p-3 border border-gray-700">
                                        <div class="flex items-center justify-between mb-2">
                                          <p class="text-sm text-gray-300 font-medium">문제 ${idx + 1}</p>
                                          ${answer ? `
                                            <span class="text-xs font-bold ${answer.correct ? 'text-green-400' : 'text-red-400'}">
                                              ${answer.correct ? '✓ 정답' : '✗ 오답'}
                                            </span>
                                          ` : ''}
                                        </div>
                                        <p class="text-xs text-gray-400 mb-3 leading-relaxed">${q.question}</p>

                                        ${answer?.imageUrl ? `
                                          <div class="mb-3">
                                            <p class="text-xs text-blue-400 font-semibold mb-2">✏️ 필기 내용:</p>
                                            <img src="${answer.imageUrl}" alt="필기 ${idx + 1}" class="w-full rounded-lg border border-gray-700" onerror="this.style.display='none';this.previousElementSibling.textContent='필기 내용을 불러올 수 없습니다.'" />
                                          </div>
                                        ` : ''}

                                        ${teacherNote ? `
                                          <div class="bg-orange-900/20 border border-orange-500/30 rounded p-2">
                                            <p class="text-xs text-orange-400 font-semibold mb-1">📝 선생님 메모:</p>
                                            <p class="text-xs text-gray-300 leading-relaxed">${teacherNote}</p>
                                          </div>
                                        ` : ''}
                                      </div>
                                    `;
                                  }).filter(Boolean).join('')}
                                </div>
                              </div>
                            `;
                          })()}
                        </div>
                      `;
                    }).join('');
                  })()}
                </div>
              `}
            ` : currentStudentAttempts.length === 0 ? `
              <div class="bg-gray-900 rounded-2xl p-12 text-center border border-gray-800">
                ${icon('barChart', 'mx-auto mb-4 text-gray-600', 48)}
                <p class="text-gray-400 font-medium">아직 학습 기록이 없습니다.</p>
              </div>
            ` : `
              <div class="grid md:grid-cols-2 gap-4">
                ${categories.filter(cat => currentStudentAttempts.some(a => a.categoryId === cat.id)).map((cat) => {
                  const catAttempts = currentStudentAttempts.filter(a => a.categoryId === cat.id);
                  const avgPercentage = Math.round(catAttempts.reduce((sum, a) => sum + a.percentage, 0) / catAttempts.length);
                  
                  return `
                    <button data-cat="${cat.id}" class="cat-record-btn bg-gray-900 rounded-2xl p-6 border border-gray-800 shadow-xl hover:shadow-orange-500/20 hover:border-orange-500/50 transition-all text-left transform hover:scale-105 active:scale-95">
                      <h3 class="text-base font-bold text-white mb-2">${cat.name}</h3>
                      <div class="flex items-center justify-between">
                        <span class="text-xs text-gray-500 font-semibold">평균 정답률</span>
                        <span class="text-lg font-bold text-orange-400">${avgPercentage}%</span>
                      </div>
                      <div class="text-xs text-gray-500 mt-2 font-medium">
                        시도 횟수: ${catAttempts.length}회
                      </div>
                    </button>
                  `;
                }).join('')}
              </div>
            `}
          </div>
        </div>
      `;

      document.getElementById('backBtn').addEventListener('click', () => {
        state.showResults = false;
        state.recordSelectedCategory = null; // 초기화
        render();
      });

      if (state.recordSelectedCategory) {
        const allRecordsBtn = document.getElementById('allRecordsBtn');
        if (allRecordsBtn) {
          allRecordsBtn.addEventListener('click', () => {
            state.recordSelectedCategory = null;
            render();
          });
        }

        // 재시험 버튼 이벤트 리스너
        document.querySelectorAll('.retake-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const categoryId = parseInt(btn.dataset.category);
            const themeId = parseInt(btn.dataset.theme);

            console.log('🎯 재시험 시작 - 일반 테스트');
            // 재시험 시작
            state.isWrongAnswerTest = false; // 일반 테스트임을 명시
            state.wrongAnswerQuestions = [];
            state.wrongAnswerAttemptId = null;
            state.retestRound = null;

            state.showResults = false;
            state.selectedCategory = categoryId;
            state.currentTheme = themeId;
            state.currentQuestion = 0;
            state.answers = {};
            render();
          });
        });
      } else {
        document.querySelectorAll('.cat-record-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            state.recordSelectedCategory = parseInt(btn.dataset.cat);
            render();
          });
        });
      }
    }

    // 온라인/오프라인 이벤트
    window.addEventListener('online', async () => {
      console.log('온라인 복구됨! 동기화 시작...');
      await syncPendingData();
    });

    window.addEventListener('offline', () => {
      console.log('오프라인 모드');
      alert('오프라인 상태입니다. 데이터는 로컬에 저장되며 온라인 복구 시 자동 동기화됩니다.');
    });

    // 타이머 시작
    setInterval(() => {
      state.currentTime = Date.now();
      
      document.querySelectorAll('[data-lock-timer]').forEach(element => {
        const themeId = parseInt(element.getAttribute('data-lock-timer'));
        if (isLocked(state.selectedCategory, themeId)) {
          const remainingSeconds = getRemainingTime(state.selectedCategory, themeId);
          const minutes = Math.floor(remainingSeconds / 60);
          const seconds = remainingSeconds % 60;
          element.textContent = `${minutes}:${seconds.toString().padStart(2, '0')} 후 재시험 가능`;
        } else {
          render();
        }
      });
    }, 1000);

    // 앱 초기화
    (async function initApp() {
      await initIndexedDB();
      
      const autoLoginInfo = checkAutoLogin();
      if (autoLoginInfo) {
        console.log('자동 로그인 실행:', autoLoginInfo.type);
        
        if (autoLoginInfo.type === 'student') {
          // 학생 자동 로그인
          state.loading = true;
          render();
          
          try {
            const p = state.phone.replace(/[^0-9]/g, '');
            const id = `${state.studentName.trim()}_${p}`;
            state.uid = id;
            
            await loadData(id);
            
            // 퇴원생 체크
            const studentData = state.allStudentData[state.studentName];
            if (studentData && studentData.status === 'withdrawn') {
              state.loading = false;
              alert('퇴원 처리된 학생은 로그인할 수 없습니다.\n담당 선생님께 문의해주세요.');
              logout();
              return;
            }
            
            state.isLoggedIn = true;
            state.userType = 'student';
            state.loading = false;
            render();
          } catch (error) {
            console.error('학생 자동 로그인 오류:', error);
            state.loading = false;
            alert('자동 로그인 중 오류가 발생했습니다.');
            logout();
          }
        } else if (autoLoginInfo.type === 'admin') {
          // 관리자 자동 로그인
          state.loading = true;
          render();
          
          try {
            await loadAdminStudents(autoLoginInfo.name);
            state.isLoggedIn = true;
            state.userType = 'admin';
            state.loading = false;
            render();
          } catch (error) {
            console.error('관리자 자동 로그인 오류:', error);
            state.loading = false;
            alert('자동 로그인 중 오류가 발생했습니다.');
            logout();
          }
        }
      } else {
        render();
      }
      
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js')
          .then(registration => {
            console.log('Service Worker 등록 성공:', registration.scope);
          })
          .catch(error => {
            console.log('Service Worker 등록 실패:', error);
          });
      }
    })();
  </script>
</body>
</html>
